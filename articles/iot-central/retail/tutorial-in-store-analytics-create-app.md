---
title: 자습서 - Azure IoT Central에서 매장 내 분석 애플리케이션 만들기
description: 이 자습서에서는 IoT Central에서 매장 내 분석 소매점 애플리케이션을 만드는 방법을 보여 줍니다. 애플리케이션을 만들고 사용자 지정한 후 센서 디바이스를 추가합니다.
services: iot-central
ms.service: iot-central
ms.subservice: iot-central-retail
ms.topic: tutorial
ms.custom:
- iot-storeAnalytics-checkout
- iot-p0-scenario
ms.author: timlt
author: timlt
ms.date: 11/12/2019
ms.openlocfilehash: 224e48bad96340554fa3667d990c29d681963109
ms.sourcegitcommit: b5508e1b38758472cecdd876a2118aedf8089fec
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/09/2021
ms.locfileid: "113585988"
---
# <a name="tutorial-create-an-in-store-analytics-application-in-azure-iot-central"></a>자습서: Azure IoT Central에서 매장 내 분석 애플리케이션 만들기

이 자습서에서는 Azure IoT Central 매장 내 분석 애플리케이션을 만드는 방법을 보여줍니다. 샘플 애플리케이션은 소매점용입니다. 이 애플리케이션은 점유 및 환경 조건을 모니터링하고 이에 맞게 조정하려는 일반적인 비즈니스 요구를 위한 솔루션입니다.

빌드하는 샘플 애플리케이션에는 3가지 실제 디바이스인 Rigado Cascade 500 게이트웨이 1개와 RuuviTag 센서 2개가 포함되어 있습니다. 또한 이 자습서에서는 테스트 목적으로 애플리케이션 템플릿에 포함된 시뮬레이트된 점유 센서 사용 방법을 보여 줍니다. Rigado C500 게이트웨이는 애플리케이션에서 통신 허브로 사용됩니다. 매장의 센서와 통신하고 클라우드에 대한 연결을 관리합니다. RuuviTag는 온도, 습도 및 압력을 포함하는 원격 분석을 제공하는 환경 센서입니다. 시뮬레이트된 점유 센서는 매장의 체크 아웃 영역에서 동작 및 현재 상태를 추적하는 방법을 제공합니다. 

이 자습서에는 Rigado 및 RuuviTag 디바이스를 애플리케이션에 연결하기 위한 지침이 포함되어 있습니다. 다른 게이트웨이 및 센서가 있는 경우에도 애플리케이션을 빌드하는 단계를 따를 수 있습니다. 이 자습서에서는 시뮬레이트된 RuuviTag 센서를 만드는 방법도 보여 줍니다. 실제 디바이스가 없는 경우 시뮬레이트된 센서를 사용하여 애플리케이션을 빌드할 수 있습니다. 

체크 아웃 및 조건 모니터링 솔루션을 다음 세 부분으로 구분해서 개발합니다.

* 애플리케이션을 만들고 조건을 모니터링하기 위해 디바이스 연결
* 운영자가 디바이스를 모니터링하고 관리할 수 있도록 대시보드 사용자 지정
* 매장 관리자가 분석을 실행하고 인사이트를 시각화할 수 있도록 데이터 내보내기 구성

이 자습서에서는 다음 작업 방법을 알아봅니다.
> [!div class="checklist"]
> * Azure IoT Central **매장 내 분석 - 체크 아웃** 템플릿을 사용하여 소매점 애플리케이션 만들기
> * 애플리케이션 설정 사용자 지정
> * IoT 디바이스 템플릿 만들기 및 사용자 지정
> * 디바이스를 애플리케이션에 연결
> * 조건을 모니터링하기 위한 규칙 및 작업 추가

## <a name="prerequisites"></a>사전 요구 사항

이 자습서 시리즈를 완료하려면 다음이 필요합니다.
* Azure 구독이 권장됩니다. 필요에 따라 7일 무료 평가판을 사용할 수 있습니다. Azure 구독이 아직 없는 경우 [Azure 가입 페이지](https://aka.ms/createazuresubscription)에서 만들 수 있습니다.
* 게이트웨이 디바이스 및 두 개의 환경 센서에 액세스(필요에 따라 자습서에 설명된 대로 시뮬레이트된 디바이스를 사용할 수 있음)
* 사용 중인 디바이스용 디바이스 템플릿(자습서에서 사용되는 모든 디바이스에 대해 템플릿이 제공됨)

## <a name="create-an-application"></a>애플리케이션 만들기
이 섹션에서는 템플릿에서 새 Azure IoT Central 애플리케이션을 만듭니다. 자습서 시리즈 전체에서 이 애플리케이션을 사용하여 전체 솔루션을 빌드합니다.

새로운 Azure IoT Central 애플리케이션을 만들려면:

1. [Azure IoT Central 애플리케이션 관리자](https://aka.ms/iotcentral) 웹 사이트로 이동합니다.

1. Azure 구독이 있으면 액세스하는 데 사용하는 자격 증명을 사용하여 로그인하고, 그렇지 않으면 Microsoft 계정을 사용하여 서명합니다.

    ![조직 계정 입력](./media/tutorial-in-store-analytics-create-app/sign-in.png)

1. 새로운 Azure IoT Central 애플리케이션 만들기를 시작하려면 **새 애플리케이션** 을 선택합니다.

1. **소매** 를 선택합니다.  소매 페이지는 여러 소매점 애플리케이션 템플릿을 표시합니다.

스토어 내 분석 체크 아웃 애플리케이션을 새로 만들려면 다음을 수행합니다.  

1. **매장 내 분석 - 체크 아웃** 애플리케이션 템플릿을 선택합니다. 이 템플릿에는 RuuviTag 센서를 제외하고 이 자습서에서 사용되는 모든 디바이스용 디바이스 템플릿이 포함되어 있습니다. 또한 이 템플릿은 체크 아웃 및 환경 조건 및 디바이스 상태를 모니터링하는 대시보드를 제공합니다. 

1. 필요에 따라 친숙한 **애플리케이션 이름** 을 선택합니다. 이 애플리케이션은 Contoso라는 가상의 소매점을 기준으로 합니다. 이 자습서에서는 **애플리케이션 이름** *Contoso 체크 아웃* 을 사용합니다. 이 애플리케이션 템플릿은 가상의 회사 Northwind를 기준으로 합니다. 이 자습서에서는 Contoso를 사용하여 애플리케이션을 사용자 지정하는 방법을 알아봅니다.

    > [!NOTE]
    > 친숙한 **애플리케이션 이름** 을 사용하는 경우에도 애플리케이션 **URL** 에 대해 고유한 값을 사용해야 합니다.

1. Azure 구독이 있는 경우 *디렉터리, Azure 구독 및 지역* 을 입력합니다. 구독이 없는 경우 **7일 평가판** 을 사용하도록 설정하고 필요한 연락처 정보를 작성할 수 있습니다.  

1. **만들기** 를 선택합니다.

    ![Azure IoT Central 애플리케이션 페이지](./media/tutorial-in-store-analytics-create-app/preview-application-template.png)

    ![Azure IoT Central 애플리케이션 청구 정보 만들기](./media/tutorial-in-store-analytics-create-app/preview-application-template-billinginfo.png)

## <a name="customize-application-settings"></a>애플리케이션 설정 사용자 지정

빌더는 여러 설정을 변경하여 애플리케이션에서 사용자 환경을 사용자 지정할 수 있습니다. 이 섹션에서는 미리 정의된 애플리케이션 테마를 선택합니다. 필요에 따라 사용자 지정 테마를 만들고 애플리케이션 이미지를 업데이트하는 방법을 배웁니다. 사용자 지정 테마를 사용하면 애플리케이션 브라우저 색, 브라우저 아이콘 및 발행인란에 표시되는 애플리케이션 로고를 설정할 수 있습니다.

미리 정의된 애플리케이션 테마를 선택하려면 다음을 수행합니다.

1. 발행인란에서 **설정** 을 선택합니다.

    ![Azure IoT Central 애플리케이션 설정](./media/tutorial-in-store-analytics-create-app/settings-icon.png)

2. 새 **테마** 를 선택합니다.

3. **저장** 을 선택합니다.

미리 정의된 테마를 사용하는 대신, 사용자 지정 테마를 만들 수 있습니다. 샘플 이미지 세트를 사용하여 애플리케이션을 사용자 지정하고 자습서를 완료하려면 [Contoso 샘플 이미지](https://github.com/Azure-Samples/iot-central-docs-samples/tree/master/retail)를 다운로드합니다.

사용자 지정 테마를 만들려면 다음을 수행합니다.

1. 왼쪽 창을 아직 확장하지 않은 경우 확장합니다.

    ![Azure IoT Central 왼쪽 창](./media/tutorial-in-store-analytics-create-app/dashboard-expand.png)

1. **관리 > 애플리케이션 사용자 지정** 을 선택합니다.

1. **변경** 단추를 사용하여 **애플리케이션 로고** 로 업로드할 이미지를 선택합니다. 필요에 따라 **로고 대체 텍스트** 값을 지정합니다. 

1. **변경** 단추를 사용하여 브라우저 탭에 표시되는 **브라우저 아이콘** 이미지를 선택합니다.

1. 필요에 따라 HTML 16진수 색 코드를 추가하여 기본 **브라우저 색** 을 바꿉니다. **헤더** 에 *#008575* 를 추가합니다.  **악센트** 에 *#A1F3EA* 를 추가합니다. 

1. **저장** 을 선택합니다. 

    ![Azure IoT Central 사용자 지정 로고](./media/tutorial-in-store-analytics-create-app/select-application-logo.png)

    저장하면 애플리케이션은 브라우저 색, 발행인란의 로고 및 브라우저 아이콘을 업데이트합니다. 

    ![Azure IoT Central의 업데이트된 애플리케이션 설정](./media/tutorial-in-store-analytics-create-app/saved-application-settings.png)

애플리케이션 이미지를 업데이트하려면 다음을 수행합니다.

1. **관리 > 애플리케이션 설정** 을 선택합니다.

1. **이미지 선택** 단추를 사용하여 애플리케이션 이미지로 업로드할 이미지를 선택합니다. 이 이미지는 IoT Central 애플리케이션 관리자의 **내 앱** 페이지에 있는 애플리케이션 타일에 표시됩니다.

1. **저장** 을 선택합니다.

1. 필요에 따라 [Azure IoT Central 애플리케이션 관리자](https://aka.ms/iotcentral) 웹 사이트에서 **내 앱** 보기로 이동합니다. 애플리케이션 타일에는 업데이트된 애플리케이션 이미지가 표시됩니다.

    ![Azure IoT Central 애플리케이션 이미지 사용자 지정](./media/tutorial-in-store-analytics-create-app/customize-application-image.png)

## <a name="create-device-templates"></a>디바이스 템플릿 만들기
빌더는 사용자 및 애플리케이션 운영자가 디바이스를 구성 및 관리할 수 있도록 하는 디바이스 템플릿을 만들 수 있습니다. 사용자 지정 템플릿을 빌드하거나, 기존 템플릿 파일을 가져오거나, Azure IoT 디바이스 카탈로그에서 템플릿을 가져와 템플릿을 만들 수 있습니다. 디바이스 템플릿을 만들고 사용자 지정한 후에는 이를 사용하여 실제 디바이스를 애플리케이션에 연결합니다. 필요에 따라 디바이스 템플릿을 사용하여 테스트할 시뮬레이트된 디바이스를 생성합니다.

**매장 내 분석 - 체크 아웃** 애플리케이션 템플릿에는 여러 디바이스용 디바이스 템플릿이 있습니다.  애플리케이션에서 사용하는 세 가지 디바이스 중 두 개 디바이스용 디바이스 템플릿이 있습니다. RuuviTag 디바이스 템플릿은 **매장 내 분석 - 체크 아웃** 애플리케이션 템플릿에 포함되어 있지 않습니다. 이 섹션에서는 애플리케이션에 RuuviTag 센서용 디바이스 템플릿을 추가합니다.

애플리케이션에 RuuviTag 디바이스 템플릿을 추가하려면 다음을 수행합니다.

1. 왼쪽 창에서 **디바이스 템플릿** 을 선택합니다.

1. 새 디바이스 템플릿을 만들려면 **+새로 만들기** 를 선택합니다.

1. Azure IoT 디바이스 카탈로그에서 **RuuviTag** 센서 디바이스 템플릿을 찾아 선택합니다. 

1. 완료되면 **다음: 사용자 지정** 을 선택합니다.

    ![다음: 사용자 지정 단추를 강조 표시하는 스크린샷.](./media/tutorial-in-store-analytics-create-app/ruuvitag-device-template.png)

1. **만들기** 를 선택합니다. 애플리케이션은 RuuviTag 디바이스 템플릿을 추가합니다.

1. 왼쪽 창에서 **디바이스 템플릿** 을 선택합니다. 이 페이지에는 애플리케이션 템플릿에 포함된 모든 디바이스 템플릿과 방금 추가한 RuuviTag 디바이스 템플릿이 표시됩니다.

    ![Azure IoT Central RuuviTag 센서 디바이스 템플릿](./media/tutorial-in-store-analytics-create-app/device-templates-list.png)

## <a name="customize-device-templates"></a>디바이스 템플릿 사용자 지정
세 가지 방법으로 애플리케이션에서 디바이스 템플릿을 사용자 지정할 수 있습니다. 먼저 디바이스 기능을 변경하여 디바이스에서 기본 제공 인터페이스를 사용자 지정합니다. 예를 들어, 온도 센서를 사용하여 온도 인터페이스의 표시 이름, 데이터 형식, 측정 단위, 최소 및 최대 작동 범위 등의 세부 정보를 변경할 수 있습니다. 

둘째, 클라우드 속성을 추가하여 디바이스 템플릿을 사용자 지정합니다. 클라우드 속성은 기본 제공 디바이스 기능에 속하지 않습니다. 클라우드 속성은 Azure IoT Central 애플리케이션에서 만들고 저장하고 디바이스에 연결하는 사용자 지정 데이터입니다. 클라우드 속성의 예로는 계산된 값이나 디바이스 세트에 연결하려는 위치와 같은 메타데이터가 있습니다.

셋째, 사용자 지정 보기를 빌드하여 디바이스 템플릿을 사용자 지정합니다. 보기에서는 운영자가 디바이스 메트릭 및 상태와 같은 디바이스에 대한 원격 분석 및 메타데이터를 시각화할 수 있습니다.

여기서는 처음 두 가지 방법을 사용하여 RuuviTag 센서용 디바이스 템플릿을 사용자 지정합니다.

RuuviTag 디바이스 템플릿의 기본 제공 인터페이스를 사용자 지정하려면 다음을 수행합니다.

1. 왼쪽 창에서 **디바이스 템플릿** 을 선택합니다. 

1. RuuviTag 센서용 템플릿을 선택합니다. 

1. 왼쪽 창을 숨깁니다. 템플릿의 요약 보기에는 디바이스 기능이 표시됩니다.

    ![Azure IoT Central RuuviTag 디바이스 템플릿 요약 보기](./media/tutorial-in-store-analytics-create-app/ruuvitag-device-summary-view.png)

1. RuuviTag 디바이스 템플릿 메뉴에서 **사용자 지정** 을 선택합니다. 

1. 기능 목록에서 스크롤하여 `humidity` 원격 분석 유형을 찾습니다. 이 항목은 *습도* 의 편집 가능한 **표시 이름** 값을 포함하는 행입니다.

다음 단계에서는 RuuviTag 센서의 `humidity` 원격 분석 유형을 사용자 지정합니다. 필요에 따라 일부 다른 원격 분석 유형도 사용자 지정합니다.

`humidity` 원격 분석 유형의 경우 다음과 같이 변경합니다.

1. **확장** 컨트롤을 선택하여 행의 스키마 세부 정보를 확장합니다.

1. *습도* 의 **표시 이름** 값을 *상대 습도* 와 같은 사용자 지정 값으로 업데이트합니다.

1. **의미 체계 유형** 옵션을 *없음* 에서 *습도* 로 변경합니다.  필요에 따라 확장된 스키마 보기에서 습도 원격 분석 유형의 스키마 값을 설정합니다. 스키마 설정을 사용하여 센서가 추적하는 데이터에 대한 자세한 유효성 검사 요구 사항을 지정할 수 있습니다. 예를 들어, 지정된 인터페이스의 최소 및 최대 작동 범위 값을 설정할 수 있습니다.

1. **저장** 을 선택하여 변경 내용을 저장합니다.

    ![사용자 지정 화면을 보여주고 저장 단추를 강조 표시하는 스크린샷.](./media/tutorial-in-store-analytics-create-app/ruuvitag-device-template-customize.png)

애플리케이션의 디바이스 템플릿에 클라우드 속성을 추가하려면 다음을 수행합니다.

1. RuuviTag 디바이스 템플릿 메뉴에서 **클라우드 속성** 을 선택합니다.

1. **클라우드 속성 추가** 를 선택합니다. 

다음 값을 지정하여 각 디바이스의 위치를 저장하는 사용자 지정 속성을 만듭니다.

1. **표시 이름** 의 *위치* 값을 입력합니다. 이 값은 속성의 친숙한 이름을 나타내는 **이름** 필드에 자동으로 복사됩니다. 복사한 값을 사용하거나 변경할 수 있습니다.

1. **스키마** 드롭다운에서 *문자열* 을 선택합니다. 문자열 형식을 사용하면 위치 이름 문자열을 템플릿에 따라 디바이스와 연결할 수 있습니다. 예를 들어, 매장의 영역을 각 디바이스와 연결할 수 있습니다. 필요에 따라 속성의 **의미 체계 유형** 을 *위치* 로 설정할 수 있습니다. 그러면 **스키마** 가 *Geopoint* 로 자동 설정됩니다. 이를 통해 GPS 좌표를 디바이스와 연결할 수 있습니다. 

1. **최소 길이** 를 *2* 로 설정합니다. 

1. **트리밍 공백** 을 **켜짐** 으로 설정합니다.

1. **저장** 을 선택하여 사용자 지정 클라우드 속성을 저장합니다.

    ![Azure IoT Central RuuviTag 디바이스 템플릿 사용자 지정](./media/tutorial-in-store-analytics-create-app/ruuvitag-device-template-cloud-property.png)

1. **게시** 를 선택합니다. 

    디바이스 템플릿을 게시하면 애플리케이션 운영자에게 표시됩니다. 템플릿을 게시한 후에는 이 템플릿을 사용하여 테스트를 위한 시뮬레이트된 디바이스를 생성하거나 애플리케이션에 실제 디바이스를 연결합니다. 애플리케이션에 연결된 디바이스가 이미 있는 경우 사용자 지정된 템플릿을 게시하면 변경 내용이 디바이스에 푸시됩니다.

## <a name="add-devices"></a>디바이스 추가
디바이스 템플릿을 만들고 사용자 지정한 후에는 디바이스를 추가할 수 있습니다. 

이 자습서에서는 다음과 같은 실제 및 시뮬레이트된 디바이스 세트를 사용하여 애플리케이션을 빌드합니다.
- 실제 Rigado C500 게이트웨이
- 두 개의 실제 RuuviTag 센서
- 시뮬레이트된 **점유** 센서입니다. 시뮬레이트된 센서는 애플리케이션 템플릿에 포함되므로 만들 필요가 없습니다. 

> [!NOTE]
> 실제 디바이스가 없는 경우 시뮬레이션된 RuuviTag 센서를 만들어 이 자습서를 완료할 수 있습니다. 다음 지침에는 시뮬레이트된 RuuviTag를 만드는 단계가 포함되어 있습니다. 시뮬레이션된 게이트웨이를 만들 필요가 없습니다.

다음 두 문서의 단계를 완료하여 실제 Rigado 게이트웨이와 RuuviTag 센서를 연결합니다. 완료되면 이 자습서로 돌아갑니다. 이 자습서에서 디바이스 템플릿을 이미 만들었기 때문에 다음 지침에 따라 다시 만들 필요가 없습니다.

- Rigado 게이트웨이를 연결하려면 [Azure IoT Central 애플리케이션에 Rigado Cascade 500 연결](../core/howto-connect-rigado-cascade-500.md)을 참조하세요.
- RuuviTag 센서를 연결하려면 [Azure IoT Central 애플리케이션에 RuuviTag 센서 연결](../core/howto-connect-ruuvi.md)을 참조하세요. 필요한 경우 이러한 지침을 사용하여 두 개의 시뮬레이트된 센서를 만들 수도 있습니다.

## <a name="add-rules-and-actions"></a>규칙 및 작업 추가
Azure IoT Central 애플리케이션에서 센서를 사용하여 조건을 모니터링하는 과정의 일부로, 특정 조건이 충족될 때 작업을 실행하는 규칙을 만들 수 있습니다. 규칙은 디바이스 템플릿과 하나 이상의 디바이스에 연결되며 디바이스 원격 분석 또는 이벤트에 따라 충족되어야 하는 조건을 포함합니다. 규칙에는 하나 이상의 관련된 작업도 있습니다. 작업에는 메일 알림 전송 또는 다른 서비스로 데이터를 보내는 웹후크 작업 트리거 등이 포함될 수 있습니다. **매장 내 분석 - 체크 아웃** 애플리케이션 템플릿에는 애플리케이션의 디바이스에 대한 몇 가지 미리 정의된 규칙이 포함되어 있습니다.

이 섹션에서는 RuuviTag 센서 원격 분석을 기준으로 최대 상대 습도 수준을 확인하는 새 규칙을 만듭니다. 습도가 최댓값을 초과하는 경우 애플리케이션에서 이메일을 보내도록 규칙에 작업을 추가합니다. 

규칙을 만들려면 다음을 수행합니다. 

1. 왼쪽 창을 확장합니다.

1. **규칙** 을 선택합니다.

1. **+새로 만들기** 를 선택합니다.

1. 규칙 이름으로 *Humidity level* 을 입력합니다. 

1. **범위** 에서 RuuviTag 디바이스 템플릿을 선택합니다. 정의한 규칙은 해당 템플릿을 기준으로 하는 모든 센서에 적용됩니다. 필요에 따라 센서의 정의된 하위 세트에만 규칙을 적용하는 필터를 만들 수 있습니다. 

1. **원격 분석** 으로 `Relative humidity`를 선택합니다. 이전 단계에서 사용자 지정한 디바이스 기능입니다.

1. **연산자** 로 `Is greater than`을 선택합니다. 

1. 환경에 대한 일반적인 상한 실내 습도 수준을 **값** 으로 입력합니다. 예를 들어 *65* 를 입력합니다. RuuviTag 실제 또는 시뮬레이트된 센서의 상대 습도가 이 값을 초과하는 경우 발생하는 규칙에 대한 조건을 설정했습니다. 환경의 정상적인 습도 범위에 따라 값을 늘리거나 줄여야 할 수 있습니다.  

   ![Azure IoT Central 규칙 조건 추가](./media/tutorial-in-store-analytics-create-app/rules-add-conditions.png)

규칙에 작업을 추가하려면 다음을 수행합니다.

1. **+메일** 을 선택합니다. 

1. 작업의 친숙한 **표시 이름** 으로 *High humidity notification* 을 입력합니다. 

1. **받는 사람** 에 계정과 연결된 메일 주소를 입력합니다. 다른 메일을 사용하는 경우 애플리케이션에 추가된 사용자의 주소를 사용해야 합니다. 또한 사용자는 적어도 한 번 이상 로그인했다가 로그아웃해야 합니다.

1. 필요에 따라 메일 텍스트에 포함할 메모를 입력합니다.

1. **완료** 를 선택하여 작업을 완료합니다.

   ![Azure IoT Central 규칙에 작업 추가](./media/tutorial-in-store-analytics-create-app/rules-add-action.png)

1. **저장** 을 선택하여 새 규칙을 저장하고 활성화합니다. 

    몇 분 이내에 지정된 메일 계정에서 메일을 받기 시작합니다. 애플리케이션은 센서가 습도 수준이 조건 값을 초과했음을 알 때마다 메일을 보냅니다.

## <a name="clean-up-resources"></a>리소스 정리

[!INCLUDE [iot-central-clean-up-resources](../../../includes/iot-central-clean-up-resources.md)]

## <a name="next-steps"></a>다음 단계

이 자습서에서는 다음 작업 방법을 알아보았습니다.

* Azure IoT Central **매장 내 분석 - 체크 아웃** 템플릿을 사용하여 소매점 애플리케이션 만들기
* 애플리케이션 설정 사용자 지정
* IoT 디바이스 템플릿 만들기 및 사용자 지정
* 디바이스를 애플리케이션에 연결
* 조건을 모니터링하기 위한 규칙 및 작업 추가

Azure IoT Central 조건 모니터링 애플리케이션을 만들었으므로 제안되는 다음 단계는 다음과 같습니다.

> [!div class="nextstepaction"]
> [대시보드 사용자 지정](./tutorial-in-store-analytics-customize-dashboard.md)
