---
title: 관리 작업 개요
titleSuffix: Azure SQL Managed Instance
description: Azure SQL Managed Instance 관리 작업 기간 및 모범 사례에 대해 알아봅니다.
services: sql-database
ms.service: sql-managed-instance
ms.subservice: deployment-configuration
ms.custom: ''
ms.devlang: ''
ms.topic: overview
author: urosmil
ms.author: urmilano
ms.reviewer: mathoma, MashaMSFT
ms.date: 06/08/2021
ms.openlocfilehash: 8e33e8271f8b877f20fb3f27885aa518a52ed90e
ms.sourcegitcommit: 0046757af1da267fc2f0e88617c633524883795f
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/13/2021
ms.locfileid: "121751142"
---
# <a name="overview-of-azure-sql-managed-instance-management-operations"></a>Azure SQL Managed Instance 관리 작업 개요
[!INCLUDE[appliesto-sqlmi](../includes/appliesto-sqlmi.md)]

Azure SQL Managed Instance에서는 새로운 관리형 인스턴스를 자동으로 배포하고, 인스턴스 속성을 업데이트하고, 더 이상 필요 없는 인스턴스를 삭제하는 데 사용할 수 있는 관리 작업을 제공합니다.

## <a name="what-are-management-operations"></a>관리 작업이란?

모든 관리 작업은 다음과 같이 분류될 수 있습니다.

- 인스턴스 배포(새 인스턴스 생성)
- 인스턴스 업데이트(vCore, 예약된 스토리지 등의 인스턴스 속성 변경)
- 인스턴스 삭제

[Azure 가상 네트워크 내에서 배포](../../virtual-network/virtual-network-for-azure-services.md)를 지원하고 고객에게 격리 및 보안을 제공하기 위해 SQL Managed Instance는 [가상 클러스터](connectivity-architecture-overview.md#high-level-connectivity-architecture)를 사용합니다. 가상 클러스터는 고객의 가상 네트워크 서브넷 내에 배포되어 격리된 전용 가상 머신 세트를 나타냅니다. 기본적으로 빈 서브넷에 배포된 모든 관리형 인스턴스는 새로운 가상 클러스터로 확장됩니다.

관리형 인스턴스의 후속 관리 작업은 기본 가상 클러스터에 영향을 줄 수 있습니다. 추가 가상 머신을 배포하면 새 배포 또는 기존의 관리형 인스턴스의 업데이트를 계획할 때 고려해야 하는 오버헤드가 발생하므로, 기본 가상 클러스터에 영향을 주는 변경 내용은 관리 작업 기간에도 영향을 미칠 수 있습니다.


## <a name="duration"></a>기간

가상 클러스터에 대한 작업 기간은 달라질 수 있지만, 일반적으로 가장 오래 걸립니다. 

다음은 기존 서비스 원격 분석 데이터에 따라 일반적으로 예측할 수 있는 값입니다.

- **가상 클러스터 만들기**:  만들기는 인스턴스 관리 작업의 동기 단계입니다. <br/> **90%의 작업이 4시간 안에 완료됩니다**.
- **가상 클러스터 크기 조정(확장 또는 축소)** : 확장은 동기 단계이지만 축소는 인스턴스 관리 작업의 기간에 영향을 주지 않고 비동기식으로 수행됩니다. <br/>**90%의 클러스터 확장이 2시간 30분 이내에 완료됩니다.**
- **가상 클러스터 삭제**: 삭제는 비동기 단계이지만, 빈 가상 클러스터에서 [수동으로 시작](virtual-cluster-delete.md)될 수도 있습니다. 이 경우에는 동기식으로 실행됩니다. <br/>**가상 클러스터 삭제의 90%가 1시간 30분 안에 완료됩니다**.

또한 인스턴스 관리에는 호스트된 데이터베이스에 대한 다음 작업 중 하나가 포함될 수 있으며, 이 경우 기간이 더 길어집니다.

- **Azure Storage에서 데이터베이스 파일 연결**:  컴퓨팅(vCore) 스케일링 또는 범용 서비스 계층의 스토리지 확장/축소와 같은 동기 단계입니다. <br/>**이러한 작업의 90%는 5분 안에 완료됩니다**.
- **AlwaysOn 가용성 그룹 시딩**: 컴퓨팅(vCore), 중요 비즈니스용 서비스 계층의 스토리지 크기 조정 및 서비스 계층을 범용에서 중요 비즈니스용으로, 또는 그 반대로 변경하는 것과 같은 동기 단계입니다. 이 작업의 기간은 총 데이터베이스 크기 및 현재 데이터베이스 작업(활성 트랜잭션 수)에 비례합니다. 인스턴스를 업데이트할 경우 데이터베이스 작업은 총 기간이 크게 달라질 수 있습니다. <br/>**이러한 작업의 90%는 220GB/시 이상으로 실행됩니다**.

다음 표에는 작업 범주에 따른 작업 및 일반적인 전체 기간이 요약되어 있습니다.

**범주: 배포**

|작업(Operation)  |장기 실행 세그먼트  |예상 소요 시간  |
|---------|---------|---------|
|빈 서브넷의 첫 번째 인스턴스|가상 클러스터 만들기|작업의 90%가 4시간 후에 완료됩니다.|
|비어 있지 않은 서브넷에 있는 다른 하드웨어 세대의 첫 번째 인스턴스(예: Gen 4개 인스턴스가 있는 서브넷의 첫 번째 Gen 5 인스턴스)|가상 클러스터 만들기<sup>1</sup>|작업의 90%가 4시간 후에 완료됩니다.|
|비어 있지 않은 서브넷 내의 후속 인스턴스 만들기(두 번째, 세 번째 등의 인스턴스)|가상 클러스터 크기 조정|작업의 90%가 2.5시간 후에 완료됩니다.|
| | | 

<sup>1</sup> 가상 클러스터는 하드웨어 세대별로 빌드됩니다.

**범주: 업데이트**

|작업(Operation)  |장기 실행 세그먼트  |예상 소요 시간  |
|---------|---------|---------|
|인스턴스 속성 변경(관리자 암호, Azure AD 로그인, Azure 하이브리드 혜택 플래그)|해당 없음|최대 1분|
|인스턴스 스토리지 확장/축소(범용 서비스 계층)|장기 실행 세그먼트<sup>1</sup> 없음|작업의 99%가 5분 안에 완료됩니다.|
|인스턴스 스토리지 확장/축소(중요 비즈니스용 서비스 계층)|- 가상 클러스터 크기 조정<br>- Always On 가용성 그룹 마법사|작업의 90%가 2.5시간+모든 데이터베이스를 시딩하는 시간(220GB/시) 후에 완료됩니다.|
|인스턴스 컴퓨팅(vCore) 확장 및 축소(범용)|- 가상 클러스터 크기 조정<br>- 데이터베이스 파일 연결|작업의 90%가 2.5시간 후에 완료됩니다.|
|인스턴스 컴퓨팅(vCore) 확장 및 축소(중요 비즈니스용)|- 가상 클러스터 크기 조정<br>- Always On 가용성 그룹 마법사|작업의 90%가 2.5시간+모든 데이터베이스를 시딩하는 시간(220GB/시) 후에 완료됩니다.|
|인스턴스 서비스 계층 변경(범용에서 중요 비즈니스용으로 및 그 반대로)|- 가상 클러스터 크기 조정<br>- Always On 가용성 그룹 마법사|작업의 90%가 2.5시간+모든 데이터베이스를 시딩하는 시간(220GB/시) 후에 완료됩니다.|
| | | 

<sup>1</sup> 범용 관리형 인스턴스 스토리지 크기를 조정하면 작업 종료 시 장애 조치(failover)가 발생하지 않습니다. 이 경우 작업은 메타데이터 업데이트와 제출된 요청에 대한 응답 전파로 구성됩니다.

**범주: 삭제**

|작업(Operation)  |장기 실행 세그먼트  |예상 소요 시간  |
|---------|---------|---------|
|인스턴스 삭제|모든 데이터베이스에 대한 비상 로그 백업|90%의 작업이 최대 1분 안에 완료됩니다.<br>참고: 서브넷의 마지막 인스턴스가 삭제된 경우 이 작업은 가상 클러스터 삭제를 12시간 후로 예약합니다.<sup>1</sup>|
|가상 클러스터 삭제(사용자 시작 작업)|가상 클러스터 삭제|작업의 90%가 최대 1.5시간 후에 완료됩니다.|
| | | 

<sup>1</sup>현재 구성은 12시간이지만 나중에 변경될 수 있습니다. 그 전에 가상 클러스터를 삭제해야 하는 경우(예를 들어 서브넷을 해제하기 위해) [관리형 인스턴스를 삭제한 후 서브넷 삭제](virtual-cluster-delete.md)를 참조하세요.

## <a name="instance-availability"></a>인스턴스 가용성

업데이트를 마칠 때 발생하는 장애 조치(failover)로 인한 짧은 가동 중지 시간을 제외하고 **업데이트 작업 중에 SQL Managed Instance를 사용** 할 수 있습니다. 일반적으로 [가속 데이터베이스 복구](../accelerated-database-recovery.md) 덕분에 중단된 장기 실행 트랜잭션이 발생하는 경우에도 최대 10초 정도 지속됩니다.

> [!NOTE]
> 범용 관리형 인스턴스 스토리지 크기를 조정하면 업데이트 종료 시 장애 조치(failover)가 발생하지 않습니다.

SQL Managed Instance는 배포 및 삭제 작업 중에 클라이언트 애플리케이션에서 사용할 수 없습니다.

> [!IMPORTANT]
> Azure SQL Managed Instance의 컴퓨팅 또는 스토리지 크기를 조정하거나 장기 실행 트랜잭션(데이터 가져오기, 데이터 처리 작업, 인덱스 다시 작성 등)과 동시에 서비스 계층을 변경하는 것은 권장되지 않습니다. 작업이 끝날 때 데이터베이스 장애 조치(failover)가 발생하면 진행 중인 모든 트랜잭션이 취소됩니다. 

## <a name="management-operations-steps"></a>관리 작업 단계

관리 작업은 여러 단계로 구성됩니다. [작업 API가 도입](management-operations-monitor.md)되면서 작업(배포 및 업데이트)의 하위 집합에 대해 이러한 단계가 공개됩니다. 배포 작업은 3단계로 구성되고 업데이트 작업은 6단계로 수행됩니다. 작업 기간에 대한 자세한 내용은 [관리 작업 기간](#duration) 섹션을 참조하세요. 단계는 실행 순서대로 나열됩니다.

### <a name="managed-instance-deployment-steps"></a>관리형 인스턴스 배포 단계

|단계 이름  |단계 설명  |
|----|---------|
|요청 유효성 검사 |제출된 매개 변수의 유효성이 검사됩니다. 구성이 잘못된 경우 오류와 함께 작업이 실패합니다. |
|가상 클러스터 크기 조정/만들기 |서브넷의 상태에 따라 가상 클러스터가 만들어지거나 크기가 조정됩니다. |
|새 SQL 인스턴스 시작 |배포된 가상 클러스터에서 SQL 프로세스가 시작됩니다. |

### <a name="managed-instance-update-steps"></a>관리형 인스턴스 업데이트 단계

|단계 이름  |단계 설명  |
|----|---------|
|요청 유효성 검사 | 제출된 매개 변수의 유효성이 검사됩니다. 구성이 잘못된 경우 오류와 함께 작업이 실패합니다. |
|가상 클러스터 크기 조정/만들기 |서브넷의 상태에 따라 가상 클러스터가 만들어지거나 크기가 조정됩니다. |
|새 SQL 인스턴스 시작 | 배포된 가상 클러스터에서 SQL 프로세스가 시작됩니다. |
|데이터베이스 파일 시딩/데이터베이스 파일 연결 |업데이트 작업의 유형에 따라 데이터베이스 시딩 또는 데이터베이스 파일 연결이 수행됩니다. |
|장애 조치(failover) 준비 및 장애 조치(failover) |데이터를 시딩하거나 데이터베이스 파일을 다시 연결한 후에는 시스템이 장애 조치(failover)를 준비합니다. 모든 준비가 완료되면 장애 조치(failover)가 수행되고 **짧은 가동 중지 시간** 이 발생합니다. |
|오래된 SQL 인스턴스 정리 |가상 클러스터에서 오래된 SQL 프로세스 제거 |

> [!NOTE]
> 인스턴스 스케일링이 완료되면 기본 가상 클러스터는 사용하지 않는 용량 및 가능한 용량 조각 모음을 해제하는 프로세스를 진행하며, 이 프로세스는 스케일링 작업에 참여하지 않은 동일한 서브넷의 인스턴스에 영향을 미쳐 장애 조치(failover)를 초래할 수 있습니다. 


## <a name="management-operations-cross-impact"></a>관리 작업 상호 영향

관리형 인스턴스에 대한 관리 작업은 동일한 가상 클러스터 내에 배치된 인스턴스의 다른 관리 작업에 영향을 줄 수 있습니다.

- 가상 클러스터의 **장기 실행 복원 작업** 은 동일한 서브넷의 다른 인스턴스 만들기 또는 스케일링 작업을 보류합니다.<br/>**예:** 장기 실행 복원 작업이 있고 동일한 서브넷에 만들기 또는 스케일링 요청이 있는 경우 이 요청은 복원 작업이 완료될 때까지 기다리므로 완료하는 데 시간이 더 오래 걸립니다.

- **후속 인스턴스 만들기 또는 스케일링** 작업은 이전에 시작된 인스턴스 만들기 또는 가상 클러스터 크기 조정을 시작한 인스턴스 스케일링에 의해 보류됩니다.<br/>**예:** 동일한 가상 클러스터의 동일한 서브넷에 여러 개의 만들기 및/또는 스케일링 요청이 있고 그 중 하나가 가상 클러스터 크기 조정을 시작하면 초기 작업 요청이 있은 후 5분 이후에 제출된 모든 요청은 크기 조정이 완료될 때까지 대기해야 하므로 예상보다 더 오래 걸립니다.

- **5분 후에 제출된 만들기/스케일링 작업** 은 일괄 처리되고 동시에 실행됩니다.<br/>**예:** 5분 후에 제출된 모든 작업에 대해 하나의 가상 클러스터 크기 조정만 수행됩니다(첫 번째 작업 요청을 실행하는 순간부터 측정). 첫 번째 요청을 제출하고 5분 이후에 다른 요청을 제출한 경우 가상 클러스터 크기 조정이 완료될 때까지 기다렸다가 실행이 시작됩니다.

> [!IMPORTANT]
> 진행 중인 다른 작업 때문에 보류된 관리 작업은 계속할 수 있는 조건이 충족되면 자동으로 다시 시작됩니다. 일시 중지된 관리 작업을 다시 시작하는 데 필요한 사용자 작업은 없습니다.

## <a name="monitoring-management-operations"></a>관리 작업 모니터링

관리 작업 진행률 및 상태를 모니터링하는 방법에 대한 자세한 내용은 [관리 작업 모니터링](management-operations-monitor.md)을 참조하세요.

## <a name="canceling-management-operations"></a>관리 작업 취소

관리 작업을 취소하는 방법에 대한 자세한 내용은 [관리 작업 취소](management-operations-cancel.md)를 참조하세요.


## <a name="next-steps"></a>다음 단계

- 첫 번째 Managed Instance를 만드는 방법을 알아보려면 [빠른 시작 가이드](instance-create-quickstart.md)를 참조하세요.
- 기능 및 비교 목록은 [SQL 일반 기능](../database/features-comparison.md)을 참조하세요.
- VNet 구성에 대한 자세한 내용은 [SQL Managed Instance VNet 구성](connectivity-architecture-overview.md)을 참조하세요.
- 백업 파일에서 관리형 인스턴스를 만들고 데이터베이스를 복원하는 방법에 대한 빠른 시작은 [관리형 인스턴스 만들기](instance-create-quickstart.md)를 참조하세요.
- Azure Database Migration Service를 사용하여 마이그레이션하는 방법에 대한 자습서는 [Database Migration Service를 사용한 SQL Managed Instance 마이그레이션](../../dms/tutorial-sql-server-to-managed-instance.md)을 참조하세요.
