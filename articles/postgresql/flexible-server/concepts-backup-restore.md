---
title: Azure Database for PostgreSQL - 유연한 서버의 백업 및 복원
description: Azure Database for PostgreSQL - 유연한 서버를 사용한 백업 및 복원의 개념에 대해 알아봅니다.
author: sr-msft
ms.author: srranga
ms.service: postgresql
ms.topic: conceptual
ms.date: 11/30/2021
ms.openlocfilehash: 1b9bad2dc1e708e043962b77c19c9fb7f7677e27
ms.sourcegitcommit: 93c7420c00141af83ed3294923b4826dd4dc6ff2
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 12/02/2021
ms.locfileid: "133434865"
---
# <a name="backup-and-restore-in-azure-database-for-postgresql---flexible-server"></a>Azure Database for PostgreSQL - 유연한 서버의 백업 및 복원



백업은 비즈니스 연속성 전략의 필수적인 부분을 형성하고, 실수로 손상 또는 삭제되지 않도록 데이터를 보호합니다. Azure Database for PostgreSQL - 유연한 서버는 서버의 정기적인 백업을 자동으로 수행합니다.  그런 다음 보존 기간 내에 특정 시점 복구를 수행할 수 있습니다. 여기서 복원할 날짜와 시간을 지정할 수 있습니다. 복원 및 복구의 전체 시간은 일반적으로 데이터의 크기와 수행할 복구 양에 따라 달라집니다. 

## <a name="backup-overview"></a>Backup 개요

유연한 서버는 데이터 파일의 스냅샷 백업을 가져와 [영역에](overview.md#azure-regions)따라 영역 중복 스토리지 또는 로컬 중복 스토리지에 안전하게 저장합니다. 또한 서버는 WAL 파일을 보관할 준비가 된 경우 및 로 트랜잭션 로그 백업을 수행합니다. 이러한 백업을 사용하면 서버를 구성된 백업 보존 기간 내의 특정 시점으로 복원할 수 있습니다. 기본 백업 보존 기간은 7일이며 최대 35일까지 저장할 수 있습니다. 모든 백업은 저장된 미사용 데이터에 대한 AES 256비트 암호화를 사용하여 암호화됩니다.

이러한 백업 파일을 내보내거나 Azure Database for PostgreSQL - 유연한 서버 외부에서 서버를 만드는 데 사용할 수 없습니다. 이를 위해 PostgreSQL 도구 pg_dump 및 pg_restore/psql을 사용할 수 있습니다.

## <a name="backup-frequency"></a>Backup 주기

유연한 서버의 백업은 스냅샷 기반입니다. 첫 번째 스냅샷 백업은 서버를 만든 직후에 예약됩니다. 스냅샷 백업은 현재 매일 한 번 수행됩니다. 트랜잭션 로그 백업은 워크로드 및 WAL 파일이 보관되도록 채워지는 시기에 따라 다양한 빈도로 발생합니다. 일반적으로 지연(RPO)은 최대 15분이 될 수 있습니다.

## <a name="backup-redundancy-options"></a>백업 중복 옵션

Azure Database for PostgreSQL 백업 복사본을 여러 개 저장하여 일시적인 하드웨어 오류, 네트워크 또는 정전, 대규모 자연 재해 등 계획되거나 계획되지 않은 이벤트로부터 데이터를 보호합니다. Azure Database for PostgreSQL 지역 내의 로컬 백업 복사본 또는 지역 중복 백업(미리 보기) 중에서 유연하게 선택할 수 있습니다. 기본적으로 Azure Database for PostgreSQL 서버 백업은 지역에서 사용할 수 있는 경우 영역 중복 스토리지를 사용합니다. 그렇지 않은 경우 로컬 중복 스토리지를 사용합니다. 또한 고객은 서버를 만들 때 재해 복구를 위해 미리 보기 상태인 지역 중복 백업을 선택할 수 있습니다. 지역 중복 백업이 지원되는 지역 목록을 참조합니다. 

백업 중복성은 오류가 발생하더라도 데이터베이스가 가용성 및 내구성 목표를 충족하도록 보장하고 Azure Database for PostgreSQL 사용자에게 세 가지 옵션을 확장합니다. 

- **영역 중복 백업 스토리지:** 가용성 영역을 지원하는 지역에 대해 자동으로 선택됩니다. 백업이 영역 중복 백업 스토리지에 저장되면 서버가 호스트되는 가용성 영역 내에 여러 복사본이 저장될 뿐만 아니라 동일한 지역의 다른 가용성 영역으로 복제됩니다. 이 옵션은 고가용성이 필요한 시나리오 또는 데이터 상주 요구 사항을 충족하기 위해 국가/지역 내에서 데이터 복제를 제한하는 시나리오에 활용할 수 있습니다. 또한 지정된 1년 동안 99.99999999999%(12개의 9) 이상의 Backups 개체 내구성을 제공합니다.  

- **로컬 중복 백업 스토리지:** 아직 가용성 영역을 지원하지 않는 지역에 대해 자동으로 선택됩니다. 백업이 로컬 중복 백업 스토리지에 저장되면 여러 백업 복사본이 동일한 데이터 센터에 저장됩니다. 이 옵션은 서버 랙 및 드라이브 오류로부터 데이터를 보호합니다. 또한 지정된 1년 동안 99.9999999999%(11개의 9개) 이상의 Backups 개체 내구성을 제공합니다. 기본적으로 HA(동일 영역 고가용성) 또는 고가용성 구성이 없는 서버에 대한 백업 스토리지는 로컬 중복으로 설정됩니다. 

- **지역 중복 백업 스토리지(미리 보기)** : 서버를 만들 때 이 옵션을 선택할 수 있습니다. 백업이 지역 중복 백업 스토리지에 저장되는 경우 서버가 호스트되는 지역 내에 저장된 데이터의 복사본 3개 외에 지역 쌍을 이루는 지역에도 복제됩니다. 이렇게 하면 재해 발생 시 다른 지역에서 서버를 복원하는 데 더 효율적인 보호와 기능을 제공합니다. 또한 이 기능은 지정된 1년 동안 Backups 개체의 최소 99.999999999999999%(16개의 9) 내구성을 제공합니다. 서버 생성 시 Geo-Redundancy 옵션을 사용하도록 설정하여 지역 중복 백업 스토리지를 보장할 수 있습니다. 지역 중복은 Azure 쌍을 이루는 지역 에서 호스트되는 서버에 대해 [지원됩니다.](../../availability-zones/cross-region-replication-azure.md) 

> [!NOTE]
> 지역 중복 백업 옵션은 서버 생성 시에만 구성할 수 있습니다.

## <a name="moving-from-other-backup-storage-options-to-geo-redundant-backup-storage"></a>다른 백업 스토리지 옵션에서 지역 중복 백업 스토리지로 이동 

백업을 위한 지역 중복 스토리지 구성은 서버 생성 중에만 허용됩니다. 서버가 프로비전되면 백업 스토리지 중복 옵션을 변경할 수 없습니다.  

### <a name="backup-retention"></a>백업 보존

백업은 서버의 백업 보존 기간 설정에 따라 보존됩니다. 7~35일 사이의 보존 기간을 선택할 수 있습니다. 기본 보존 기간은 7일입니다. 서버를 만드는 동안 보존 기간을 설정하거나 나중에 변경할 수 있습니다. 백업은 중지된 서버의 경우에도 보존됩니다.

백업 보존 기간은 사용 가능한 백업을 기반으로 하여 시점 복원을 검색할 수 있는 이전 시간을 제어합니다. 백업 보존 기간은 복원 관점에서 복구 기간으로 취급될 수도 있습니다. 백업 보존 기간 내에 특정 시점 복원을 하기 위해 필요한 모든 백업이 백업 스토리지에 보존됩니다. 예를 들어 백업 보존 기간이 7일로 설정되었으면 복구 기간이 최근 7일로 간주됩니다. 이 시나리오에서는 지난 7일 동안 서버를 복원 및 복구하는 데 필요한 모든 데이터 및 로그가 보존됩니다. 

### <a name="backup-storage-cost"></a>백업 스토리지 비용

유연한 서버는 추가 비용 없이 최대 100%의 프로비저닝된 서버 스토리지를 백업 스토리지로 제공합니다. 사용되는 모든 추가 백업 스토리지는 매월 GB 단위로 청구됩니다. 예를 들어 250GiB의 스토리지를 제공하는 서버를 프로비저닝한 경우 추가 비용 없이 250GiB의 백업 스토리지 용량을 사용할 수 있습니다. 매일 백업 사용량이 25GiB이면 최대 10일 동안 체험용 백업 스토리지를 사용할 수 있습니다. 250GiB을 초과하는 백업 스토리지 사용에는 [가격 책정 모델](https://azure.microsoft.com/pricing/details/postgresql/flexible-server/)에 따라 요금이 청구됩니다.

지역 중복 백업을 사용하여 서버를 구성한 경우 백업 데이터도 Azure 쌍을 이루는 지역에 복사됩니다. 따라서 백업 크기는 로컬 백업 복사본의 두 배입니다. 청구는 ( (2 x 로컬 백업 크기) - 프로비전된 스토리지 크기 ) x Price @ GB/월로 계산됩니다. 

Azure Portal에서 [사용되는 백업 스토리지](../concepts-monitoring.md) 메트릭을 사용하여 서버에서 사용하는 백업 스토리지를 모니터링할 수 있습니다. 사용된 백업 스토리지 메트릭은 서버에 대해 설정된 백업 보존 기간에 따라 유지되는 모든 데이터베이스 백업 및 로그 백업에서 사용하는 스토리지의 합계를 나타냅니다. 

>[!Note]
> 데이터베이스 크기에 관계없이 서버의 트랜잭션 작업량이 많을수록 WAL 파일이 더 많이 생성되어 백업 스토리지가 증가합니다.

백업 스토리지 비용을 제어하기 위한 기본 방법은 적합한 백업 보존 기간을 설정하고 원하는 복구 목표에 맞게 올바른 백업 중복성 옵션을 선택하는 것입니다.

## <a name="point-in-time-restore-overview"></a>특정 시점 복원 개요

유연한 서버에서 지정 시간 복원을 수행하면 원본 서버와 동일한 지역에 새 서버가 생성되지만 가용성 영역을 선택할 수 있습니다. 이 경우 가격 책정 계층, 컴퓨팅 세대, vCore 수, 스토리지 크기, 백업 보존 기간 및 백업 중복 옵션에 대한 원본 서버의 구성으로 만들어집니다. 또한 VNET 및 방화벽 설정과 같은 태그와 설정은 원본 서버에서 상속됩니다.

 ### <a name="point-in-time-restore-process"></a>시점 복원 프로세스

물리적 데이터베이스 파일은 먼저 스냅샷 백업에서 서버의 데이터 위치로 복원됩니다. 원하는 시점보다 이전에 수행된 적절한 백업이 자동으로 선택되고 복원됩니다. 그런 다음 데이터베이스를 일관된 상태로 만들기 위해 WAL 파일을 사용하여 복구 프로세스가 시작됩니다. 

 예를 들어 매일 밤 오후 11시에 백업이 수행된다고 가정해 보겠습니다. 복원 지점이 2020년 8월 15일 오전 10시인 경우 2020년 8월 14일 매일 백업이 복원됩니다. 데이터베이스는 8월 24일 오후 11시부터 8월 25일 오전 10시까지 트랜잭션 로그 백업을 사용하여 2020년 8월 25일 오전 10시까지 복구됩니다. 

 데이터베이스 서버를 복원하려면 [다음 단계](./how-to-restore-server-portal.md)를 참조하세요.

> [!IMPORTANT]
> 유연한 서버의 복원 작업은 항상 제공한 이름으로 새 데이터베이스 서버를 만들고 기존 데이터베이스 서버를 덮어쓰지 않습니다.

특정 시점 복원은 여러 시나리오에서 유용합니다. 예를 들어 사용자가 실수로 데이터를 삭제하거나 중요한 테이블 또는 데이터베이스를 삭제하는 경우, 또는 애플리케이션의 결함으로 인해 우연히 적절한 데이터를 잘못된 데이터로 덮어쓰는 경우가 있습니다. 트랜잭션 로그의 연속 백업으로 인해 마지막 트랜잭션으로 복원할 수 있습니다.

최신 복원 지점과 사용자 지정 복원 지점 중에서 선택할 수 있습니다.

-   **최신 복원 지점(현재)** : 서버를 최신 시점으로 복원할 수 있도록 하는 기본 옵션입니다. 

-   **사용자 지정 복원 지점**:이 옵션을 사용하면 유연한 서버에 대해 정의된 보존 기간 내의 시점을 선택할 수 있습니다. 기본적으로 UTC의 최근 시간이 자동으로 선택되며, 이는 테스트 목적으로 마지막으로 커밋된 트랜잭션으로 복원하려는 경우에 유용합니다. 필요에 따라 다른 날짜와 시간을 선택할 수 있습니다. 

복구 예상 시간은 이전 백업 시간을 처리할 트랜잭션 로그의 양과 동시에 동일한 지역에서 복구되는 데이터베이스의 총 수를 비롯한 여러 요인에 따라 달라집니다. 일반적으로 전체 복구 시간은 몇 분에서 몇 시간까지 소요됩니다.

VNET 내에서 서버를 구성한 경우 동일한 VNET 또는 다른 VNET으로 복원할 수 있습니다. 그러나 공용 액세스로 복원할 수는 없습니다. 마찬가지로 공용 액세스 권한으로 서버를 구성한 경우 프라이빗 VNET 액세스로 복원할 수 없습니다.

> [!IMPORTANT]
> 삭제된 서버는 사용자가 복원할 **수 없습니다.** 서버를 삭제하면 해당 서버에 속한 모든 데이터베이스도 삭제되고 복구할 수 없습니다. 배포 후에 실수로 인한 삭제 또는 예기치 않은 변경에서 서버 리소스를 보호하려면 관리자는 [관리 잠금](../../azure-resource-manager/management/lock-resources.md)을 활용할 수 있습니다. 서버를 실수로 삭제 한 경우 지원에 문의 하세요. 경우에 따라 데이터 손실 없이 서버를 복원할 수 있습니다.

## <a name="geo-restore-preview-process"></a>지역 복원 (미리 보기) 프로세스

지역 중복 백업을 사용 하 여 서버를 구성한 경우 지역 쌍으로 연결 된 [지역](../../availability-zones/cross-region-replication-azure.md)으로 복원할 수 있습니다. 지역 중복 백업 지원 [지역](overview.md#azure-regions)을 참조 하세요.

서버가 지역 중복 백업을 사용 하 여 구성 된 경우 백업 데이터는 저장소 복제를 사용 하 여 쌍으로 연결 된 지역에 복사 됩니다. 여기에는 데이터 백업 및 트랜잭션 로그의 복사도 포함 됩니다. 서버를 만든 후에는 최소 1 시간 동안 기다렸다가 지역 복원을 시작 합니다. 이렇게 하면 첫 번째 백업 데이터 집합을 쌍으로 연결 된 지역으로 복제할 수 있습니다. 이후에 트랜잭션 로그와 매일 백업을 쌍으로 연결 된 지역에 비동기적으로 복사 하 고 데이터 전송 지연 시간이 최대 1 시간까지 걸릴 수 있습니다. 따라서 복원할 때 RPO를 최대 1 시간까지 예측할 수 있습니다. 쌍을 이루는 지역에서 사용할 수 있는 마지막 백업 데이터만 복원할 수 있습니다. 현재 지역 백업에 대 한 지정 시간 복원은 사용할 수 없습니다.

서버를 복구 하는 데 예상 되는 예상 시간은 데이터베이스 크기, 마지막 데이터베이스 백업 시간 및 마지막으로 받은 백업 데이터까지 처리할 WAL 크기를 포함 하는 요인에 따라 달라 집니다. 일반적으로 전체 복구 시간은 몇 분에서 몇 시간까지 소요됩니다.

지역 복원 중에 변경할 수 있는 서버 구성에는 VNET 설정 및 복원 된 서버에서 지역 중복 백업을 제거 하는 기능이 포함 됩니다.  지역에서 복원 하는 동안 계산, 저장소 또는 가격 책정 계층 (분산이 안정적인, 일반 용도 또는 메모리 액세스에 최적화 됨)과 같은 기타 서버 구성 변경은 지원 되지 않습니다.

> [!IMPORTANT]
> 주 지역이 다운 된 경우 주 지역에서 저장소를 프로 비전 할 수 없기 때문에 해당 지역 쌍 지역에서 지역 중복 서버를 만들 수 없습니다. 지리적으로 쌍을 이루는 지역에서 지역 중복 서버를 프로 비전 하기 위해 주 지역이 준비 될 때까지 기다려야 합니다. 주 지역이 다운 되 면 복원 포털 환경의 계산 + Storage 서버 설정 구성에서 지역 중복 옵션을 사용 하지 않도록 설정 하 고, 비즈니스 연속성을 보장 하기 위해 로컬 중복 서버로 복원 하 여 지역에서 쌍으로 연결 된 지역으로 원본 서버를 지역 복원할 수 있습니다.  

## <a name="restore-and-networking"></a>복원 및 네트워킹

### <a name="point-in-time-restore"></a>지정 시간 복원

- 원본 서버가 **공용 액세스** 네트워크를 사용 하 여 구성 된 경우에는 **공용 액세스** 로만 복원할 수 있습니다. 
- 원본 서버가 **개인 액세스** vnet을 사용 하 여 구성 된 경우 동일한 vnet에서 또는 다른 vnet으로 복원할 수 있습니다. 공용 및 개인 액세스에서 특정 시점 복원을 수행할 수 없습니다.

### <a name="geo-restore"></a>지역 복원

- 원본 서버가 **공용 액세스** 네트워크를 사용 하 여 구성 된 경우에는 **공용 액세스** 로만 복원할 수 있습니다. 또한 복원 작업이 완료 된 후에는 방화벽 규칙을 적용 해야 합니다. 
- 원본 서버가 **개인 액세스** vnet을 사용 하 여 구성 된 경우에는 다른 vnet에만 복원할 수 있으므로 vnet은 지역에 걸쳐 있을 수 없습니다. 공용 및 개인 액세스에서 지역 복원을 수행할 수 없습니다.

## <a name="perform-post-restore-tasks"></a>복원 후 작업 수행

데이터베이스가 복원된 후 다음 작업을 수행하여 사용자와 애플리케이션 백업을 다시 실행되도록 해야 합니다.

-   새 서버가 원래 서버를 교체하기 위한 것이라면 클라이언트와 클라이언트 애플리케이션을 새 서버로 리디렉션합니다. 새 복원 된 서버를 가리키도록 연결 문자열의 서버 이름을 변경 합니다.

-   사용자가 연결할 수 있도록 적절한 서버 수준 방화벽 및 VNet 규칙이 있는지 확인합니다. 이러한 규칙은 원래 서버에서 복사되지 않습니다.
  
-   복원된 서버의 컴퓨팅을 필요에 따라 스케일 업/다운할 수 있습니다.

-   적절한 로그인 및 데이터베이스 수준 권한이 있는지 확인합니다.

-   필요에 따라 경고를 구성합니다.
  
-  고가용성으로 구성된 데이터베이스를 복원한 경우 및 복원된 서버를 고가용성으로 구성하려는 경우 다음 [단계](./how-to-manage-high-availability-portal.md)를 수행할 수 있습니다.

## <a name="frequently-asked-questions"></a>자주 묻는 질문

### <a name="backup-related-questions"></a>백업 관련 질문

* **Azure는 내 서버의 백업을 어떻게 처리하나요?**
 
    기본적으로 Azure Database for PostgreSQL은 기본 7일 보존 기간으로 전체 서버(생성된 모든 데이터베이스 포함)의 자동화된 백업을 사용하도록 설정합니다. 데이터베이스의 매일 증분 스냅샷이 수행됩니다. 로그(WAL) 파일은 Azure BLOB에 지속적으로 보관됩니다.

* **이 자동 백업을 장기간 보관하도록 구성할 수 있나요?**
  
    아니요. 현재 최대 35일의 보존만 지원합니다. 수동 백업을 수행하고 장기 보존 요구 사항에 사용할 수 있습니다.

* **Postgres 서버를 수동으로 백업하려면 어떻게 해야 하나요?**
  
    [여기](https://www.postgresql.org/docs/current/app-pgdump.html)에 설명된 대로 PostgreSQL 도구 pg_dump를 사용하여 수동으로 백업할 수 있습니다. 예를 들어 백업에도 사용할 수 있는 이 [업그레이드/마이그레이션 문서](../howto-migrate-using-dump-and-restore.md)를 참조할 수 있습니다. Azure Database for PostgreSQL을 Blob Storage에 백업하려면 기술 커뮤니티 블로그 [Blob Storage에 Azure Database for PostgreSQL 백업](https://techcommunity.microsoft.com/t5/azure-database-for-postgresql/backup-azure-database-for-postgresql-to-a-blob-storage/ba-p/803343)을 참조하세요. 

* **내 서버의 백업 기간은 어떻게 되나요? 사용자 지정할 수 있나요?**
  
    백업 기간은 기본적으로 Azure에서 관리하며 사용자 지정할 수 없습니다. 첫 번째 전체 스냅샷 백업은 서버를 만든 직후에 예약됩니다. 후속 스냅샷 백업은 하루에 한 번 발생하는 증분 백업입니다.

* **내 백업이 암호화되나요?**
  
    예. 쿼리 실행 중에 생성된 모든 Azure Database for PostgreSQL 데이터, 백업 및 임시 파일은 AES 256비트 암호화를 사용하여 암호화됩니다. 스토리지 암호화는 항상 켜져 있고 해제할 수 없습니다. 

* **서버에서 단일/몇 개의 데이터베이스를 복원할 수 있나요?**
  
    단일/몇 개의 데이터베이스 또는 테이블 복원은 직접 지원되지 않습니다. 그러나 전체 서버를 새 서버로 복원한 다음 필요한 테이블 또는 데이터베이스를 추출하고 서버로 가져와야 합니다.

* **백업이 진행되는 동안 내 서버를 사용할 수 있나요?**
    예. 백업은 스냅샷을 사용하는 온라인 작업입니다. 스냅샷 작업은 몇 초밖에 걸리지 않으며 프로덕션 워크로드를 방해하지 않아 서버의 고가용성을 보장합니다. 

* **서버의 유지 관리 기간을 설정할 때 백업 기간을 고려해야 하나요?**
  
    아니요. 백업은 관리형 서비스의 일부로 내부적으로 트리거되며 관리형 유지 관리 기간과 관련이 없습니다.

* **자동 백업은 어디에 저장되며 보존은 어떻게 관리하나요?**
  
    Azure Database for PostgreSQL은 자동으로 서버 백업을 만들고 여러 영역이 지원되는 지역의 영역 중복 스토리지 또는 아직 여러 영역을 지원하지 않는 지역의 로컬 중복 스토리지에 자동으로 저장합니다. 이러한 백업 파일은 내보낼 수 없습니다. 백업을 사용하여 특정 시점으로만 서버를 복원할 수 있습니다. 기본 백업 보존 기간은 7일입니다. 선택적으로 백업 보존을 최대 35일까지 구성할 수 있습니다. 지역 중복 백업을 사용 하 여 구성한 경우에는 쌍을 이루는 지역에도 백업이 복사 됩니다.

* **지역 중복 백업을 사용 하 여 쌍을 이루는 지역에 백업을 복사 하는 빈도**  

    서버가 지역 중복 백업을 사용 하 여 구성 된 경우 백업 데이터는 쌍을 이루는 지역으로 데이터를 복사 하는 지역 중복 저장소 계정에 저장 됩니다. 주 서버에서 매일 백업을 수행 하는 경우 데이터 파일이 쌍을 이루는 지역에 복사 됩니다. WAL 파일은로 백업 되며, WAL 파일을 보관할 준비가 되었을 때입니다. 이러한 백업 데이터는 쌍을 이루는 지역에 지속적으로 연속 해 서 복사 됩니다. 백업 데이터를 수신 하는 데 최대 1 시간까지 지연 될 수 있습니다.

* **원격 지역에서 PITR 할 수 있나요?**
  
    아니요. 데이터는 원격 지역에서 사용 가능한 마지막 백업 데이터로 복구 됩니다.

* **HA 지원 서버에서 백업은 어떻게 수행되나요?**
  
    유연한 서버의 데이터 볼륨은 기본 서버의 관리 디스크 증분 스냅샷을 사용하여 백업됩니다. WAL 백업은 주 서버 또는 대기 서버에서 수행됩니다.

* **내 서버에서 백업이 수행되는지 확인하려면 어떻게 해야 하나요?**

    유효한 백업의 가용성을 검증하는 가장 좋은 방법은 주기적인 특정 시점 복원을 수행하고 백업이 유효하고 복원 가능한지 확인하는 것입니다. 백업 작업이나 파일은 최종 사용자에게 노출되지 않습니다.

* **백업 사용량은 어디에서 확인할 수 있나요?**
  
    Azure Portal의 모니터링에서 메트릭을 클릭하면 총 백업 사용량을 모니터링할 수 있는 “백업 사용량 메트릭”을 찾을 수 있습니다.

* **서버를 삭제하면 백업은 어떻게 되나요?**
  
    서버를 삭제하면 해당 서버에 속한 모든 백업도 삭제되고 복구할 수 없습니다. 배포 후에 실수로 인한 삭제 또는 예기치 않은 변경에서 서버 리소스를 보호하려면 관리자는 관리 잠금을 활용할 수 있습니다.

* **중지된 서버의 백업은 어떻게 보존되나요?**

    중지된 서버에 대해 새 백업은 수행되지 않습니다. 서버를 중지할 때의 모든 이전 백업(보존 기간 내)은 활성 서버에 대한 백업 보존이 백업 보존 기간에 의해 관리되는 이후 서버가 다시 시작될 때까지 보존됩니다.

* **백업 비용은 어떻게 청구되나요?**
  
    유연한 서버는 추가 비용 없이 최대 100%의 프로비저닝된 서버 스토리지를 백업 스토리지로 제공합니다. 사용되는 추가 백업 스토리지는 가격 책정 모델에 따라 매월 GB 단위로 청구됩니다. 백업 스토리지 청구는 또한 선택한 백업 보존 기간과 직접 사용되는 총 백업 스토리지에 영향을 미치는 서버의 트랜잭션 작업과는 별도로 선택된 백업 중복성 옵션에 의해 결정됩니다.

* **중지된 서버에 대한 요금은 어떻게 청구되나요?**
  
    서버 인스턴스가 중지된 동안에는 새 백업이 수행되지 않습니다. 프로비저닝된 스토리지 및 백업 스토리지(지정된 보존 기간 내에 저장된 백업)에 대해 요금이 부과됩니다. 무료 백업 스토리지는 프로비저닝된 데이터베이스의 크기로 제한되며 초과 백업 데이터는 백업 가격을 사용하여 청구됩니다.

* **영역 중복 고가용성으로 서버를 구성했습니다. 두 번 백업을 하면 두 번 청구되나요?**
  
    아니요. HA 또는 비HA 서버에 관계없이 백업 복사본 세트는 하나만 유지되며 요금은 한 번만 부과됩니다.

### <a name="restore-related-questions"></a>복원 관련 질문

* **서버를 복원하려면 어떻게 해야 하나요?**

    Azure는 사용자가 Azure Portal, Azure CLI 및 API를 사용하여 최신 또는 사용자 지정 복원 지점으로 복원할 수 있도록 모든 서버에 대해 특정 시점 복원을 지원합니다. 

    pg_dump와 같은 도구를 사용하여 수동으로 수행한 백업에서 서버를 복원하려면 먼저 유연한 서버를 만들고 [pg_restore](https://www.postgresql.org/docs/current/app-pgrestore.html)를 사용하여 데이터베이스를 서버에 복원할 수 있습니다.

* **동일한 지역 내의 다른 가용성 영역으로 복원할 수 있나요?**
  
    예. 지역이 여러 가용성 영역을 지원하는 경우 백업은 ZRS 계정에 저장되며 다른 영역으로 복원할 수 있습니다. 

* **특정 시점 복원을 수행하는 데 얼마나 걸리나요? 복원에 시간이 오래 걸리는 이유는 무엇인가요?**
  
    스냅샷에서 데이터 복원 작업은 데이터 크기에 따라 달라지지 않으나, 이전 백업 요청 날짜/시간과 처리할 로그 양에 따라 로그(재생할 트랜잭션 작업)를 적용하는 복구 프로세스 타이밍이 달라질 수 있습니다. 이는 동일한 영역 내에서 복원하거나 다른 영역으로 복원하는 데 모두 적용됩니다. 
 
* **HA 지원 서버를 복원하면 복원 서버가 자동으로 고가용성으로 구성되나요?**
  
    아니요. 서버는 단일 인스턴스의 유연한 서버로 복원됩니다. 복원이 완료된 후 선택적으로 고가용성으로 서버를 구성할 수 있습니다.

* **VNET 내에서 서버를 구성했습니다. 다른 VNET으로 복원할 수 있나요?**
  
    예. 복원 시 복원할 다른 VNET을 선택합니다.

* **공용 액세스 서버를 VNET으로 또는 그 반대로 복원할 수 있나요?**

    아니요. 현재 공용 및 프라이빗 액세스를 통한 서버 복원은 지원하지 않습니다.

* **복원 작업을 추적하려면 어떻게 해야 하나요?**
  
    현재 복원 작업을 추적할 방법이 없습니다. 작업이 진행 중인지 또는 완료되었는지 확인하기 위해 활동 로그를 모니터링할 수 있습니다.


## <a name="next-steps"></a>다음 단계

-   [비즈니스 연속성](./concepts-business-continuity.md)에 대한 자세한 정보
-   [영역 중복 고가용성](./concepts-high-availability.md)에 대한 자세한 정보
-   [복원 방법](./how-to-restore-server-portal.md)에 대한 자세한 정보