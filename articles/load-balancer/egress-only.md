---
title: 아웃바운드 전용 부하 분산 장치 구성
titleSuffix: Azure Load Balancer
description: 이 문서에서는 아웃바운드 NAT를 사용하여 내부 부하 분산 장치를 만드는 방법을 알아봅니다.
author: asudbring
ms.custom: seodec18
ms.service: load-balancer
ms.topic: how-to
ms.date: 08/21/2021
ms.author: allensu
ms.openlocfilehash: d2f54b8ea7161f297528ac6ea82fde548827033a
ms.sourcegitcommit: deb5717df5a3c952115e452f206052737366df46
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/23/2021
ms.locfileid: "122681190"
---
# <a name="outbound-only-load-balancer-configuration"></a>아웃바운드 전용 부하 분산 장치 구성

내부 및 외부 표준 부하 분산 장치의 조합을 사용하여 내부 부하 분산 장치 뒤에 있는 VM용 아웃바운드 연결을 만듭니다. 

이 구성은 내부 부하 분산 장치 시나리오용 아웃바운드 NAT를 제공하여 백 엔드 풀에 관한 "송신 전용" 설정을 생성합니다.

> [!NOTE]
> **Azure Virtual Network NAT** 는 프로덕션 배포의 아웃바운드 연결에 권장되는 구성입니다. **Virtual Network NAT** 및 **NAT 게이트웨이** 리소스에 대한 자세한 내용은 **[Azure Virtual Network NAT란?](../virtual-network/nat-gateway/nat-overview.md)** 을 참조하세요.
>
> Azure Virtual Network NAT 및 NAT 게이트웨이를 사용하여 아웃바운드 전용 부하 분산 장치 구성을 배포하려면 [자습서: NAT 게이트웨이를 내부 부하 분산 장치와 통합 - Azure Portal](../virtual-network/nat-gateway/tutorial-nat-gateway-load-balancer-internal-portal.md)을 참조하세요.
>
> Azure 및 기본 아웃바운드 액세스의 아웃바운드 연결에 대한 자세한 내용은 [아웃바운드 연결을 위한 SNAT(Source Network Address Translation)](load-balancer-outbound-connections.md) 및 [기본 아웃바운드 액세스](../virtual-network/default-outbound-access.md)를 참조하세요.

:::image type="content" source="./media/egress-only/load-balancer-egress-only.png" alt-text="그림: 송신 전용 부하 분산 장치 구성" border="true":::

*사진: 송신 전용 부하 분산 장치 구성*

## <a name="prerequisites"></a>사전 요구 사항

- 활성 구독이 있는 Azure 계정. [체험 계정을 만듭니다](https://azure.microsoft.com/free/?WT.mc_id=A261C142F).

## <a name="create-virtual-network-and-load-balancers"></a>가상 네트워크 및 부하 분산 장치 만들기

이 섹션에서는 부하 분산 장치 및 가상 머신에 대한 가상 네트워크와 서브넷을 만듭니다.  그런 다음, 부하 분산 장치를 만듭니다.

### <a name="create-the-virtual-network"></a>가상 네트워크 만들기

이 섹션에서는 가상 머신, 부하 분산 장치, 베스천 호스트에 대한 가상 네트워크 및 서브넷을 만듭니다.

1. 포털 맨 위에 있는 검색 상자에 **가상 네트워크** 를 입력합니다. 검색 결과에서 **가상 네트워크** 를 선택합니다.

2. **가상 네트워크** 에서 **+ 만들기** 를 선택합니다.

3. **가상 네트워크 만들기** 의 **기본** 탭에서 다음 정보를 입력하거나 선택합니다.

    | **설정**          | **값**                                                           |
    |------------------|-----------------------------------------------------------------|
    | **프로젝트 세부 정보**  |                                                                 |
    | 구독     | Azure 구독 선택                                  |
    | 리소스 그룹   | **새로 만들기** 를 선택합니다. </br> **이름** 에 **myResourceGroupLB** 를 입력합니다. </br> **확인** 을 선택합니다. |
    | **인스턴스 세부 정보** |                                                                 |
    | 속성             | **myVNet** 입력                                    |
    | 지역           | **(미국) 미국 동부 2** 를 선택합니다. |

4. **IP 주소** 탭을 선택하거나 페이지 하단의 **다음: IP 주소** 단추를 선택합니다.

5. **IP 주소** 탭에서 다음 정보를 입력합니다.

    | 설정            | 값                      |
    |--------------------|----------------------------|
    | IPv4 주소 공간 | **10.1.0.0/16** 입력 |

6. **서브넷 이름** 아래에서 **기본값** 이라는 단어를 선택합니다.

7. **서브넷 편집** 에서 다음 정보를 입력합니다.

    | 설정            | 값                      |
    |--------------------|----------------------------|
    | 서브넷 이름 | **myBackendSubnet** 입력 |
    | 서브넷 주소 범위 | **10.1.0.0/24** 입력 |

8. **저장** 을 선택합니다.

9. **보안** 탭을 선택합니다.

10. **BastionHost** 에서 **사용** 을 선택합니다. 다음 정보를 입력합니다.

    | 설정            | 값                      |
    |--------------------|----------------------------|
    | Bastion 이름 | **myBastionHost** 입력 |
    | AzureBastionSubnet 주소 공간 | **10.1.1.0/27** 입력 |
    | 공용 IP 주소 | **새로 만들기** 를 선택합니다. </br> **이름** 에 대해 **myBastionIP** 를 입력합니다. </br> **확인** 을 선택합니다. |

11. **검토 + 만들기** 탭을 선택하거나 **검토 + 만들기** 단추를 선택합니다.

12. **만들기** 를 선택합니다.

### <a name="create-internal-load-balancer"></a>내부 부하 분산 장치 만들기

이 섹션에서 내부 부하 분산 장치를 만듭니다.

1. 포털 맨 위에 있는 검색 상자에 **부하 분산 장치** 를 입력합니다. 검색 결과에서 **부하 분산 장치** 를 선택합니다.

2. **부하 분산 장치** 페이지에서 **만들기** 를 선택합니다.

3. **부하 분산 장치 만들기** 페이지의 **기본 사항** 탭에서 다음 정보를 입력하거나 선택합니다. 

    | Setting                 | 값                                              |
    | ---                     | ---                                                |
    | **프로젝트 세부 정보** |   |
    | Subscription               | 구독을 선택합니다.    |    
    | Resource group         | **myResourceGroupLB** 를 선택합니다. |
    | **인스턴스 세부 정보** |   |
    | Name                   | **myInternalLoadBalancer** 를 입력합니다.                                   |
    | 지역         | **(미국) 미국 동부 2** 를 선택합니다.                                        |
    | Type          | **내부** 를 선택합니다.                                        |
    | SKU           | 기본값인 **표준** 을 그대로 둡니다. |

4. 페이지 아래쪽에서 **다음: 프런트 엔드 IP 구성** 을 선택합니다.

5. **프런트 엔드 IP 구성** 에서 **+ 프런트 엔드 IP 추가** 를 선택합니다.

6. **이름** 에 **LoadBalancerFrontend** 를 입력합니다.

7. **서브넷** 에서 **myBackendSubnet** 을 선택합니다.

8. **할당** 에 **동적** 을 선택합니다.

9. **가용성 영역** 에 **영역 중복** 을 선택합니다.

    > [!NOTE]
    > [가용성 영역](../availability-zones/az-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json#availability-zones)이 있는 지역에서는 영역 없음(기본 옵션), 특정 영역 또는 영역 중복을 선택하는 옵션이 있습니다. 선택은 특정 도메인 오류 요구 사항에 따라 달라집니다. 가용성 영역이 없는 지역에서는 이 필드가 표시되지 않습니다. </br> 가용성 영역에 대한 자세한 내용은 [가용성 영역 개요](../availability-zones/az-overview.md)를 참조하세요.

10. **추가** 를 선택합니다.

11. 페이지 하단에서 **다음: 백 엔드 풀** 을 선택합니다.

12. **백 엔드 풀** 탭에서 **+ 백 엔드 풀 추가** 를 선택합니다.

13. **백 엔드 풀 추가** 의 **이름** 에 **myInternalBackendPool** 을 입력합니다.

14. **백 엔드 풀 구성** 에 **NIC** 또는 **IP 주소** 를 선택합니다.

15. **IP 버전** 을 **IPv4** 또는 **IPv6** 으로 선택합니다.

16. **추가** 를 선택합니다.

17. 페이지 아래쪽에서 파란색 **검토 + 만들기** 단추를 선택합니다.

18. **만들기** 를 선택합니다.

### <a name="create-public-load-balancer"></a>퍼블릭 부하 분산 장치 만들기

이 섹션에서는 퍼블릭 부하 분산 장치를 만듭니다.

1. 포털 맨 위에 있는 검색 상자에 **부하 분산 장치** 를 입력합니다. 검색 결과에서 **부하 분산 장치** 를 선택합니다.

2. **부하 분산 장치** 페이지에서 **만들기** 를 선택합니다.

3. **부하 분산 장치 만들기** 페이지의 **기본 사항** 탭에서 다음 정보를 입력하거나 선택합니다. 

    | Setting                 | 값                                              |
    | ---                     | ---                                                |
    | **프로젝트 세부 정보** |   |
    | Subscription               | 구독을 선택합니다.    |    
    | Resource group         | **myResourceGroupLB** 를 선택합니다. |
    | **인스턴스 세부 정보** |   |
    | Name                   | **myPublicLoadBalancer** 를 입력합니다.                                   |
    | 지역         | **(미국) 미국 동부 2** 를 선택합니다.                                        |
    | Type          | **공용** 을 선택합니다.                                        |
    | SKU           | 기본값인 **표준** 을 그대로 둡니다. |
    | 계층          | 기본 **지역** 을 그대로 둡니다. |

4. 페이지 아래쪽에서 **다음: 프런트 엔드 IP 구성** 을 선택합니다.

5. **프런트 엔드 IP 구성** 에서 **+ 프런트 엔드 IP 추가** 를 선택합니다.

6. **이름** 에 **LoadBalancerFrontend** 를 입력합니다.

7. **IP 버전** 을 **IPv4** 또는 **IPv6** 으로 선택합니다.

    > [!NOTE]
    > IPv6은 현재 라우팅 기본 설정 또는 지역 간 부하 분산(글로벌 계층)에서 지원되지 않습니다.

8. **IP 형식** 에 **IP 주소** 를 선택합니다.

    > [!NOTE]
    > IP 접두사에 대한 자세한 내용은 [Azure 공용 IP 주소 접두사](../virtual-network/public-ip-address-prefix.md)를 참조하세요.

9. **공용 IP 주소** 에 **새로 만들기** 를 선택합니다.

10. **공용 IP 주소 추가** 에서 **이름** 에 **myPublicIP** 를 입력합니다.

11. **가용성 영역** 에 **영역 중복** 을 선택합니다.

    > [!NOTE]
    > [가용성 영역](../availability-zones/az-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json#availability-zones)이 있는 지역에서는 영역 없음(기본 옵션), 특정 영역 또는 영역 중복을 선택하는 옵션이 있습니다. 선택은 특정 도메인 오류 요구 사항에 따라 달라집니다. 가용성 영역이 없는 지역에서는 이 필드가 표시되지 않습니다. </br> 가용성 영역에 대한 자세한 내용은 [가용성 영역 개요](../availability-zones/az-overview.md)를 참조하세요.

12. **라우팅 기본 설정** 에는 **Microsoft 네트워크** 의 기본값을 그대로 둡니다.

13. **확인** 을 선택합니다.

14. **추가** 를 선택합니다.

15. 페이지 하단에서 **다음: 백 엔드 풀** 을 선택합니다.

16. **백 엔드 풀** 탭에서 **+ 백 엔드 풀 추가** 를 선택합니다.

17. **백 엔드 풀 추가** 의 **이름** 에 **myPublicBackendPool** 을 입력합니다.

18. **가상 네트워크** 에서 **myVNet** 을 선택합니다.

19. **백 엔드 풀 구성** 에 **NIC** 또는 **IP 주소** 를 선택합니다.

20. **IP 버전** 을 **IPv4** 또는 **IPv6** 으로 선택합니다.

21. **추가** 를 선택합니다.

22. 페이지 아래쪽에서 파란색 **검토 + 만들기** 단추를 선택합니다.

23. **만들기** 를 선택합니다.

## <a name="create-virtual-machine"></a>가상 머신 만들기

이 섹션에서는 가상 머신을 만듭니다. 만드는 동안 내부 부하 분산 장치의 백 엔드 풀에 추가합니다. 가상 머신을 만든 후에는 퍼블릭 부하 분산 장치의 백 엔드 풀에 가상 머신을 추가합니다.

1. 포털 맨 위에 있는 검색 상자에 **가상 머신** 을 입력합니다. 검색 결과에서 **가상 머신** 을 선택합니다.

2. **가상 머신** 에서 **+ 만들기** > **가상 머신** 을 선택합니다.
   
3. **가상 머신 만들기** 에서 **기본** 탭에서 값을 입력하거나 선택합니다.

    | 설정 | 값                                          |
    |-----------------------|----------------------------------|
    | **프로젝트 세부 정보** |  |
    | 구독 | Azure 구독 선택 |
    | 리소스 그룹 | **myResourceGroupLB** 를 선택합니다. |
    | **인스턴스 세부 정보** |  |
    | 가상 머신 이름 | **myVM** 을 입력합니다. |
    | 지역 | **(미국) 미국 동부 2** 를 선택합니다. |
    | 가용성 옵션 | **인프라 중복이 필요하지 않습니다** 를 선택합니다. |
    | 이미지 | **Windows Server 2019 Datacenter - Gen1** 을 선택합니다. |
    | Azure Spot 인스턴스 | 선택 안 함(기본값)을 그대로 둡니다. |
    | 크기 | VM 크기를 선택하거나 기본 설정을 사용합니다. |
    | **관리자 계정** |  |
    | 사용자 이름 | 사용자 이름을 입력합니다. |
    | 암호 | 암호를 입력합니다. |
    | 암호 확인 | 암호를 다시 입력합니다. |
    | **인바운드 포트 규칙** |  |
    | 공용 인바운드 포트 | **없음** 을 선택합니다. |

4. **네트워킹** 탭을 선택하거나 **다음: 디스크**, **다음: 네트워킹** 을 차례로 선택합니다.
  
5. [네트워킹] 탭에서 다음을 선택하거나 입력합니다.

    | Setting | 값 |
    |-|-|
    | **네트워크 인터페이스** |  |
    | 가상 네트워크 | **myVNet** |
    | 서브넷 | **myBackendSubnet** |
    | 공용 IP | **없음** 을 선택합니다. |
    | NIC 네트워크 보안 그룹 추가 | **고급** 을 선택합니다.|
    | 네트워크 보안 그룹 구성 | **기본** 기본값을 그대로 둡니다. |
    | **부하 분산**.  |
    | 기존 부하 분산 솔루션 뒤에 이 가상 머신을 배치하시겠습니까? | 상자를 선택합니다. |
    | **부하 분산 설정** |
    | 부하 분산 옵션 | **Azure 부하 분산** 을 선택합니다. |
    | 부하 분산 장치 선택 | **myInternalLoadBalancer** 를 선택합니다.  |
    | 백 엔드 풀 선택 | **myInternalBackendPool** 을 선택합니다. |
   
6. **검토 + 만들기** 를 선택합니다. 
  
7. 설정을 검토한 다음, **만들기** 를 선택합니다.

### <a name="add-vm-to-backend-pool-of-public-load-balancer"></a>퍼블릭 부하 분산 장치의 백 엔드 풀에 VM 추가

이 섹션에서는 이전에 만든 가상 머신을 퍼블릭 부하 분산 장치의 백 엔드 풀에 추가합니다.

1. 포털 맨 위에 있는 검색 상자에 **부하 분산 장치** 를 입력합니다. 검색 결과에서 **부하 분산 장치** 를 선택합니다.

2. **myPublicLoadBalancer** 를 선택합니다.

3. **myPublicLoadBalancer** 의 **설정** 에서 **백 엔드 풀** 을 선택합니다.

4. **백 엔드 풀** 페이지의 **백 엔드 풀** 아래에서 **myPublicBackendPool** 을 선택합니다.

5. **myPublicBackendPool** 에서 **가상 네트워크** 를 **myVNet** 으로 선택합니다.

6. **가상 머신** 에서 파란 **+ 추가** 단추를 선택합니다.

7. **백 엔드 풀에 가상 머신 추가** 에서 **myVM** 옆의 상자를 선택합니다.

8. **추가** 를 선택합니다.

9. **저장** 을 선택합니다.
## <a name="test-connectivity-before-outbound-rule"></a>아웃바운드 규칙 전 연결 테스트

1. 포털 맨 위에 있는 검색 상자에 **가상 머신** 을 입력합니다. 검색 결과에서 **가상 머신** 을 선택합니다.

2. **myVM** 을 선택합니다.

3. **개요** 페이지에서 **연결** 을 선택한 다음, **Bastion** 을 선택합니다.

4. VM을 만드는 동안 입력한 사용자 이름과 암호를 입력합니다.

5. **연결** 을 선택합니다.

6. Internet Explorer를 엽니다.

7. 주소 표시줄에 **https://whatsmyip.org** 을 입력합니다.

8. 연결이 실패합니다. 기본적으로 표준 퍼블릭 부하 분산 장치는 [정의된 아웃바운드 규칙이 없는 아웃바운드 트래픽을 허용하지 않습니다](load-balancer-overview.md#securebydefault).
 
## <a name="create-a-public-load-balancer-outbound-rule"></a>퍼블릭 부하 분산 장치 아웃바운드 규칙 만들기

1. 포털 맨 위에 있는 검색 상자에 **부하 분산 장치** 를 입력합니다. 검색 결과에서 **부하 분산 장치** 를 선택합니다.

2. **myPublicLoadBalancer** 를 선택합니다.

3. **myPublicLoadBalancer** 의 **설정** 에서 **아웃바운드 규칙** 을 선택합니다.

4. **아웃바운드 규칙** 에서 **+ 추가** 를 선택합니다.

5. 다음 정보를 입력하거나 선택하여 아웃바운드 규칙을 구성합니다.

    | Setting | 값 |
    | ------- | ----- |
    | 이름 | **myOutboundRule** 을 입력합니다. |
    | 프런트 엔드 IP 주소 | **LoadBalancerFrontEnd** 를 선택합니다.|
    | 프로토콜 | **허용**(기본값)을 그대로 둡니다. |
    | 유휴 제한 시간(분) | 슬라이더를 **15분** 으로 이동합니다.|
    | TCP 재설정 | **사용** 을 선택합니다.|
    | 백 엔드 풀 | **myPublicBackendPool** 를 선택합니다.|
    | **포트 할당** |  |
    | 포트 할당 | **아웃바운드 포트 수 수동 선택** 을 선택합니다. |
    | **아웃바운드 포트** |  |
    | 선택 기준 | **인스턴스당 포트 수** 를 선택합니다. |
    | 인스턴스당 포트 수 | **10000** 을 입력합니다.

6. **추가** 를 선택합니다.

## <a name="test-connectivity-after-outbound-rule"></a>아웃바운드 규칙 후 연결 테스트

1. 포털 맨 위에 있는 검색 상자에 **가상 머신** 을 입력합니다. 검색 결과에서 **가상 머신** 을 선택합니다.

2. **myVM** 을 선택합니다.

3. **개요** 페이지에서 **연결** 을 선택한 다음, **Bastion** 을 선택합니다.

4. VM을 만드는 동안 입력한 사용자 이름과 암호를 입력합니다.

5. **연결** 을 선택합니다.

6. Internet Explorer를 엽니다.

7. 주소 표시줄에 **https://whatsmyip.org** 을 입력합니다.

8. 연결이 성공합니다.

9. 표시되는 IP 주소는 **myPublicLoadBalancer** 의 프런트 엔드 IP 주소여야 합니다.

## <a name="clean-up-resources"></a>리소스 정리

리소스 그룹, 부하 분산 장치, VM, 모든 관련 리소스가 더 이상 필요하지 않은 경우 삭제합니다. 

이렇게 하려면 집합의 리소스 그룹 **myResourceGroupLB** 를 선택하고 **삭제** 를 선택합니다.

## <a name="next-steps"></a>다음 단계

이 문서에서는 퍼블릭 부하 분산 장치 및 내부 부하 분산 장치의 조합을 사용하여 “송신 전용” 구성을 만들었습니다.  

이 구성을 사용하면 퍼블릭 인바운드 연결을 계속 방지하면서도 들어오는 내부 트래픽을 백 엔드 풀로 부하 분산할 수 있습니다.

Azure Load Balancer에 대한 자세한 내용은 [Azure Load Balancer란?](load-balancer-overview.md) 및 [Azure Bastion이란?](../bastion/bastion-overview.md)을 참조하세요.

