---
title: Azure IoT Central 애플리케이션에서 디바이스 템플릿 편집 | Microsoft Docs
description: 라이브 연결 디바이스에 영향을 주지 않고 디바이스 템플릿 반복
author: dominicbetts
ms.author: dobett
ms.date: 04/26/2021
ms.topic: how-to
ms.service: iot-central
services: iot-central
ms.custom: device-developer
ms.openlocfilehash: 5108949527f0f63cd6aa7048eccf83c95927c8bd
ms.sourcegitcommit: 555ea0d06da38dea1de6ecbe0ed746cddd4566f5
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/08/2021
ms.locfileid: "113516383"
---
# <a name="edit-an-existing-device-template"></a>기존 디바이스 템플릿 편집

*이 문서는 솔루션 빌더 및 디바이스 개발자에게 적용됩니다.*

디바이스 템플릿에는 디바이스가 IoT Central과 상호 작용하는 방식을 설명하는 모델이 포함되어 있습니다. 이 모델은 디바이스의 기능과 IoT Central이 디바이스와 상호 작용하는 방법을 정의합니다. 디바이스는 원격 분석 및 속성 값을 IoT Central에 보낼 수 있고 IoT Central은 속성 업데이트 및 명령을 디바이스에 보낼 수 있습니다. 또한 IoT Central에서는 모델을 사용하여 작업, 규칙 및 내보내기와 같은 IoT Central 기능과의 상호 작용을 정의합니다.

디바이스 템플릿의 모델 변경 내용은 연결된 디바이스를 포함하여 전체 애플리케이션에 영향을 줄 수 있습니다. 규칙, 내보내기, 디바이스 그룹 또는 작업에서 사용하는 기능에 대한 변경으로 인해 예기치 않게 동작하거나 작동하지 않을 수 있습니다. 예를 들어 템플릿에서 원격 분석 정의를 제거하는 경우 다음을 수행합니다.

- IoT Central은 더 이상 해당 값을 해석할 수 없습니다. IoT Central은 디바이스의 **원시 데이터** 페이지에서 **모델링되지 않은 데이터** 로 해석할 수 없는 디바이스 데이터를 표시합니다.
- IoT Central은 더 이상 데이터 내보내기에 값을 포함하지 않습니다.

이 문서에는 디바이스 템플릿 편집으로 인해 의도하지 않은 결과가 발생하지 않도록 하기 위해 현재 개발 수명 주기 단계를 기준으로 하는 권장 사항이 포함되어 있습니다. 일반적으로 개발 수명 주기에서 이전에는 디바이스 템플릿 변경에 대한 추가 정보를 확인할 수 있습니다.

디바이스 템플릿 및 생성 방법에 대한 자세한 내용은 [디바이스 템플릿이란?](concepts-device-templates.md) 및 [디바이스 템플릿 설정](howto-set-up-template.md)을 참조하세요.

## <a name="modify-a-device-template"></a>디바이스 템플릿 수정

모델에 기능 또는 인터페이스를 추가하는 등의 추가 변경은 작업을 중단하지 않는 변경입니다. 개발 수명 주기의 모든 단계에서 모델을 추가로 변경할 수 있습니다.

호환성이 손상되는 변경에는 모델의 일부 제거, 기능 이름 또는 스키마 형식 변경 등이 있습니다. 이러한 변경으로 인해 규칙, 내보내기 또는 대시보드와 같은 애플리케이션 기능으로 오류 메시지를 표시하고 작동을 중지할 수 있습니다.

초기 디바이스 개발 단계에서는 모델을 디자인하고 테스트하는 동안 디바이스 모델을 직접 변경하는 것에 대한 허용 범위가 더 높습니다. 프로덕션 디바이스를 디바이스 템플릿에 연결하기 전에 디바이스 템플릿을 직접 편집할 수 있습니다. IoT Central은 디바이스 템플릿을 게시할 때 해당 변경 내용을 디바이스에 자동으로 적용합니다.

디바이스 템플릿에 프로덕션 디바이스를 연결한 후 디바이스 템플릿을 편집하기 전에 변경 내용의 영향을 평가합니다. 프로덕션의 디바이스 템플릿에 호환성이 손상되도록 변경하면 안 됩니다. 이렇게 변경하려면 디바이스 템플릿의 새 버전을 만듭니다. 새 디바이스 템플릿을 테스트한 다음 예약된 가동 중지 시간에 프로덕션 디바이스를 새 템플릿으로 마이그레이션합니다.

## <a name="update-an-iot-edge-device-template"></a>IoT Edge 디바이스 템플릿 업데이트

IoT Edge 디바이스 템플릿에는 디바이스 모델 외에도 _배포 매니페스트_ 가 포함되어 있습니다. IoT Edge 디바이스의 경우 모델은 디바이스에서 실행되는 IoT Edge 모듈에 해당하는 모듈별로 기능을 그룹화합니다. 배포 매니페스트는 설치할 모듈과 구성 방법을 IoT Edge 디바이스에 알려주는 별도의 JSON 문서입니다. 이전 섹션에서 설명한 것과 동일한 지침이 디바이스 모델의 모듈에 적용됩니다. 또한 디바이스 모델에 정의된 모든 모듈은 배포 매니페스트에 포함되어야 합니다. IoT Edge 디바이스 템플릿이 게시되면 배포 매니페스트를 대체해야 하는 경우 새 버전을 만들어야 합니다. IoT Edge 디바이스가 새 배포 매니페스트를 받으려면 새 템플릿 버전으로 마이그레이션합니다.

자세히 알아보려면 [IoT Edge 배포 매니페스트 및 IoT Central 디바이스 템플릿](concepts-iot-edge.md#iot-edge-deployment-manifests-and-iot-central-device-templates)을 참조하세요.

### <a name="edit-and-publish-actions"></a>작업 편집 및 게시

다음 작업은 디바이스 템플릿을 편집할 때 유용합니다.

- _저장_ 합니다. 디바이스 템플릿의 일부를 변경하는 경우 변경 내용을 저장하면 반환할 수 있는 초안이 만들어집니다. 이러한 변경 내용은 연결된 디바이스에 아직 영향을 미치지 않습니다. 이 템플릿에서 만든 모든 디바이스는 사용자가 게시할 때까지 저장된 변경 내용을 갖지 않습니다.
- _게시_. 디바이스 템플릿을 게시하는 경우 기존 디바이스 인스턴스에 저장된 변경 내용을 적용합니다. 새로 만든 디바이스 인스턴스는 항상 최신 게시된 템플릿을 사용합니다.
- _템플릿 버전 지정_. 디바이스 템플릿에 버전을 지정하면 저장된 최신 변경 내용이 모두 포함된 새 템플릿이 만들어집니다. 기존 디바이스 인스턴스는 새 버전의 변경 내용에 영향을 받지 않습니다. 자세한 내용은 [디바이스 템플릿 버전 지정](#version-a-device-template)을 참조하세요.
- _인터페이스 버전 지정_. 인터페이스에 버전을 지정하면 저장된 최신 기능이 모두 포함된 새 인터페이스가 만들어집니다. 템플릿 내의 여러 위치에서 인터페이스를 재사용할 수 있습니다. 따라서 인터페이스에 대한 참조 하나를 변경하면 해당 인터페이스를 사용하는 템플릿의 모든 위치가 변경됩니다. 인터페이스에 버전을 지정하면 새 버전이 이제 별도의 인터페이스이므로 이 동작이 변경됩니다. 자세한 내용은 [인터페이스 버전 지정](#version-an-interface)을 참조하세요.
- _디바이스 마이그레이션_. 디바이스를 마이그레이션하면 디바이스 인스턴스가 디바이스 템플릿을 다른 템플릿으로 바꿉니다. 디바이스 마이그레이션으로 인해 IoT Central이 변경 내용을 처리하는 데 시간이 약간 걸릴 수 있습니다. 자세한 내용은 [버전 간 디바이스 마이그레이션](#migrate-a-device-across-versions)을 참조하세요.

### <a name="version-numbers"></a>버전 번호

디바이스 모델과 인터페이스에는 모두 버전 번호가 있습니다. 버전 번호가 다르면 모델 또는 인터페이스가 `@id` 값을 공유하면서 업데이트 기록을 제공할 수 있습니다. 버전 번호는 템플릿 또는 인터페이스의 버전을 선택하거나 의도적으로 버전 번호를 변경하는 경우에만 증가합니다. 템플릿이나 인터페이스를 크게 변경하는 경우 버전 번호를 변경해야 합니다.

다음 조각에서는 온도 조절기 디바이스에 대한 디바이스 모델을 보여 줍니다. 디바이스 모델에는 단일 인터페이스가 있습니다. `@id` 필드 끝에 버전 번호, `1`이 표시됩니다.

```json
{
  "@context": "dtmi:dtdl:context;2",
  "@id": "dtmi:com:example:Thermostat;1",
  "@type": "Interface",
  "displayName": "Thermostat",
  "description": "Reports current temperature and provides desired temperature control.",
  "contents": [
    // ...
  ]
}
```

IoT Central UI에서 이 정보를 보려면 디바이스 템플릿 편집기에서 **ID 보기** 를 선택합니다.

:::image type="content" source="media/howto-edit-device-template/view-identity.png" alt-text="인터페이스 ID를 보고 버전 번호 확인":::

## <a name="version-a-device-template"></a>디바이스 템플릿 버전 지정

디바이스 템플릿의 버전을 지정하려면:

1. **디바이스 템플릿** 페이지로 이동합니다.
1. 버전을 지정할 디바이스 템플릿을 선택합니다.
1. 페이지 맨 위에 있는 **버전** 을 선택하고 템플릿에 새 이름을 지정합니다. IoT Central은 편집할 수 있는 새 이름을 제안합니다.
1. **만들기** 를 선택합니다.

이제 기존 디바이스에 연결되지 않은 고유한 ID를 사용하여 새 템플릿을 만들었습니다.

## <a name="version-an-interface"></a>인터페이스 버전 지정

인터페이스 버전을 지정하려면:

1. **디바이스 템플릿** 페이지로 이동합니다.
1. 초안 모드의 디바이스 템플릿을 선택합니다.
1. 버전을 지정하고 편집할 게시된 인터페이스를 선택합니다.
1. 인터페이스 페이지 상단에서 **버전** 을 선택합니다.
1. **만들기** 를 선택합니다.

이제 고유한 ID를 사용하여 새 인터페이스를 만들었으므로 이전 인터페이스 버전과 동기화되지 않습니다.

## <a name="migrate-a-device-across-versions"></a>여러 버전에서 디바이스 마이그레이션

여러 버전의 디바이스 템플릿을 만들 수 있습니다. 시간이 지나면 이러한 디바이스 템플릿을 사용하는 연결된 디바이스가 여러 개 생깁니다. 한 버전의 디바이스 템플릿에서 다른 버전으로 디바이스를 마이그레이션할 수 있습니다. 다음 단계는 디바이스를 마이그레이션하는 방법을 설명합니다.

1. **장치** 페이지로 이동합니다.
1. 다른 버전으로 마이그레이션할 디바이스를 선택합니다.
1. **마이그레이션** 을 선택합니다.

    :::image type="content" source="media/howto-edit-device-template/migrate-device.png" alt-text="디바이스 마이그레이션 시작 옵션 선택":::

1. 디바이스를 마이그레이션할 버전이 있는 디바이스 템플릿을 선택하고 **마이그레이션** 을 선택합니다.

## <a name="next-steps"></a>다음 단계

운영자 또는 솔루션 작성자인 경우 다음 단계로 [디바이스 관리 방법](./howto-manage-devices-individually.md)에 대해 알아보세요.

디바이스 개발자인 경우 다음 단계로 [Azure IoT Edge 디바이스 및 Azure IoT Central](./concepts-iot-edge.md)에 대해 알아보세요.
