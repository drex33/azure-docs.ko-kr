---
title: 'AZF0002: 비효율적인 HttpClient 사용'
titleSuffix: Azure Functions
description: '코드 분석 규칙 AZF0002에 대 한 자세한 정보: 비효율적인 HttpClient 사용'
author: kashimiz
ms.author: kashimiz
ms.topic: troubleshooting
ms.date: 09/29/2021
ms.openlocfilehash: 242536f0a9282425ba1b1cc9c8665492f5ba0c70
ms.sourcegitcommit: 0415f4d064530e0d7799fe295f1d8dc003f17202
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/17/2021
ms.locfileid: "132710409"
---
# <a name="azf0002-inefficient-httpclient-usage"></a>AZF0002: 비효율적인 HttpClient 사용

이 규칙은 데코레이팅된 메서드 내에서 [Httpclient](/dotnet/api/system.net.http.httpclient?view=netcore-3.1&preserve-view=true) 가 인스턴스화될 때 트리거됩니다 `[FunctionName]` .

| | 값 |
|-|-|
| **규칙 ID** |AZF0002|
| **범주** |책임감|
| **심각도** |경고|

## <a name="rule-description"></a>규칙 설명

를 간단히 사용 [`HttpClient`](/dotnet/api/system.net.http.httpclient?view=netcore-3.1&preserve-view=true) 하면 HTTP 요청에 대 한 취약성을 비롯 한 여러 문제가 발생할 수 있습니다. 함수 앱에서 `HttpClient` 함수 메서드 본문의 생성자를 호출 하면 모든 함수 호출을 사용 하 여 새 인스턴스를 생성 하 여 이러한 문제를 암시 합니다. [소비 호스팅 계획](../../consumption-plan.md)에서 실행 되는 앱의 경우 비효율적인 `HttpClient` 사용은 계획의 [아웃 바운드 연결 제한을](../../../azure-resource-manager/management/azure-subscription-service-limits.md#azure-functions-limits)고갈 시킬 수 있습니다.

권장 되는 [모범 사례](/dotnet/architecture/microservices/implement-resilient-applications/use-httpclientfactory-to-implement-resilient-http-requests) 는 `IHttpClientFactory`  `HttpClient` 응용 프로그램의 특성에 따라 종속성 주입 또는 단일 정적 인스턴스를 포함 하는 []를 사용 하는 것입니다.

## <a name="how-to-fix-violations"></a>위반 문제를 해결하는 방법

+ `HttpClient` [이 예제](../../manage-connections.md?tabs=csharp#http-requests)와 같이 함수 외부에서 정의 된 정적 인스턴스로 인스턴스화를 이동 합니다.

+ `HttpClient` [종속성 주입](../../functions-dotnet-dependency-injection.md)을 통해 [IHttpClientFactory](/dotnet/api/system.net.http.ihttpclientfactory?view=dotnet-plat-ext-5.0&preserve-view=true) 를 사용 하 여 함수에를 제공 합니다. 이는이 위반 문제를 해결 하기 위해 권장 되는 방법입니다.

## <a name="when-to-suppress-the-rule"></a>규칙을 표시하지 않을 경우

이 규칙은 숨겨서는 안됩니다.

## <a name="next-steps"></a>다음 단계

Azure Functions의 연결 관리 모범 사례에 대 한 자세한 내용은 [Azure Functions에서 연결 관리](../../manage-connections.md)를 참조 하세요.

동작 문제 및 관리에 대 한 자세한 내용은 `HttpClient` [IHttpClientFactory를 사용 하 여 복원 력 있는 HTTP 요청 구현](/dotnet/architecture/microservices/implement-resilient-applications/use-httpclientfactory-to-implement-resilient-http-requests) 을 참조 하세요.