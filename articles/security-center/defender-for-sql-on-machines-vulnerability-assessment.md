---
title: SQL server에 대한 Azure Security Center의 통합 취약성 평가 스캐너 사용
description: 머신의 통합 취약성 평가 스캐너에서 SQL Server에 대한 Azure Defender 대해 알아봅니다
author: memildin
ms.author: memildin
manager: rkarlin
ms.service: security-center
ms.topic: how-to
ms.date: 09/14/2021
ms.openlocfilehash: 126eb3c19eba26e9a5905e92c9b4c511e3a754c5
ms.sourcegitcommit: f6e2ea5571e35b9ed3a79a22485eba4d20ae36cc
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 09/24/2021
ms.locfileid: "128567179"
---
# <a name="scan-your-sql-servers-for-vulnerabilities"></a>SQL Server에서 취약성 검사

**머신의 SQL 서버용 Azure Defender** 는 하이브리드 환경을 완벽하게 지원하고 Azure, 기타 클라우드 환경 및 온-프레미스 머신에서 호스팅되는 SQL 서버(지원되는 모든 버전)를 보호하도록 Azure 네이티브 SQL Server에 대한 보호를 확장합니다.

- [Virtual Machines의 SQL Server](https://azure.microsoft.com/services/virtual-machines/sql-server/)
- 온-프레미스 SQL Server:
  - [Azure Arc 지원 SQL Server(미리 보기)](/sql/sql-server/azure-arc/overview)
  - [Azure Arc를 사용하지 않는 Windows 머신에서 실행되는 SQL Server](../azure-monitor/agents/agent-windows.md)

통합 [취약성 평가 스캐너는](../azure-sql/database/sql-vulnerability-assessment.md) 잠재적인 데이터베이스 취약성을 검색, 추적 및 수정하는 데 도움이 됩니다. 평가 검사 결과는 SQL 머신의 보안 상태에 대한 개요와 보안 결과에 대한 세부 정보를 제공합니다.

> [!NOTE]
> 검색은 간단하고 안전하며, 실행하는 데 데이터베이스당 몇 초 밖에 걸리지 않으며 완전히 읽기 전용입니다. 데이터베이스에 어떠한 변경 사항도 발생하지 않습니다. 

## <a name="explore-vulnerability-assessment-reports"></a>취약성 평가 보고서 탐색

취약성 평가 서비스는 12시간마다 데이터베이스를 검사합니다.

취약성 평가 대시보드는 모든 데이터베이스의 평가 결과에 대한 개요와 정상 및 비정상 데이터베이스의 요약 및 위험 분포에 따른 실패한 검사의 전체 요약을 제공합니다.

Security Center에서 직접 취약성 평가 결과를 볼 수 있습니다.

1. Security Center의 메뉴에서 **권장 사항** 페이지를 엽니다.

1. **머신의 SQL 서버에 대한 취약성 평가 결과를 수정해야 함(미리 보기)** 권장 사항을 선택합니다. 자세한 정보는 [Security Center 권장 사항 참조 페이지](security-center-recommendations.md)를 참조하세요. 

    :::image type="content" source="./media/security-center-advanced-iaas-data/data-and-storage-sqldb-vulns-on-vm.png" alt-text="머신의 SQL 서버에 대한 취약성 평가 결과를 수정해야 함(미리 보기)":::

    이 권장 사항에 대한 자세한 보기가 나타납니다.

    :::image type="content" source="./media/defender-for-sql-on-machines-vulnerability-assessment/sql-vulnerability-findings.png" alt-text="권장 사항에 대한 자세한 내용을 확인합니다.":::

1. 자세한 내용은 드릴다운 하십시오.

    - 검사된 리소스(데이터베이스)의 개요 및 테스트된 보안 검사 목록을 확인하려면 **영향을 받는 리소스를** 열고 관심 있는 서버를 선택합니다.

    - 특정 SQL 데이터베이스별로 그룹화된 취약성에 대한 개요는 관심 있는 데이터베이스를 선택합니다.

    각 보기에서 보안 검사는 **심각도** 에 따라 정렬됩니다. 특정 보안 검사를 선택하여 **설명**, **수정** 방법 및 기타 관련 정보(예: **영향** 또는 **벤치마크**)가 있는 세부 정보 창을 확인합니다.

## <a name="set-a-baseline"></a>기준선 설정 

평가 결과를 검토할 때 결과를 해당 환경에서 허용 가능한 기준으로 표시할 수 있습니다. 기준은 기본적으로 결과를 보고하는 방법의 사용자 지정입니다. 기준과 일치하는 결과는 후속 검색을 통과하는 것으로 간주합니다. 보안 상태 기준을 설정한 후 취약성 평가 스캐너는 기준에서 편차가 발생했을 때만 보고합니다. 이렇게 하면 관련 문제에 집중할 수 있습니다.

:::image type="content" source="media/defender-for-sql-on-machines-vulnerability-assessment/analyze-report-for-details.png" alt-text="평가 결과를 검토할 때 결과를 해당 환경에서 허용 가능한 기준으로 표시할 수 있습니다.":::

## <a name="export-results"></a>결과 내보내기

Azure Security Center의 [연속 내보내기](continuous-export.md) 기능을 사용하여 취약성 평가 결과를 Azure 이벤트 허브 또는 Log Analytics 작업 영역으로 내보낼 수 있습니다. 

## <a name="view-vulnerabilities-in-graphical-interactive-reports"></a>그래픽 대화형 보고서의 취약성 보기

Security Center 통합 Azure Monitor 통합 문서 갤러리에는 머신, 컨테이너 레지스트리의 컨테이너 및 SQL 서버에 대한 취약성 스캐너의 모든 결과에 대한 대화형 보고서가 포함되어 있습니다.

이러한 각 스캐너에 대한 결과는 별도의 권장 사항으로 보고됩니다.

- 가상 머신의 취약성을 수정해야 함
- Azure Container Registry 이미지의 취약성을 수정해야 함(Qualys 제공)
- SQL 데이터베이스에 대한 취약성 평가 결과를 수정해야 함
- 머신의 SQL 서버에 대한 취약성 평가 결과를 수정해야 함

'취약성 평가 발견' 보고서는 이러한 모든 결과를 수집하 여 심각도, 리소스 유형 및 범주별로 구성합니다. Security Center의 사이드바에서 사용할 수 있는 통합 문서 갤러리에서 보고서를 찾을 수 있습니다.

:::image type="content" source="media/defender-for-sql-on-machines-vulnerability-assessment/vulnerability-assessment-findings-report-sql.png" alt-text="Security Center의 취약성 평가 결과 보고서":::


## <a name="disable-specific-findings-preview"></a>특정 결과 사용 안 함(미리 보기)

조직에서 결과를 수정하지 않고 무시해야 하는 요구 사항이 있으면 필요에 따라 이 결과를 사용하지 않도록 설정할 수 있습니다. 사용하지 않도록 설정된 결과는 보안 점수에 영향을 주거나 원치 않는 노이즈를 생성하지 않습니다.

결과가 사용 안 함 규칙에 정의한 조건과 일치하면 검색 결과 목록에 표시되지 않습니다. 일반적인 시나리오는 다음이 포함됩니다.

- 심각도가 보통 이하인 결과를 사용하지 않도록 설정
- 패치 가능하지 않은 검색 결과를 사용하지 않도록 설정
- 정의된 범위에 관심이 없는 벤치마크의 결과를 사용하지 않도록 설정

> [!IMPORTANT]
> 특정 결과를 사용하지 않도록 설정하려면 Azure Policy에서 정책을 편집할 수 있는 권한이 있어야 합니다. [Azure Policy에서 Azure RBAC 사용 권한](../governance/policy/overview.md#azure-rbac-permissions-in-azure-policy)에 대해 자세히 알아보세요.

규칙을 만들려면 다음을 수행합니다.

1. **머신의 SQL Server에 대한 취약성 평가 결과가 재조정되어야 함** 에 대한 권장 사항 세부 정보 페이지에서, **규칙 사용 안 함** 을 선택합니다.

1. 관련 범위를 선택합니다.

1. 조건을 정의하십시오. 다음 조건 중 하나를 사용할 수 있습니다. 
    - ID 찾기 
    - 심각도 
    - 벤치마크 

    :::image type="content" source="./media/defender-for-sql-on-machines-vulnerability-assessment/disable-rule-vulnerability-findings-sql.png" alt-text="컴퓨터의 SQL Server에서 VA 검색에 대한 사용 안 함 규칙을 만듭니다.":::

1. **규칙 적용** 을 선택합니다. 변경 내용이 적용되는 데 최대 24시간이 걸릴 수 있습니다.

1. 규칙을 보거나 재정의하거나 삭제하려면 다음을 수행합니다. 

    1. **사용 안 함** 을 선택합니다.

    1. 범위 목록에서 활성 규칙이 있는 구독은 **규칙 적용** 됨으로 표시됩니다.

        :::image type="content" source="./media/remediate-vulnerability-findings-vm/modify-rule.png" alt-text="기존 규칙을 수정하거나 삭제합니다.":::

    1. 규칙을 보거나 삭제하려면 줄임표 메뉴("...")를 선택합니다.

## <a name="manage-vulnerability-assessments-programmatically"></a>프로그래밍 방식으로 취약성 평가 관리

### <a name="using-azure-powershell"></a>Azure PowerShell 사용

Azure PowerShell cmdlet을 사용하여 취약성 평가를 프로그래밍 방식으로 관리할 수 있습니다. 지원되는 cmdlet은 다음과 같습니다.

| 링크된 Cmdlet 이름 | Description |
| :-------------------- | :---------- |
| [Add-AzSecuritySqlVulnerabilityAssessmentBaseline](/powershell/module/az.security/add-azsecuritysqlvulnerabilityassessmentbaseline) | SQL 취약성 평가 기준을 추가합니다. |
| [Get-AzSecuritySqlVulnerabilityAssessmentBaseline](/powershell/module/az.security/get-azsecuritysqlvulnerabilityassessmentbaseline) | SQL 취약성 평가 기준을 가져옵니다. |
| [Get-AzSecuritySqlVulnerabilityAssessmentScanResult](/powershell/module/az.security/get-azsecuritysqlvulnerabilityassessmentscanresult) | SQL 취약성 평가 검사 결과를 가져옵니다. |
| [Get-AzSecuritySqlVulnerabilityAssessmentScanRecord](/powershell/module/az.security/get-azsecuritysqlvulnerabilityassessmentscanrecord) | SQL 취약성 평가 검사 레코드를 가져옵니다. |
| [Remove-AzSecuritySqlVulnerabilityAssessmentBaseline](/powershell/module/az.security/remove-azsecuritysqlvulnerabilityassessmentbaseline) | SQL 취약성 평가 기준을 제거합니다. |
| [Set-AzSecuritySqlVulnerabilityAssessmentBaseline](/powershell/module/az.security/set-azsecuritysqlvulnerabilityassessmentbaseline) | 특정 데이터베이스에 새 SQL 취약성 평가 기준이 있는 경우 이전 기준을 삭제합니다. |
| &nbsp; | &nbsp; |

## <a name="data-residency"></a>데이터 상주

SQL 취약성 평가는 SQL 취약성 평가에 대한 Security Center 권장 사항에서 공개적으로 사용 가능한 쿼리를 사용하여 SQL Server를 쿼리하고 쿼리 결과를 저장합니다. SQL 취약성 평가 데이터는 컴퓨터가 연결된 Log Analytics 작업 영역의 위치에 저장됩니다. 예를 들어 사용자가 SQL Virtual Machine을 서유럽의 Log Analytics 작업 영역에 연결하는 경우 결과는 서유럽에 저장됩니다. 이 데이터는 SQL Vulnerability Assessment 솔루션이 Log Analytics 작업 영역에서 사용하도록 설정된 경우에만 수집됩니다.

연결된 머신에 대한 메타데이터 정보도 수집됩니다. 특히:

-   운영 체제 이름, 형식 및 버전
-   컴퓨터 FQDN(정규화된 도메인 이름)
-   Connected Machine 에이전트 버전
-   UUID(BIOS ID)
-   SQL Server 이름 및 기본 데이터베이스 이름

SQL 취약성 평가를 사용하면 Log Analytics 작업 영역 위치를 선택하여 데이터가 저장될 지역을 지정할 수 있습니다. Microsoft는 데이터 복원력을 위해 다른 지역에 복제할 수 있지만, Microsoft는 지리 외부로 데이터를 복제하지 않습니다.

## <a name="next-steps"></a>다음 단계

[Azure Defender for SQL 소개](defender-for-sql-introduction.md)의 SQL 리소스에 대한 Security Center의 보호에 대해 자세히 알아보세요.
