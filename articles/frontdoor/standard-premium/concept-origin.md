---
title: Azure Front Door 표준/프리미엄의 원본 및 원본 그룹
description: 이 문서에서는 Azure Front Door 구성에 있는 원본 및 원본 그룹을 설명합니다.
services: frontdoor
author: duongau
ms.service: frontdoor
ms.topic: conceptual
ms.date: 02/18/2021
ms.author: duau
ms.openlocfilehash: 42c90d009aefb399e7635ec4a7cd09f884f3c51c
ms.sourcegitcommit: beff1803eeb28b60482560eee8967122653bc19c
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/07/2021
ms.locfileid: "113437651"
---
# <a name="origin-and-origin-group-in-azure-front-door-standardpremium-preview"></a>Azure Front Door 표준/프리미엄(미리 보기)의 원본 및 원본 그룹

> [!Note]
> 이 설명서는 Azure Front Door 표준/프리미엄(미리 보기)용입니다. Azure Front Door에 대한 정보를 찾고 있나요? [여기](../front-door-overview.md)에서 봅니다.

이 문서에서는 Azure Front Door 표준/프리미엄에서 웹 애플리케이션 배포가 작동하는 방법에 대한 개념을 설명합니다. 또한 Azure Front Door 표준/프리미엄 구성에 있는 *원본* 및 *원본 그룹* 에 대해 알아봅니다.

> [!IMPORTANT]
> Azure Front Door 표준/프리미엄(미리 보기)은 현재 공개 미리 보기로 제공됩니다.
> 이 미리 보기 버전은 서비스 수준 계약 없이 제공되며 프로덕션 워크로드에는 사용하지 않는 것이 좋습니다. 특정 기능이 지원되지 않거나 기능이 제한될 수 있습니다.
> 자세한 내용은 [Microsoft Azure Preview에 대한 추가 사용 약관](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)을 참조하세요.

## <a name="origin"></a>원본

Azure Front Door 표준/프리미엄 원본은 클라이언트 요청을 처리하는 애플리케이션의 호스트 이름 또는 공용 IP를 나타냅니다. Azure Front Door 표준/프리미엄은 애플리케이션이 온-프레미스 데이터 센터 또는 다른 클라우드 공급자를 통해 호스트되는 경우처럼 Azure 원본과 비Azure 원본을 모두 지원합니다. 원본을 데이터베이스 계층 또는 스토리지 계층과 혼동해서는 안 됩니다. 원본은 애플리케이션 백 엔드에 대한 엔드포인트로 표시되어야 합니다. Azure Front Door 표준/프리미엄 원본 그룹에 원본을 추가하는 경우 다음 정보도 추가해야 합니다.

* **원본 형식**: 추가할 리소스 형식. Front Door는 App Service, Cloud Service 또는 Storage에서 애플리케이션 백 엔드의 자동 검색을 지원합니다. Azure의 다른 리소스 또는 Azure 이외의 백 엔드를 원할 경우 **사용자 지정 호스트** 를 선택합니다.

    >[!IMPORTANT]
    >구성 중에 API는 Front Door 환경에서 원본에 액세스할 수 없는지 확인하지 않습니다. Front Door가 원본에 도달할 수 있는지 확인하세요.

* **구독 및 원본 호스트 이름:** 백 엔드 호스트 형식에 대한 **사용자 지정 호스트** 를 선택하지 않은 경우, 적절한 구독과 해당 백 엔드 호스트 이름을 선택하여 백 엔드를 선택합니다.

* **원본 호스트 헤더**: 각 요청에 대해 백 엔드로 전송된 호스트 헤더 값. 자세한 내용은 [원본 호스트 헤더](#hostheader)를 참조하세요.

* **우선 순위:** 모든 트래픽에 대한 기본 원본을 사용하려면 다른 원본에 우선 순위를 할당합니다. 또한 기본 또는 백업 원본을 사용할 수 없는 경우 백업을 제공합니다. 자세한 내용은 [우선 순위](#priority)를 참조하세요.

* **가중치:** 원본 세트에 트래픽을 균등하게 또는 가중치 계수에 따라 분산하려는 경우 여러 원본에 가중치를 할당할 수 있습니다. 자세한 내용은 [가중치](#weighted)를 참조하세요.

### <a name="origin-host-header"></a><a name = "hostheader"></a>원본 호스트 헤더

Azure Front Door 표준/프리미엄에서 원본으로 전달되는 요청은 원본에서 대상 리소스를 검색하는 데 사용하는 호스트 헤더 필드를 포함합니다. 일반적으로 이 필드의 값은 호스트 헤더와 포트가 있는 원본 URI에서 가져옵니다.

예를 들어, `www.contoso.com`에 대해 수행된 요청에는 호스트 헤더 `www.contoso.com`가 있습니다. Azure Portal를 사용하여 원본을 구성하는 경우 이 필드의 기본값은 백 엔드의 호스트 이름입니다. 원본이 `contoso-westus.azurewebsites.net`인 경우 Azure Portal에서 원본 호스트 헤더에 대한 자동 입력 값은 `contoso-westus.azurewebsites.net`가 됩니다. 그러나 이 필드를 명시적으로 설정하지 않고 Azure Resource Manager 템플릿 또는 다른 방법을 사용하는 경우, Front Door는 들어오는 호스트 이름을 호스트 헤더에 대한 값으로 보냅니다. `www.contoso.com`에 대해 요청이 수행되고 원본이 빈 헤더 필드가 있는 `contoso-westus.azurewebsites.net`인 경우, Front Door는 호스트 헤더를 `www.contoso.com`으로 설정합니다.

대부분의 앱 백 엔드(Azure Web Apps, Blob 스토리지, Cloud Services)에서는 호스트 헤더가 백 엔드의 도메인과 일치해야 합니다. 그러나 백 엔드로 라우팅하는 프런트 엔드 호스트는 `www.contoso.net`과 같은 다른 호스트 이름을 사용합니다.

원본에서 백 엔드 호스트 이름과 일치하는 호스트 헤더를 요구하는 경우 백 엔드 호스트 헤더에 백 엔드의 호스트 이름이 포함되어 있는지 확인합니다.

#### <a name="configuring-the-origin-host-header-for-the-origin"></a>원본에 대한 원본 호스트 헤더 구성

원본 그룹 섹션의 원본에 대한 **원본 호스트 헤더** 필드를 구성하려면 다음을 수행합니다.

1. Front Door 리소스를 열고 원본과 함께 구성할 원본 그룹을 선택합니다.

2. 아직 수행하지 않은 경우에는 원본을 추가하고 기존 항목을 편집합니다.

3. 원본 호스트 헤더 필드를 사용자 지정 값으로 설정하거나 비워둡니다. 들어오는 요청의 호스트 이름은 호스트 헤더 값으로 사용됩니다.

## <a name="origin-group"></a>원본 그룹

Azure Front Door 표준/프리미엄의 원본 그룹은 애플리케이션에 대해 비슷한 트래픽을 수신하는 원본 집합을 참조합니다. 즉, 동일한 트래픽을 수신하고 예상되는 동작으로 대응할 수 있는 전 세계 애플리케이션 인스턴스의 논리적 그룹화입니다. 해당 원본은 다른 하위 지역 또는 동일한 하위 지역 내에서 배포됩니다. 모든 원본은 활성/활성 배포 모드이거나 활성/수동 구성으로 정의될 수 있습니다.

원본 그룹은 상태 프로브를 통해 원본을 평가하는 방법을 정의합니다. 또한 부하 분산이 해당 항목 간에 발생하는 방식을 정의합니다.

### <a name="health-probes"></a>상태 프로브

Azure Front Door 표준/프리미엄은 구성된 각 원본에 주기적으로 HTTP/HTTPS 프로브 요청을 보냅니다. 프로브 요청은 최종 사용자 요청의 부하를 분산하기 위해 각 원본의 근접성과 상태를 결정합니다. 원본 그룹에 대한 상태 프로브 설정은 앱 백 엔드의 상태를 폴링하는 방법을 정의합니다. 다음 설정은 부하 분산 구성에 사용할 수 있습니다.

* **경로**: 원본 그룹의 모든 원본에 대한 프로브 요청에 사용되는 URL. 예를 들어, 원본 중 하나가 `contoso-westus.azurewebsites.net`이고 경로가 /probe/test.aspx로 설정되는 경우 프로토콜이 HTTP인 것으로 가정하는 Front Door 환경은 `http://contoso-westus.azurewebsites.net/probe/test.aspx`로 상태 프로브 요청을 보냅니다.

* **프로토콜**: HTTP 또는 HTTPS 프로토콜을 사용하여 Front Door에서 원본으로 상태 프로브 요청을 보낼지 여부를 정의합니다.

* **메서드**: 상태 프로브를 보내는 데 사용할 HTTP 메서드. 옵션에는 GET 또는 HEAD(기본값)가 포함됩니다.
    > [!NOTE]
    > 백 엔드에 대한 부하와 비용을 낮추기 위해 Front Door는 상태 프로브에 HEAD 요청을 사용하도록 권장합니다.

* **간격(초)** : 원본에 대한 상태 프로브의 빈도 또는 각 Front Door 환경에서 프로브를 전송하는 간격을 정의합니다.

    >[!NOTE]
    >더 빠른 장애 조치(failover)를 위해 간격을 더 낮은 값으로 설정합니다. 값이 낮을수록 백 엔드가 수신하는 상태 프로브 용량이 더 많아집니다. 예를 들어 전체적으로 100 Front Door POP에서 간격이 30초로 설정되었다면 각 백 엔드는 분당 200개 프로브 요청을 수신합니다.

자세한 내용은 [상태 프로브](concept-health-probes.md)를 참조하세요.

### <a name="load-balancing-settings"></a>부하 분산 설정

원본 그룹에 대한 부하 분산 설정은 상태 프로브를 평가하는 방법을 정의합니다. 이 설정은 원본이 정상인지 비정상인지를 결정합니다. 또한 원본 그룹의 서로 다른 원본 간에 트래픽 부하를 분산하는 방법도 확인합니다. 다음 설정은 부하 분산 구성에 사용할 수 있습니다.

* **샘플 크기**: 원본 상태 평가에 고려해야 하는 상태 프로브의 샘플 수를 식별합니다.

* **성공적인 샘플 크기:** 앞에서 설명한 대로 샘플 크기, 원본을 정상이라고 부르는 데 필요한 성공적인 샘플 수를 정의합니다. 예를 들어, Front Door 상태 프로브 간격을 30초, 샘플 크기 5, 성공적인 샘플 크기는 3으로 가정합니다. 원본에 대한 상태 프로브를 평가할 때마다 지난 5개 샘플을 150초(5 x 30) 동안 살펴봅니다. 원본을 정상으로 선언하려면 적어도 성공적인 프로브가 3개 필요합니다.

* **대기 시간 민감도(추가 대기 시간):** Azure Front Door 표준/프리미엄에서 대기 시간 측정 민감도 범위 내에서 요청을 원본으로 보낼지 아니면 가장 가까운 백 엔드로 요청을 전송할지를 정의합니다.

자세한 내용은 [최소 대기 시간 기반 라우팅 방법](#latency)을 참조하세요.

## <a name="routing-methods"></a>라우팅 방법

Azure Front Door 표준/프리미엄은 다양한 서비스 엔드포인트에 HTTP/HTTPS 트래픽을 라우팅하는 방법을 결정하는 다양한 트래픽 라우팅 방법을 지원합니다. 클라이언트가 Front Door에 도달하도록 요청하면 구성된 라우팅 메서드가 적용되어 최상의 백 엔드 인스턴스로 요청이 전달되도록 합니다. 

Azure Front Door 표준/프리미엄에서 사용할 수 있는 네 가지 트래픽 라우팅 메서드가 있습니다.

* **[대기 시간](#latency):** 대기 시간 기반 라우팅은 요청이 민감도 범위 내에서 허용 가능한 최저 대기 시간 백 엔드로 전송되도록 해줍니다. 기본적으로 사용자 요청은 네트워크 대기 시간을 기준으로 “가장 가까운” 백 엔드 집합으로 전송됩니다.
* **[우선 순위](#priority):** 모든 트래픽을 서비스하도록 기본 백 엔드를 구성하려면 백 엔드에 우선 순위를 할당할 수 있습니다. 기본 백 엔드를 사용할 수 없게 되는 경우, 보조 백 엔드를 백업으로 사용할 수 있습니다.
* **[가중치](#weighted):** : 백 엔드 집합에 트래픽을 분산하려는 경우 백 엔드에 가중치를 할당할 수 있습니다. 균등하게 배포할지 아니면 가중치 계수에 따를지 여부에 따라 다릅니다.

모든 Azure Front Door 표준/프리미엄 구성에는 백 엔드 상태 및 자동화된 인스턴트 전체 장애 조치(failover)의 모니터링이 포함됩니다. 자세한 내용은 [백 엔드 모니터링](concept-health-probes.md)을 참조하세요. Front Door는 단일 라우팅 메서드를 기반으로 작업할 수 있습니다. 그러나 애플리케이션 요구 사항에 따라 여러 라우팅 방법을 결합하여 최적 라우팅 토폴로지를 빌드할 수도 있습니다.

### <a name="lowest-latencies-based-traffic-routing"></a><a name = "latency"></a>최저 대기 시간 기반 트래픽 라우팅

전 세계적으로 둘 이상의 위치에 백 엔드를 배포하면 트래픽을 최종 사용자에게 ‘가장 가까운’ 위치로 라우팅하여 많은 애플리케이션의 응답성을 향상시킬 수 있습니다. Front Door 구성의 기본 트래픽 라우팅 방법을 통해 최종 사용자의 요청을 해당 요청이 수신된 Front Door 환경에서 가장 가까운 백 엔드로 전달합니다. Azure Front Door의 Anycast 아키텍처와 결합되어 이 방법은 각 최종 사용자가 해당 위치에 따라 최대 성능을 얻을 수 있도록 합니다.

‘가장 가까운’ 백 엔드가 반드시 지리적 거리를 기준으로 가장 가까운 곳은 아닙니다. 대신, Front Door는 네트워크 대기 시간을 측정하여 가장 가까운 백 엔드를 결정합니다.

다음은 전체 의사 결정 흐름입니다.

| 사용할 수 있는 백 엔드 | 우선 순위 | 대기 시간 신호(상태 프로브 기반) | 가중치 |
|-------------| ----------- | ----------- | ----------- |
| 먼저, 상태 프로브에 대해 사용하도록 설정되고 정상인 것으로 보고된(200 OK) 모든 백 엔드를 선택합니다. A, B, C, D, E, F의 6개 백 엔드가 있으며 이 중에서 C는 비정상 상태이고 E는 사용하지 않도록 설정된 경우 사용 가능한 백 엔드 목록은 A, B, D, F입니다.  | 다음으로 사용 가능한 항목 중에서 우선 순위가 가장 높은 백 엔드가 선택됩니다. 백 엔드 A, B, D의 우선 순위가 1이고 백 엔드 F의 우선 순위가 2인 경우 선택한 백 엔드는 A, B, D가 됩니다.| 대기 시간 범위로 백 엔드를 선택합니다(최저 대기 시간 및 지정된 ms에서 대기 시간 민감도). 요청이 도착한 Front Door 환경에서 A가 15ms, B가 30ms, D가 60ms 거리에 있고 대기 시간 민감도가 30ms라면 D가 가장 가까운 백 엔드인 A와 30ms 이상 거리에 있으므로 최저 대기 시간 풀은 백 엔드 A와 B로 구성됩니다. | 마지막으로, Front Door는 지정된 가중치 비율에서 최종 선택된 백 엔드 풀 중에서 트래픽을 라운드 로빈합니다. 예를 들어, 백 엔드 A의 가중치가 5이고 백 엔드 B의 가중치가 8인 경우 트래픽은 백 엔드 5와 8 사이에서 5:8 비율로 분산됩니다. |

>[!NOTE]
> 기본적으로, 대기 시간 민감도 속성은 0ms로 설정됩니다. 즉, 항상 요청을 사용 가능한 가장 빠른 백 엔드로 전달합니다.

### <a name="priority-based-traffic-routing"></a><a name = "priority"></a>우선 순위 기반 트래픽 라우팅

기본 백 엔드가 중단되는 경우를 위해 조직은 일반적으로 둘 이상의 백업 서비스를 배포하여 서비스에 고가용성을 제공하려고 합니다. 업계 전체에서 이 토폴로지는 활성/대기 또는 활성/수동 배포 토폴로지라고 하기도 합니다. '우선 순위' 트래픽 라우팅 메서드를 사용하여 Azure 고객은 이러한 장애 조치(Failover) 패턴을 쉽게 구현할 수 있습니다.

기본 Front Door에는 우선 순위가 동등한 백 엔드 목록이 포함되어 있습니다. 기본적으로, Front Door는 최고 우선 순위 백 엔드(최저 우선 순위 값), 즉 기본 백 엔드 집합으로만 트래픽을 전송합니다. 기본 백 엔드를 사용할 수 없는 경우, Front Door는 트래픽을 보조 백 엔드 집합(우선 순위에서 두 번째로 낮은 값)으로 라우팅합니다. 기본 및 보조 백 엔드를 모두 사용할 수 없는 경우 트래픽은 세 번째 백 엔드 등으로 전송됩니다. 백 엔드의 가용성은 구성된 상태(활성 또는 비활성화)과 상태 프로브의 결정에 따른 지속적인 백 엔드 상태에 기반합니다.

#### <a name="configuring-priority-for-backends"></a>백 엔드에 대한 우선 순위 구성

Front Door 구성의 백 엔드 풀에 있는 각 백 엔드에는 ‘우선 순위’라는 속성이 있으며, 1에서 5 사이의 숫자가 지정될 수 있습니다. Azure Front Door에서 각 백 엔드의 이 속성을 사용하여 백 엔드 우선 순위를 명시적으로 구성합니다. 이 속성은 1에서 5 사이의 값입니다. 값이 낮을수록 더 높은 우선 순위를 나타냅니다. 백 엔드는 우선 순위 값을 공유할 수 있습니다.

### <a name="weighted-traffic-routing-method"></a><a name = "weighted"></a>가중 트래픽 라우팅 방법
'가중' 트래픽 라우팅 메서드를 사용하면 균등하게 트래픽을 분산하거나 미리 정의된 가중치를 사용할 수 있습니다.

가중 트래픽 라우팅 메서드에서는 백 엔드 풀의 Front Door 구성에서 각 백 엔드에 가중치를 할당할 수 있습니다. 가중치는 1에서 1000 사이의 정수입니다. 이 매개 변수는 기본 가중치인 '50'을 사용합니다.

허용되는 대기 시간 민감도를 가진 사용 가능한 백 엔드 목록과 함께 지정된 가중치 비율을 사용하여 트래픽이 라운드 로빈 메커니즘으로 분산됩니다. 대기 시간 민감도를 0밀리초로 설정하면 이 속성은 네트워크 대기 시간이 동일한 두 개의 백 엔드가 있는 경우에만 적용됩니다. 

가중 메서드를 사용하면 다음과 같은 몇 가지 유용한 시나리오를 사용할 수 있습니다.

* **점진적 애플리케이션 업그레이드**: 새 백 엔드로 라우팅할 트래픽 백분율을 제공하고 시간 경과에 따라 트래픽을 다른 백 엔드와 같아질 때까지 점진적으로 늘립니다.
* **Azure에 애플리케이션 마이그레이션**: Azure 및 외부 백 엔드로 백 엔드 풀을 만듭니다. 새 백 엔드를 선호하도록 백 엔드의 가중치를 조정합니다. 새 백 엔드를 비활성화하는 것으로 시작하여 최저 가중치를 할당하고 대부분 트래픽을 처리하는 수준까지 서서히 늘려 점진적으로 설정할 수 있습니다. 마지막으로 선호도가 낮은 백 엔드를 비활성화한 후 풀에서 이들을 제거합니다.  
* **추가 용량을 위한 클라우드 버스트**: Front Door 뒤에 두어 온-프레미스 배포를 클라우드로 신속하게 확장합니다. 클라우드에서 추가 용량이 필요한 경우 더 많은 백 엔드를 추가 또는 활성화하고 각 백 엔드로 분산되는 트래픽 비율을 지정할 수 있습니다.

## <a name="next-steps"></a>다음 단계

[Front Door 표준/프리미엄 만드는](create-front-door-portal.md) 방법 알아보기
