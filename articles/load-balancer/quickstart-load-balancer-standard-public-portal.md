---
title: '빠른 시작: 공용 부하 분산 장치 만들기 - Azure Portal'
titleSuffix: Azure Load Balancer
description: 이 빠른 시작에서는 Azure Portal을 사용하여 부하 분산 장치를 만드는 방법을 보여 줍니다.
author: asudbring
ms.service: load-balancer
ms.topic: quickstart
ms.date: 08/09/2021
ms.author: allensu
ms.custom: mvc
ms.openlocfilehash: 59bd93cf5c17675e99a14484d8a13821e287047a
ms.sourcegitcommit: 692382974e1ac868a2672b67af2d33e593c91d60
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/22/2021
ms.locfileid: "130234570"
---
# <a name="quickstart-create-a-public-load-balancer-to-load-balance-vms-using-the-azure-portal"></a>빠른 시작: Azure Portal을 사용하여 VM 부하를 분산하는 공용 부하 분산 장치 만들기

Azure Portal에서 Azure Load Balancer를 시작하여 공용 부하 분산 장치와 세 개의 가상 머신을 만듭니다.

## <a name="prerequisites"></a>필수 구성 요소

- 활성 구독이 있는 Azure 계정. [체험 계정을 만듭니다](https://azure.microsoft.com/free/?WT.mc_id=A261C142F).

## <a name="sign-in-to-azure"></a>Azure에 로그인

[https://portal.azure.com](https://portal.azure.com)에서 Azure Portal에 로그인합니다.

---

# <a name="standard-sku"></a>[**표준 SKU**](#tab/option-1-create-load-balancer-standard)

>[!NOTE]
>표준 SKU 부하 분산 장치는 프로덕션 워크로드에 추천됩니다.  SKU에 대한 자세한 내용은 **[Azure Load Balancer SKU](skus.md)** 를 참조하세요.

## <a name="create-the-virtual-network"></a>가상 네트워크 만들기

이 섹션에서는 가상 네트워크 및 서브넷을 만듭니다.

1. 포털 맨 위에 있는 검색 상자에 **가상 네트워크** 를 입력합니다. 검색 결과에서 **가상 네트워크** 를 선택합니다.

2. **가상 네트워크** 에서 **+ 만들기** 를 선택합니다.

3. **가상 네트워크 만들기** 의 **기본** 탭에서 다음 정보를 입력하거나 선택합니다.

    | **설정**          | **값**                                                           |
    |------------------|-----------------------------------------------------------------|
    | **프로젝트 세부 정보**  |                                                                 |
    | 구독     | Azure 구독 선택                                  |
    | 리소스 그룹   | **새로 만들기** 를 선택합니다. </br> **이름** 에서 **CreatePubLBQS-rg** 를 입력합니다. </br> **확인** 을 선택합니다. |
    | **인스턴스 세부 정보** |                                                                 |
    | 속성             | **myVNet** 입력                                    |
    | 지역           | **(유럽) 서유럽** 선택 |

4. **IP 주소** 탭을 선택하거나 페이지 하단의 **다음: IP 주소** 단추를 선택합니다.

5. **IP 주소** 탭에서 다음 정보를 입력합니다.

    | 설정            | 값                      |
    |--------------------|----------------------------|
    | IPv4 주소 공간 | **10.1.0.0/16** 입력 |

6. **서브넷 이름** 아래에서 **기본값** 이라는 단어를 선택합니다.

7. **서브넷 편집** 에서 다음 정보를 입력합니다.

    | 설정            | 값                      |
    |--------------------|----------------------------|
    | 서브넷 이름 | **myBackendSubnet** 입력 |
    | 서브넷 주소 범위 | **10.1.0.0/24** 입력 |

8. **저장** 을 선택합니다.

9. **보안** 탭을 선택합니다.

10. **BastionHost** 에서 **사용** 을 선택합니다. 다음 정보를 입력합니다.

    | 설정            | 값                      |
    |--------------------|----------------------------|
    | Bastion 이름 | **myBastionHost** 입력 |
    | AzureBastionSubnet 주소 공간 | **10.1.1.0/27** 입력 |
    | 공용 IP 주소 | **새로 만들기** 를 선택합니다. </br> **이름** 에 대해 **myBastionIP** 를 입력합니다. </br> **확인** 을 선택합니다. |


11. **검토 + 만들기** 탭을 선택하거나 **검토 + 만들기** 단추를 선택합니다.

12. **만들기** 를 선택합니다.

## <a name="create-nat-gateway"></a>NAT 게이트웨이 만들기

이 섹션에서는 가상 네트워크의 리소스에 대한 아웃바운드 인터넷 액세스를 위한 NAT 게이트웨이를 만듭니다. 

1. 포털 맨 위에 있는 검색 상자에 **NAT 게이트웨이** 를 입력합니다. 검색 결과에서 **NAT 게이트웨이** 를 선택합니다.

2. **NAT 게이트웨이** 에서 **+ 만들기** 를 선택합니다.

3. **NAT(Network Address Translation) 게이트웨이 만들기** 에서 다음 정보를 입력하거나 선택합니다.

    | 설정 | 값 |
    | ------- | ----- |
    | **프로젝트 세부 정보** |   |
    | Subscription | 구독을 선택합니다. |
    | Resource group | **CreatePubLBQS-rg** 를 선택합니다. |
    | **인스턴스 세부 정보** |    |
    | NAT 게이트웨이 이름 | **myNATgateway** 를 입력합니다. |
    | 가용성 영역 | **없음** 을 선택합니다. |
    | 유휴 제한 시간(분) | **15** 를 입력합니다. |

4. **아웃바운드 IP** 탭을 선택하거나 페이지 하단에 있는 **다음: 아웃바운드 IP** 단추를 선택합니다.

5. **아웃바운드 IP** 에서 **공용 IP 주소** 옆에 있는 **새 공용 IP 주소 만들기** 를 선택합니다.

6. **공용 IP 주소 추가** 에서 **이름** 에 **myNATGatewayIP** 를 입력합니다.

7. **확인** 을 선택합니다.

8. **서브넷** 탭을 선택하거나 페이지 하단에 있는 **다음: 서브넷** 단추를 선택합니다.

9. **가상 네트워크** 의 **서브넷** 탭에서 **myVNet** 을 선택합니다.

10. **서브넷 이름** 아래에서 **myBackendSubnet** 을 선택합니다.

11. 페이지 하단에서 파란색 **검토 + 만들기** 단추를 선택하거나 **검토 + 만들기** 탭을 선택합니다.

12. **만들기** 를 선택합니다.

## <a name="create-load-balancer"></a><a name="create-load-balancer-resources"></a> 부하 분산 장치 만들기

이 섹션에서는 가상 머신의 부하를 분산하는 영역 중복 부하 분산 장치를 만듭니다. 영역 중복에서 하나 이상의 가용성 영역이 실패할 수 있고 지역에서 한 영역이 정상으로 유지되는 한 데이터 경로는 유효합니다.

부하 분산 장치를 만드는 동안 다음을 구성합니다.

* 프런트 엔드 IP 주소
* 백 엔드 풀
* 인바운드 부하 분산 규칙

1. 포털 맨 위에 있는 검색 상자에 **부하 분산 장치** 를 입력합니다. 검색 결과에서 **부하 분산 장치** 를 선택합니다.

2. **부하 분산 장치** 페이지에서 **만들기** 를 선택합니다.

3. **부하 분산 장치 만들기** 페이지의 **기본 사항** 탭에서 다음 정보를 입력하거나 선택합니다. 

    | 설정                 | 값                                              |
    | ---                     | ---                                                |
    | **프로젝트 세부 정보** |   |
    | Subscription               | 구독을 선택합니다.    |    
    | Resource group         | **CreatePubLBQS-rg** 를 선택합니다. |
    | **인스턴스 세부 정보** |   |
    | 이름                   | **myLoadBalancer** 를 입력합니다.                                   |
    | 지역         | **(유럽) 서유럽** 을 선택합니다.                                        |
    | Type          | **공용** 을 선택합니다.                                        |
    | SKU           | 기본값인 **표준** 을 그대로 둡니다. |
    | 계층          | 기본 **지역** 을 그대로 둡니다. |

    :::image type="content" source="./media/quickstart-load-balancer-standard-public-portal/create-standard-load-balancer.png" alt-text="표준 부하 분산 장치 만들기 기본 사항 탭의 스크린샷" border="true":::

4. 페이지 하단에서 **다음: 프런트 엔드 IP 구성** 을 선택합니다.

5. **프런트 엔드 IP 구성** 에서 **+ 프런트 엔드 IP 추가** 를 선택합니다.

6. **이름** 에 **LoadBalancerFrontend** 를 입력합니다.

7. **IP 버전** 에 대해 **IPv4** 또는 **IPv6** 를 선택합니다.

    > [!NOTE]
    > IPv6는 현재 라우팅 기본 설정 또는 지역 간 부하 분산(글로벌 계층)에서 지원되지 않습니다.

8. **IP 형식** 으로 **IP 주소** 를 선택합니다.

    > [!NOTE]
    > IP 접두사에 대한 자세한 내용은 [Azure 공용 IP 주소 접두사](../virtual-network/ip-services/public-ip-address-prefix.md)를 참조하세요.

9. **공용 IP 주소** 에서 **새로 만들기** 를 선택합니다.

10. **공용 IP 주소 추가** 에서 **이름** 에 **myPublicIP** 를 입력합니다.

11. **가용성 영역** 에서 **영역 중복** 을 선택합니다.

    > [!NOTE]
    > [가용성 영역](../availability-zones/az-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json#availability-zones)이 있는 지역에서는 영역 없음(기본 옵션), 특정 영역 또는 영역 중복을 선택하는 옵션이 있습니다. 선택은 특정 도메인 오류 요구 사항에 따라 달라집니다. 가용성 영역이 없는 지역에서는 이 필드가 표시되지 않습니다. </br> 가용성 영역에 대한 자세한 내용은 [가용성 영역 개요](../availability-zones/az-overview.md)를 참조하세요.

12. **라우팅 기본 설정** 에는 **Microsoft 네트워크** 의 기본값을 그대로 둡니다.

13. **확인** 을 선택합니다.

14. **추가** 를 선택합니다.

15. 페이지 하단에서 **다음: 백 엔드 풀** 을 선택합니다.

16. **백 엔드 풀** 탭에서 **+ 백 엔드 풀 추가** 를 선택합니다.

17. **백 엔드 풀 추가** 의 **이름** 에 **myBackendPool** 을 입력합니다.

18. **가상 네트워크** 에서 **myVNet** 을 선택합니다.

19. **백 엔드 풀 구성** 에 **NIC** 또는 **IP 주소** 를 선택합니다.

20. **IP 버전** 에 대해 **IPv4** 또는 **IPv6** 를 선택합니다.

21. **추가** 를 선택합니다.

22. 페이지 하단에 있는 **다음: 인바운드 규칙** 단추를 선택합니다.

23. **인바운드 규칙** 탭의 **부하 분산 규칙** 에서 **+ 부하 분산 규칙 추가** 를 선택합니다.

24. **부하 분산 규칙 추가** 에서 다음 정보를 입력하거나 선택합니다.

    | 설정 | 값 |
    | ------- | ----- |
    | Name | **myHTTPRule** 입력 |
    | IP 버전 | 요구 사항에 따라 **IPv4** 또는 **IPv6** 를 선택합니다. |
    | 프런트 엔드 IP 주소 | **LoadBalancerFrontend** 를 선택합니다. |
    | 프로토콜 | **TCP** 를 선택합니다. |
    | 포트 | **80** 을 입력합니다. |
    | 백 엔드 포트 | **80** 을 입력합니다. |
    | 백 엔드 풀 | **myBackendPool** 을 선택합니다. |
    | 상태 프로브 | **새로 만들기** 를 선택합니다. </br> **이름** 에 **myHealthProbe** 를 입력합니다. </br> **프로토콜** 에서 **HTTP** 를 선택합니다. </br> 나머지는 기본값으로 두고 **확인** 을 선택합니다. |
    | 세션 지속성 | **없음** 을 선택합니다. |
    | 유휴 제한 시간(분) | **15** 를 입력하거나 선택합니다. |
    | TCP 재설정 | **사용** 을 선택합니다. |
    | 부동 IP | **사용 안 함** 을 선택합니다. |
    | 아웃바운드 SNAT(Source Network Address Translation) | **(권장) 아웃바운드 규칙을 사용하여 백 엔드 풀 멤버에 인터넷 액세스 권한을 제공합니다.** (기본값)를 그대로 둡니다. |

25. **추가** 를 선택합니다.

26. 페이지 하단에 있는 파란색 **검토 + 만들기** 단추를 선택합니다.

27. **만들기** 를 선택합니다.

    > [!NOTE]
    > 이 예제에서는 아웃바운드 인터넷 액세스를 제공하는 NAT 게이트웨이를 만들었습니다. 구성의 아웃바운드 규칙 탭은 NAT 게이트웨이에서 필수가 아닌 선택 사항이므로 무시됩니다. Azure NAT 게이트웨이에 대한 자세한 내용은 [Azure Virtual Network NAT란?](../virtual-network/nat-gateway/nat-overview.md)을 참조하세요.
    > Azure의 아웃바운드 연결에 대한 자세한 내용은 [아웃바운드 연결에 대한 SNAT(Source Network Address Translation)](../load-balancer/load-balancer-outbound-connections.md)를 참조하세요.

## <a name="create-virtual-machines"></a>가상 머신 만들기

이 섹션에서는 세 개의 다른 영역(**영역 1**, **영역 2** 및 **영역 3**)에서 세 개의 VM(**myVM1**, **myVM2** 및 **myVM3**)을 만듭니다. 

이러한 VM은 이전에 만든 부하 분산 장치의 백 엔드 풀에 추가됩니다.

1. 포털 맨 위에 있는 검색 상자에 **가상 머신** 을 입력합니다. 검색 결과에서 **가상 머신** 을 선택합니다.

2. **가상 머신** 에서 **+ 만들기** > **가상 머신** 을 선택합니다.
   
3. **가상 머신 만들기** 의 **기본** 탭에서 값을 입력하거나 선택합니다.

    | 설정 | 값                                          |
    |-----------------------|----------------------------------|
    | **프로젝트 세부 정보** |  |
    | 구독 | Azure 구독 선택 |
    | 리소스 그룹 | **CreatePubLBQS-rg** 선택 |
    | **인스턴스 세부 정보** |  |
    | 가상 머신 이름 | **myVM1** 을 입력합니다. |
    | 지역 | **(유럽) 서유럽** 선택 |
    | 가용성 옵션 | **가용성 영역** 을 선택합니다. |
    | 가용성 영역 | **1** 을 선택합니다. |
    | 이미지 | **Windows Server 2019 Datacenter - Gen1** 을 선택합니다. |
    | Azure Spot 인스턴스 | 선택 안 함(기본값)을 그대로 둡니다. |
    | 크기 | VM 크기를 선택하거나 기본 설정을 사용합니다. |
    | **관리자 계정** |  |
    | 사용자 이름 | 사용자 이름을 입력합니다. |
    | 암호 | 암호를 입력합니다. |
    | 암호 확인 | 암호를 다시 입력합니다. |
    | **인바운드 포트 규칙** |  |
    | 공용 인바운드 포트 | **없음** 을 선택합니다. |

4. **네트워킹** 탭을 선택하거나 **다음: 디스크**, **다음: 네트워킹** 을 차례로 선택합니다.
  
5. [네트워킹] 탭에서 다음을 선택하거나 입력합니다.

    | 설정 | 값 |
    |-|-|
    | **네트워크 인터페이스** |  |
    | 가상 네트워크 | **myVNet** |
    | 서브넷 | **myBackendSubnet** |
    | 공용 IP | **없음** 을 선택합니다. |
    | NIC 네트워크 보안 그룹 추가 | **고급** 을 선택합니다.|
    | 네트워크 보안 그룹 구성 | **새로 만들기** 를 선택합니다. </br> **네트워크 보안 그룹 만들기** 의 **이름** 에서 **myNSG** 를 입력합니다. </br> **인바운드 규칙** 아래에서 **+ 인바운드 규칙 추가** 를 선택합니다. </br> **서비스** 에서 **HTTP** 를 선택합니다. </br> **우선 순위** 아래에서 **100** 을 입력합니다. </br> **이름** 에 **myNSGRule** 을 입력합니다. </br> **추가** 를 선택합니다. </br> **확인** 을 선택합니다. |
    | **부하 분산**.  |
    | 기존 부하 분산 솔루션 뒤에 이 가상 머신을 배치하시겠습니까? | 확인란을 선택합니다. |
    | **부하 분산 설정** |
    | 부하 분산 옵션 | **Azure 부하 분산** 을 선택합니다. |
    | 부하 분산 장치 선택 | **myLoadBalancer** 를 선택합니다.  |
    | 백 엔드 풀 선택 | **myBackendPool** 을 선택합니다. |
   
6. **검토 + 만들기** 를 선택합니다. 
  
7. 설정을 검토한 다음, **만들기** 를 선택합니다.

8. 1~7단계에 따라 다음 값 및 **myVM1** 과 동일한 다른 모든 설정을 사용하여 두 개의 추가 VM을 만듭니다.

    | 설정 | VM 2| VM 3|
    | ------- | ----- |---|
    | Name |  **myVM2** |**myVM3**|
    | 가용성 영역 | **2** |**3**|
    | 네트워크 보안 그룹 | 기존 **myNSG** 를 선택합니다.| 기존 **myNSG** 를 선택합니다.|

[!INCLUDE [ephemeral-ip-note.md](../../includes/ephemeral-ip-note.md)]

# <a name="basic-sku"></a>[**기본 SKU**](#tab/option-2-create-load-balancer-basic)

>[!NOTE]
>표준 SKU 부하 분산 장치는 프로덕션 워크로드에 추천됩니다.  SKU에 대한 자세한 내용은 **[Azure Load Balancer SKU](skus.md)** 를 참조하세요.

## <a name="create-the-virtual-network"></a>가상 네트워크 만들기

이 섹션에서는 가상 네트워크 및 서브넷을 만듭니다.

1. 포털 맨 위에 있는 검색 상자에 **가상 네트워크** 를 입력합니다. 검색 결과에서 **가상 네트워크** 를 선택합니다.

2. **가상 네트워크** 에서 **+ 만들기** 를 선택합니다.

3. **가상 네트워크 만들기** 의 **기본** 탭에서 다음 정보를 입력하거나 선택합니다.

    | **설정**          | **값**                                                           |
    |------------------|-----------------------------------------------------------------|
    | **프로젝트 세부 정보**  |                                                                 |
    | 구독     | Azure 구독 선택                                  |
    | 리소스 그룹   | **새로 만들기** 를 선택합니다. </br> **이름** 에서 **CreatePubLBQS-rg** 를 입력합니다. </br> **확인** 을 선택합니다. |
    | **인스턴스 세부 정보** |                                                                 |
    | 속성             | **myVNet** 입력                                    |
    | 지역           | **(유럽) 서유럽** 선택 |

4. **IP 주소** 탭을 선택하거나 페이지 하단의 **다음: IP 주소** 단추를 선택합니다.

5. **IP 주소** 탭에서 다음 정보를 입력합니다.

    | 설정            | 값                      |
    |--------------------|----------------------------|
    | IPv4 주소 공간 | **10.1.0.0/16** 입력 |

6. **서브넷 이름** 아래에서 **기본값** 이라는 단어를 선택합니다.

7. **서브넷 편집** 에서 다음 정보를 입력합니다.

    | 설정            | 값                      |
    |--------------------|----------------------------|
    | 서브넷 이름 | **myBackendSubnet** 입력 |
    | 서브넷 주소 범위 | **10.1.0.0/27** 입력 |

8. **저장** 을 선택합니다.

9. **보안** 탭을 선택합니다.

10. **BastionHost** 에서 **사용** 을 선택합니다. 다음 정보를 입력합니다.

    | 설정            | 값                      |
    |--------------------|----------------------------|
    | Bastion 이름 | **myBastionHost** 입력 |
    | AzureBastionSubnet 주소 공간 | **10.1.1.0/24** 입력 |
    | 공용 IP 주소 | **새로 만들기** 를 선택합니다. </br> **이름** 에 대해 **myBastionIP** 를 입력합니다. </br> **확인** 을 선택합니다. |


11. **검토 + 만들기** 탭을 선택하거나 **검토 + 만들기** 단추를 선택합니다.

12. **만들기** 를 선택합니다.

## <a name="create-virtual-machines"></a>가상 머신 만들기

이 섹션에서는 세 개의 VM(**myVM1**, **myVM2** 및 **myVM3**)을 만듭니다.

세 개의 VM이 **myAvailabilitySet** 이라는 가용성 집합에 추가됩니다.

1. 포털 맨 위에 있는 검색 상자에 **가상 머신** 을 입력합니다. 검색 결과에서 **가상 머신** 을 선택합니다.

2. **가상 머신** 에서 **+ 만들기** > **가상 머신** 을 선택합니다.
   
3. **가상 머신 만들기** 의 **기본** 탭에서 값을 입력하거나 선택합니다.

    | 설정 | 값                                          |
    |-----------------------|----------------------------------|
    | **프로젝트 세부 정보** |  |
    | 구독 | Azure 구독 선택 |
    | 리소스 그룹 | **CreatePubLBQS-rg** 선택 |
    | **인스턴스 세부 정보** |  |
    | 가상 머신 이름 | **myVM1** 을 입력합니다. |
    | 지역 | **(유럽) 서유럽** 선택 |
    | 가용성 옵션 | **가용성 집합** 을 선택합니다. |
    | 가용성 집합 | **새로 만들기** 를 선택합니다. </br> **이름** 에서 **myAvailabilitySet** 을 입력합니다. </br> **확인** 을 선택합니다. |
    | 이미지 | **Windows Server 2019 Datacenter – 1세대** |
    | Azure Spot 인스턴스 | 선택 안 함(기본값)을 그대로 둡니다. |
    | 크기 | VM 크기를 선택하거나 기본 설정을 사용합니다. |
    | **관리자 계정** |  |
    | 사용자 이름 | 사용자 이름을 입력합니다. |
    | 암호 | 암호를 입력합니다. |
    | 암호 확인 | 암호를 다시 입력합니다. |
    | **인바운드 포트 규칙** |   |
    | 공용 인바운드 포트 | **없음** 을 선택합니다. |

4. **네트워킹** 탭을 선택하거나 **다음: 디스크**, **다음: 네트워킹** 을 차례로 선택합니다.
  
5. [네트워킹] 탭에서 다음을 선택하거나 입력합니다.

    | 설정 | 값 |
    |-|-|
    | **네트워크 인터페이스** |  |
    | 가상 네트워크 | **myVNet** 을 선택합니다. |
    | 서브넷 | **myBackendSubnet** 선택 |
    | 공용 IP | **없음** 을 선택합니다. |
    | NIC 네트워크 보안 그룹 추가 | **고급** 을 선택합니다.|
    | 네트워크 보안 그룹 구성 | **새로 만들기** 를 선택합니다. </br> **네트워크 보안 그룹 만들기** 의 **이름** 에서 **myNSG** 를 입력합니다. </br> **인바운드 규칙** 아래에서 **+ 인바운드 규칙 추가** 를 선택합니다. </br> **대상 포트 범위** 아래에서 **80** 을 입력합니다. </br> **우선 순위** 아래에서 **100** 을 입력합니다. </br> **이름** 에 **myNSGRule** 을 입력합니다. </br> **추가** 를 선택합니다. </br> **확인** 을 선택합니다. |
    | **부하 분산**.  |
    | 기존 부하 분산 솔루션 뒤에 이 가상 머신을 배치하시겠습니까? | 선택 안 함(기본값)을 그대로 둡니다. |
 
6. **관리** 탭을 선택하거나 **다음** > **관리** 를 선택합니다.

7. **관리** 탭에서 다음을 선택하거나 입력합니다.
    
    | 설정 | 값 |
    |---|---|
    | **Monitoring** | |
    | 부트 진단 | **끄기** 를 선택합니다. |

8. **검토 + 만들기** 를 선택합니다. 
  
9. 설정을 검토한 다음, **만들기** 를 선택합니다.

10. 1~9단계에 따라 다음 값 및 **myVM1** 과 동일한 다른 모든 설정을 사용하여 두 개의 추가 VM을 만듭니다.

    | 설정 | VM 2 | VM 3 |
    | ------- | ----- |---|
    | Name |  **myVM2** |**myVM3**|
    | 가용성 집합| **myAvailabilitySet** 을 선택합니다. | **myAvailabilitySet** 을 선택합니다.|
    | 네트워크 보안 그룹 | 기존 **myNSG** 를 선택합니다.| 기존 **myNSG** 를 선택합니다.|

[!INCLUDE [ephemeral-ip-note.md](../../includes/ephemeral-ip-note.md)]

## <a name="create-load-balancer"></a>부하 분산 장치 만들기

이 섹션에서는 가상 머신의 부하를 분산하는 부하 분산 장치를 만듭니다.

부하 분산 장치를 만드는 동안 다음을 구성합니다.

* 프런트 엔드 IP 주소
* 백 엔드 풀
* 인바운드 부하 분산 규칙

1. 포털 맨 위에 있는 검색 상자에 **부하 분산 장치** 를 입력합니다. 검색 결과에서 **부하 분산 장치** 를 선택합니다.

2. **부하 분산 장치** 페이지에서 **+ 만들기** 를 선택합니다.

3. **부하 분산 장치 만들기** 페이지의 **기본 사항** 탭에서 다음 정보를 입력하거나 선택합니다. 

    | 설정                 | 값                                              |
    | ---                     | ---                                                |
    | **프로젝트 세부 정보** |   |
    | Subscription               | 구독을 선택합니다.    |    
    | Resource group         | **CreatePubLBQS-rg** 를 선택합니다. |
    | **인스턴스 세부 정보** |   |
    | 이름                   | **myLoadBalancer** 를 입력합니다.                                   |
    | 지역         | **(유럽) 서유럽** 을 선택합니다.                                        |
    | Type          | **공용** 을 선택합니다.                                        |
    | SKU           | **기본** 을 선택합니다. |

    :::image type="content" source="./media/quickstart-load-balancer-standard-public-portal/create-basic-load-balancer.png" alt-text="기본 부하 분산 장치 만들기 기본 사항 탭의 스크린샷" border="true":::
 
4. 페이지 하단에서 **다음: 프런트 엔드 IP 구성** 을 선택합니다.

5. **프런트 엔드 IP 구성** 에서 **+ 프런트 엔드 IP 추가** 를 선택합니다.

6. **이름** 에 **LoadBalancerFrontend** 를 입력합니다.

7. **IP 버전** 에 대해 **IPv4** 또는 **IPv6** 를 선택합니다.

8. **공용 IP 주소** 에서 **새로 만들기** 를 선택합니다.

9. **공용 IP 주소 추가** 에서 **이름** 에 **myPublicIP** 를 입력합니다.

10. **할당** 에서 **고정** 을 선택합니다.

11. **확인** 을 선택합니다.

12. **추가** 를 선택합니다.

13. 페이지 하단에서 **다음: 백 엔드 풀** 을 선택합니다.

14. **백 엔드 풀** 탭에서 **+ 백 엔드 풀 추가** 를 선택합니다.

15. **백 엔드 풀 추가** 의 **이름** 에 **myBackendPool** 을 입력합니다.

16. **가상 네트워크** 에서 **myVNet** 을 선택합니다.

17. **다음에 연결됨** 에서 **가상 머신** 을 선택합니다.

18. **IP 버전** 에 대해 **IPv4** 또는 **IPv6** 를 선택합니다.

19. **가상 머신** 에서 파란색 **+ 추가** 단추를 선택합니다.

20. **백 엔드 풀에 가상 머신 추가** 에서 **myVM1**, **myVM2** 및 **myVM3** 옆에 있는 상자를 선택합니다.

21. **추가** 를 선택합니다.

22. **백 엔드 풀 추가** 에서 **추가** 를 선택합니다.

23. 페이지 하단에 있는 **다음: 인바운드 규칙** 단추를 선택합니다.

24. **인바운드 규칙** 탭의 **부하 분산 규칙** 에서 **+ 부하 분산 규칙 추가** 를 선택합니다.

25. **부하 분산 규칙 추가** 에서 다음 정보를 입력하거나 선택합니다.

    | 설정 | 값 |
    | ------- | ----- |
    | Name | **myHTTPRule** 입력 |
    | IP 버전 | 요구 사항에 따라 **IPv4** 또는 **IPv6** 를 선택합니다. |
    | 프런트 엔드 IP 주소 | **LoadBalancerFrontend** 를 선택합니다. |
    | 프로토콜 | **TCP** 를 선택합니다. |
    | 포트 | **80** 을 입력합니다. |
    | 백 엔드 포트 | **80** 을 입력합니다. |
    | 백 엔드 풀 | **myBackendPool** 을 선택합니다. |
    | 상태 프로브 | **새로 만들기** 를 선택합니다. </br> **이름** 에 **myHealthProbe** 를 입력합니다. </br> **프로토콜** 에서 **HTTP** 를 선택합니다. </br> 나머지는 기본값으로 두고 **확인** 을 선택합니다. |
    | 세션 지속성 | **없음** 을 선택합니다. |
    | 유휴 제한 시간(분) | **15** 를 입력하거나 선택합니다. |
    | 부동 IP | **사용 안 함** 을 선택합니다. |

26. **추가** 를 선택합니다.

27. 페이지 하단에 있는 파란색 **검토 + 만들기** 단추를 선택합니다.

28. **만들기** 를 선택합니다.

---

## <a name="install-iis"></a>IIS 설치

1. 포털 맨 위에 있는 검색 상자에 **가상 머신** 을 입력합니다. 검색 결과에서 **가상 머신** 을 선택합니다.

2. **myVM1** 을 선택합니다.

2. **개요** 페이지에서 **연결** 을 선택한 다음, **Bastion** 을 선택합니다.

3. **Bastion 사용** 을 선택합니다.

4. VM을 만드는 동안 입력한 사용자 이름과 암호를 입력합니다.

5. **연결** 을 선택합니다.

6. 서버 바탕 화면에서 **Windows 관리 도구** > **Windows PowerShell** 로 이동합니다.

7. PowerShell 창에서 아래 명령을 실행하여 다음을 수행합니다.

    * IIS 서버를 설치합니다.
    * 기본 iisstart.htm 파일을 제거합니다.
    * VM 이름을 표시하는 새 iisstart.htm 파일을 추가합니다.

   ```powershell
    # Install IIS server role
    Install-WindowsFeature -name Web-Server -IncludeManagementTools
    
    # Remove default htm file
    Remove-Item  C:\inetpub\wwwroot\iisstart.htm
    
    # Add a new htm file that displays server name
    Add-Content -Path "C:\inetpub\wwwroot\iisstart.htm" -Value $("Hello World from " + $env:computername)
   ```

8. **myVM1** 이 포함된 Bastion 세션을 닫습니다.

9. 1~8단계를 반복하여 **myVM2** 및 **myVM3** 에 IIS 및 업데이트된 iisstart.htm 파일을 설치합니다.

## <a name="test-the-load-balancer"></a>부하 분산 장치 테스트

1. 페이지 맨 위에 있는 검색 상자에 **부하 분산 장치** 를 입력합니다.  검색 결과에서 **부하 분산 장치** 를 선택합니다.

2. **개요** 페이지의 **공용 IP 주소** 아래에서 부하 분산 장치의 공용 IP 주소를 찾습니다.

3. 공용 IP 주소를 복사하여 브라우저의 주소 표시줄에 붙여넣습니다. IIS 웹 서버의 사용자 지정 VM 페이지가 브라우저에 표시됩니다.

    :::image type="content" source="./media/quickstart-load-balancer-standard-public-portal/load-balancer-test.png" alt-text="부하 분산 장치 테스트 스크린샷":::

## <a name="clean-up-resources"></a>리소스 정리

더 이상 필요하지 않으면 리소스 그룹, 부하 분산 장치 및 모든 관련 리소스를 삭제합니다. 이렇게 하려면 리소스가 포함된 **CreatePubLBQS-rg** 리소스 그룹을 선택한 다음, **삭제** 를 선택합니다.

## <a name="next-steps"></a>다음 단계

이 빠른 시작에서 관련 정보는 다음과 같습니다.

* Azure 표준 또는 기본 Load Balancer를 만들었습니다.
* 세 개의 VM을 부하 분산 장치에 연결했습니다.
* 부하 분산 장치를 테스트했습니다.

Azure Load Balancer에 대해 자세히 알아보려면 계속 진행하세요.
> [!div class="nextstepaction"]
> [Azure Load Balancer란?](load-balancer-overview.md)