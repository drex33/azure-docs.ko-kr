### YamlMime:FAQ
metadata:
  title: FAQ - Azure VM에서 SQL Server 데이터베이스 백업
  description: Azure Backup을 사용하여 Azure VM의 SQL Server 데이터베이스를 백업하는 방법에 대한 일반적인 질문과 대답을 찾습니다.
  ms.reviewer: vijayts
  ms.topic: article
  ms.service: backup
  ms.date: 08/20/2021
  ms.openlocfilehash: d8c04eead12e3c0e96cf72e7492c52ccdb49686e
  ms.sourcegitcommit: dcf1defb393104f8afc6b707fc748e0ff4c81830
  ms.translationtype: HT
  ms.contentlocale: ko-KR
  ms.lasthandoff: 08/27/2021
  ms.locfileid: "123108918"
title: Azure VM 백업에서 실행 중인 SQL Server 데이터베이스에 대한 FAQ
summary: >
  이 문서는 Azure VM(가상 머신)에서 실행되고 [Azure Backup](backup-overview.md) 서비스를 사용하는 SQL Server 데이터베이스 백업에 대한 일반적인 질문과 답변입니다.
sections:
- name: 무시됨
  questions:
  - question: >
      동일한 머신에서 IaaS VM용 Azure Backup과 SQL Server를 사용할 수 있나요?
    answer: >
      예, 동일한 VM에서 VM 백업과 SQL 백업을 모두 사용할 수 있습니다. 이 경우 로그를 자르지 않도록 내부적으로 VM에서 복사 전용 전체 백업을 트리거합니다.
  - question: >
      솔루션이 백업을 다시 시도하거나 자동 복구하나요?
    answer: >
      일부 상황에서 Azure Backup 서비스는 교정 백업을 트리거합니다. 자동 복구는 아래에 언급된 6가지 조건 중 하나에서 발생할 수 있습니다.


      - LSN 유효성 검사 오류로 인해 로그 또는 차등 백업이 실패하면 대신 다음 로그 또는 차등 백업이 전체 백업으로 변환됩니다.

      - 로그 또는 차등 백업 전에 전체 백업이 발생하지 않은 경우 해당 로그 또는 차등 백업이 대신 전체 백업으로 변환됩니다.

      - 최신 전체 백업의 특정 시점이 15일보다 오래된 경우 다음 로그 또는 차등 백업이 대신 전체 백업으로 변환됩니다.

      - 확장 업그레이드로 인해 취소된 모든 백업 작업은 업그레이드가 완료되고 확장이 시작된 후 다시 트리거됩니다.

      - 복원 중에 데이터베이스를 덮어쓰도록 선택하면 다음 로그/차등 백업이 실패하고 대신 전체 백업이 트리거됩니다.

      - 데이터베이스 복구 모델 변경으로 인해 로그 체인을 다시 설정하기 위해 전체 백업이 필요한 경우 다음 일정에 전체 백업이 자동으로 트리거됩니다.
  - question: >
      자동 치료 백업 작업을 취소할 수 있나요?
    answer: >
      아니요, 자동 치료 작업을 취소할 수 없습니다. 그러나 다음 단계를 수행하여 옵트아웃할 수 있습니다.


      1. SQL Server 인스턴스의 *C:\Program Files\Azure Workload Backup\bin 폴더* 에서 **ExtensionSettingsOverrides.json** 파일을 만들거나 편집합니다.

      1. **ExtensionSettingsOverrides.json** 파일에서 *{"EnableAutoHealer": false}* 를 설정합니다.

      1. 변경 내용을 저장하고 파일을 닫습니다.

      1. SQL Server 인스턴스에서 **작업 관리** 를 열고 **AzureWLBackupCoordinatorSvc** 서비스를 다시 시작합니다.
  - question: >
      SQL Server에서 실행되는 동시 백업 수를 제어할 수 있나요?
    answer: >
      예. SQL Server 인스턴스에 대한 영향을 최소화하기 위해 백업 정책이 실행되는 속도를 제한할 수 있습니다. 설정을 변경하려면:


      1. SQL Server 인스턴스의 *C:\Program Files\Azure Workload Backup\bin* 폴더에서 *ExtensionSettingsOverrides.json* 파일을 만듭니다.

      2. *ExtensionSettingsOverrides.json* 파일에서 **DefaultBackupTasksThreshold** 설정을 더 낮은 값(예: 5)으로 변경합니다. <br>
        `{"DefaultBackupTasksThreshold": 5}`
      <br>

      DefaultBackupTasksThreshold의 기본값은 **20** 입니다.


      3. 변경 내용을 저장하고 파일을 닫습니다.

      4. SQL Server 인스턴스에서 **작업 관리자** 를 엽니다. **AzureWLBackupCoordinatorSvc** 서비스를 다시 시작합니다.<br/> <br/>
       이 방법은 백업 애플리케이션이 많은 양의 리소스를 사용하는 경우 도움이 되지만 SQL Server [Resource Governor](/sql/relational-databases/resource-governor/resource-governor)는 들어오는 애플리케이션 요청이 수행할 수 있는 CPU, 물리적 IO 및 메모리 양에 대한 제한을 지정하는 보다 일반적인 방법입니다.

      > [!NOTE]

      > UX에서 계속 진행하여 언제든지 많은 백업을 예약할 수 있습니다. 그러나 위의 예에 따라 슬라이딩 윈도우(5)에서 처리됩니다.
  - question: >
      성공한 백업 작업에 경고가 만들어지나요?
    answer: >
      아니요. 성공한 백업 작업에서는 경고가 생성되지 않습니다. 경고는 실패한 백업 작업에 대해서만 전송됩니다. 포털 경고의 상세한 동작은 [여기](backup-azure-monitoring-built-in-monitor.md)에서 확인하세요. 그러나 성공한 작업에 대해서도 알림을 받고 싶다면 [Azure Monitor를 사용한 모니터링](backup-azure-monitoring-use-azuremonitor.md)을 사용할 수 있습니다.
  - question: >
      백업 작업 메뉴에서 예약된 백업 작업을 볼 수 있나요?
    answer: >
      **백업 작업** 메뉴는 예약된 로그 백업이 매우 빈번할 수 있으므로 예약된 모든 작업과 주문형 작업을 표시합니다. 예약된 로그 작업의 경우 [Azure Monitor를 사용한 모니터링](backup-azure-monitoring-use-azuremonitor.md)을 사용합니다.
  - question: >
      이후 데이터베이스가 백업을 위해 자동으로 추가되나요?
    answer: "예, [자동 보호](backup-sql-server-database-azure-vms.md#enable-auto-protection)로 이 기능을 수행할 수 있습니다.  \n"
  - question: >
      자동 보호된 인스턴스에서 데이터베이스를 삭제하면 백업은 어떻게 되나요?
    answer: "자동 보호된 인스턴스에서 데이터베이스를 삭제해도 해당 데이터베이스의 백업이 계속 시도됩니다. 즉, 삭제된 데이터베이스가 **백업 항목** 에서 비정상 상태로 표시되기 시작하지만 여전히 보호되는 것으로 처리됩니다.\n\n이 데이터베이스의 보호를 중지하는 올바른 방법은 이 데이터베이스에 대해 **데이터 삭제** 시 **백업 중지** 를 수행하는 것입니다.  \n"
  - question: >
      자동 보호된 데이터베이스의 백업 작업을 중지하면 어떻게 되나요?
    answer: >
      **데이터 보존을 사용하여 백업을 중지** 하면 향후 백업이 수행되지 않으며 기존 복구 지점은 그대로 유지됩니다. 데이터베이스는 여전히 보호된 것으로 간주되며 **백업 항목** 아래에 표시됩니다.


      **데이터 삭제로 백업 중지** 를 수행하면 이후 백업이 수행되지 않으며 기존 복구 지점도 삭제됩니다. 데이터베이스는 보호되지 않은 것으로 간주되며 백업 구성의 인스턴스 아래에 표시됩니다. 그러나 수동으로 선택하거나 자동 보호할 수 있는 다른 상향 보호된 데이터베이스와 달리 이 데이터베이스는 회색으로 표시되며 선택할 수 없습니다. 이 데이터베이스를 다시 보호하는 유일한 방법은 인스턴스에서 자동 보호를 사용하지 않도록 설정하는 것입니다. 이제 이 데이터베이스를 선택하고 보호를 구성하거나 인스턴스에서 자동 보호를 다시 사용하도록 설정할 수 있습니다.
  - question: >
      보호된 데이터베이스의 이름을 변경하면 어떻게 되나요?
    answer: >
      이름이 변경된 데이터베이스는 새 데이터베이스로 처리됩니다. 따라서 서비스는 이 상황을 해당 데이터베이스가 발견되지 않은 것처럼 처리하고 백업을 실패 처리합니다.


      이제 데이터베이스를 선택하여 해당 데이터베이스에 대한 보호를 구성할 수 있습니다. 인스턴스에서 자동 보호를 사용하도록 설정하면 이름이 바뀐 데이터베이스가 자동으로 검색되고 보호됩니다.
  - question: >
      자동 보호된 인스턴스에 대해 추가된 데이터베이스가 표시되지 않는 이유는 무엇인가요?
    answer: >
      [자동 보호된 인스턴스에 추가](backup-sql-server-database-azure-vms.md#enable-auto-protection)한 데이터베이스는 보호된 항목 아래에 즉시 표시되지 않을 수 있습니다. 일반적으로 검색은 8시간마다 실행되고 VM의 시스템을 실제로 보호하는 데는 크기에 따라 시간이 더 걸릴 수 있기 때문입니다. 그러나 다음 이미지에 표시된 대로 **DB 다시 검색** 을 선택하여 수동으로 검색을 실행하면 즉시 새 데이터베이스를 검색할 수 있습니다.

        ![새로 추가된 데이터베이스를 수동으로 검색](./media/backup-azure-sql-database/view-newly-added-database.png)
  - question: >
      ADE(Azure Disk Encryption)가 사용하도록 설정된 가상 머신에서 데이터베이스를 보호할 수 있나요?
    answer: >
      예, ADE(Azure Disk Encryption)가 사용하도록 설정된 가상 머신에서 데이터베이스를 보호할 수 있습니다.
  - question: >
      TDE(투명한 데이터 암호화)를 설정하고 데이터베이스를 전체 백업 프로세스를 통해 암호화된 상태로 유지하는 데이터베이스를 보호할 수 있나요?
    answer: >
      예, Azure Backup은 SQL Server 데이터베이스 또는 TDE가 설정된 서버의 백업을 지원합니다. Azure Backup은 Azure 관리형 키 또는 고객 관리형 키(BYOK)를 사용하는 [TDE](/sql/relational-databases/security/encryption/transparent-data-encryption)를 지원합니다.  Backup은 백업 프로세스의 일부로 SQL 암호화를 수행하지 않으므로 백업 시 데이터베이스가 암호화된 상태로 유지됩니다.
  - question: >
      Azure Backup이 데이터 스트림에서 체크섬 작업을 수행하나요?
    answer: >
      데이터 스트림에서 체크섬 작업을 수행합니다. 그러나 이것을 [SQL 체크섬](/sql/relational-databases/backup-restore/enable-or-disable-backup-checksums-during-backup-or-restore-sql-server)과 혼동하지 마세요.

      Azure 워크로드 백업은 백업 작업 중에 데이터 스트림에 대한 체크섬을 계산하고 명시적으로 저장합니다. 그런 다음 이 체크섬 스트림은 참조로 사용되며 데이터의 일관성을 유지하기 위해 복원 작업을 수행하는 동안 데이터 스트림의 체크섬을 사용하여 교차 확인됩니다.
additionalContent: "\n## <a name=\"next-steps\"></a>다음 단계\nAzure VM에서 실행 중인 [SQL Server 데이터베이스를 백업](backup-azure-sql-database.md)하는 방법을 알아봅니다."
