---
title: Defender for Cloud의 Azure 및 하이브리드 머신용 통합 취약성 평가 솔루션
description: Azure 머신에 취약성 평가 솔루션을 설치하여 Microsoft Defender for Cloud에서 Azure 및 하이브리드 머신을 보호하는 데 도움이 되는 권장 사항을 얻습니다.
services: security-center
author: memildin
manager: rkarlin
ms.service: security-center
ms.topic: how-to
ms.date: 10/08/2021
ms.author: memildin
ms.custom: ignite-fall-2021
ms.openlocfilehash: 24c0c2c7454378619926c163ae866f3c2fbd1f23
ms.sourcegitcommit: 106f5c9fa5c6d3498dd1cfe63181a7ed4125ae6d
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/02/2021
ms.locfileid: "131014883"
---
# <a name="defender-for-clouds-integrated-qualys-vulnerability-scanner-for-azure-and-hybrid-machines"></a>Azure 및 하이브리드 머신용 Defender for Cloud의 통합 Qualys 취약성 스캐너

[!INCLUDE [Banner for top of topics](./includes/banner.md)]

모든 사이버 위험 및 보안 프로그램의 핵심 구성 요소는 취약성을 식별하고 분석하는 것입니다. 

Defender for Cloud는 연결된 머신을 정기적으로 검사하여 취약성 평가 도구를 실행하고 있는지 확인합니다.

취약성 평가 솔루션이 배포되지 않은 머신이 발견되면 Defender for Cloud는 다음과 같은 보안 권장 사항을 생성합니다.

**취약성 평가 솔루션을 가상 머신에서 사용하도록 설정해야 함**

이 권장 사항을 사용하여 취약성 평가 솔루션을 Azure 가상 머신 및 Azure Arc 지원 하이브리드 머신에 배포합니다.

사용자의 요구 및 예산에 가장 부합하는 취약성 평가 솔루션을 배포합니다.

- **엔드포인트용 Microsoft Defender의 위협 및 취약성 관리 도구** - 에이전트 또는 정기 검색 없이 센서를 사용하여 실시간으로 취약성 및 잘못된 구성을 검색합니다. 위협 환경, 조직에서의 탐지, 취약한 디바이스에 대한 중요한 정보 및 비즈니스 컨텍스트를 기반으로 취약성의 우선 순위를 지정합니다. [엔드포인트용 Microsoft Defender의 위협 및 취약성 관리를 통한 취약성 조사](deploy-vulnerability-assessment-tvm.md)에서 자세히 알아보세요.

- **통합 취약성 평가 솔루션(Qualys에서 구동)** - Defender for Cloud에는 추가 비용 없이 머신에 대한 취약성 검사가 포함됩니다. Qualys 라이선스 또는 Qualys 계정이 필요하지 않습니다. 모든 것이 Defender for Cloud 내에서 원활하게 처리됩니다. 이 페이지에서는 이 검사기의 세부 정보와 배포 방법에 대한 지침을 제공합니다.

    > [!TIP]
    > 통합 취약성 평가 솔루션은 Azure 가상 머신과 하이브리드 컴퓨터를 모두 지원합니다. 온-프레미스 및 다중 클라우드 머신에 취약성 평가 스캐너를 배포하려면 비 Azure 머신을 Defender [for Cloud에 커넥트](quickstart-onboard-machines.md)설명한 대로 Azure Arc 사용하여 먼저 Azure에 연결합니다.
    >
    > Defender for Cloud의 통합 취약성 평가 솔루션은 Azure Arc 원활하게 작동합니다. Azure Arc 배포하면 머신이 Defender for Cloud에 표시되고 Log Analytics 에이전트가 필요하지 않습니다.

- **BYOL(사용자 라이선스 필요) 솔루션** - Defender for Cloud는 다른 공급업체의 도구 통합을 지원하지만 라이선스 비용, 배포 및 구성을 처리해야 합니다. Defender for Cloud를 사용하여 도구를 배포하면 도구가 누락된 Azure 가상 머신에 대한 정보를 얻을 수 있습니다. Defender for Cloud 내에서 결과를 볼 수도 있습니다. Defender for Cloud에 포함된 Qualys 라이선스 대신 조직의 프라이빗 Qualys 또는 Rapid7 라이선스를 사용하려면 [BYOL 솔루션을 배포하는 방법을](deploy-vulnerability-assessment-byol-vm.md)참조하세요.


## <a name="availability"></a>가용성

|양상|세부 정보|
|----|:----|
|릴리스 상태:|GA(일반 공급)|
|머신 형식(하이브리드 시나리오):|:::image type="icon" source="./media/icons/yes-icon.png"::: Azure 가상 머신<br>:::image type="icon" source="./media/icons/yes-icon.png":::Azure Arc 지원 머신|
|가격 책정:|[서버용 Microsoft Defender 필요](defender-for-servers-introduction.md)|
|필요한 역할 및 권한:|[소유자](../role-based-access-control/built-in-roles.md#owner)(리소스 그룹 수준)는 스캐너를 배포할 수 있습니다.<br>[보안 읽기 권한자](../role-based-access-control/built-in-roles.md#security-reader)는 발견 사항을 볼 수 있습니다.|
|클라우드:|:::image type="icon" source="./media/icons/yes-icon.png"::: 상용 클라우드<br>:::image type="icon" source="./media/icons/no-icon.png"::: 국가/소버린(Azure Government, Azure 중국 21Vianet)|
|||

## <a name="overview-of-the-integrated-vulnerability-scanner"></a>통합 취약성 검사기 개요

Microsoft Defender for Cloud에 포함된 취약성 스캐너는 Qualys에서 구동됩니다. Qualys 검사기는 취약성을 실시간으로 식별하는 최고의 도구 중 하나입니다. [서버용 Microsoft Defender에서만](defender-for-servers-introduction.md)사용할 수 있습니다. Qualys 라이선스 또는 Qualys 계정이 필요하지 않습니다. 모든 것이 Defender for Cloud 내에서 원활하게 처리됩니다.

### <a name="how-the-integrated-vulnerability-scanner-works"></a>통합 취약성 검사기 작동 방식

취약성 검사기 확장은 다음과 같이 작동합니다.

1. **배포** - Microsoft Defender for Cloud는 머신을 모니터링하고 선택한 머신에 Qualys 확장을 배포하기 위한 권장 사항을 제공합니다.

1. **정보 수집** - 확장이 아티팩트를 수집하고 정의된 지역의 Qualys 클라우드 서비스에서 분석을 위해 보냅니다.

1. **분석** - Qualys의 클라우드 서비스는 취약성 평가를 수행하고 해당 결과를 Defender for Cloud에 보냅니다. 

    > [!IMPORTANT]
    > 고객의 개인 정보 보호, 기밀성 및 보안을 보장하기 위해, 고객 정보를 Qualys와 공유하지 않습니다. [Azure에 기본 제공되는 개인 정보 보호 표준에 대해 자세히 알아보세요](https://www.microsoft.com/trust-center/privacy).

1. **보고서** - 검색 결과는 Defender for Cloud에서 사용할 수 있습니다.

[![클라우드용 Microsoft Defender의 기본 제공 취약성 스캐너에 대한 프로세스 흐름 다이어그램입니다.](media/built-in-vulnerability-assessment/va-vm-flow-diagram.png)](media/built-in-vulnerability-assessment/va-vm-flow-diagram.png#lightbox)


## <a name="deploy-the-integrated-scanner-to-your-azure-and-hybrid-machines"></a>Azure 및 하이브리드 머신에 통합 검사기 배포

1. [Azure Portal](https://azure.microsoft.com/features/azure-portal/)Defender **for Cloud를** 엽니다.

1. Defender for Cloud 메뉴에서 **권장 사항** 페이지를 엽니다.

1. **가상 머신에서 취약성 평가 솔루션을 사용하도록 설정해야 함** 권장 사항을 선택합니다.

    :::image type="content" source="./media/deploy-vulnerability-assessment-vm/recommendation-page-machine-groupings.png" alt-text="권장 사항 페이지의 머신 그룹화." lightbox="./media/deploy-vulnerability-assessment-vm/recommendation-page-machine-groupings.png":::

    > [!TIP]
    > 위의 "server16-test" 컴퓨터는 Azure Arc를 사용하도록 설정된 컴퓨터입니다. 온-프레미스 및 다중 클라우드 머신에 취약성 평가 스캐너를 배포하려면 [비 Azure 머신을 Defender for Cloud에 커넥트 참조하세요.](quickstart-onboard-machines.md)
    >
    > Defender for Cloud는 Azure Arc 원활하게 작동합니다. Azure Arc 배포하면 머신이 Defender for Cloud에 표시되고 Log Analytics 에이전트가 필요하지 않습니다.

    컴퓨터는 다음 그룹 중 하나 이상에 표시됩니다.

    * **정상 리소스** – Defender for Cloud가 이러한 머신에서 실행되는 취약성 평가 솔루션을 검색했습니다.
    * **비정상 리소스** – 해당 컴퓨터에 취약성 검사기 확장을 배포할 수 있습니다. 
    * **해당하지 않는 리소스** - 해당 컴퓨터에 취약성 검사기 확장을 배포할 수 없습니다. 이 탭에는 AKS 클러스터의 이미지이거나, 가상 머신 확장 집합에 속하거나, 통합 취약성 검사기에 지원되는 운영 체제에서 실행되고 있지 않은 컴퓨터가 표시될 수 있습니다.

        | **공급업체** | **OS**                         | **지원되는 버전**                                             |
        |------------|--------------------------------|--------------------------------------------------------------------|
        | Microsoft  | Windows                        | 모두                                                                |
        | Red Hat    | Enterprise Linux               | 5.4+, 6, 7-7.9, 8-8.3                                              |
        | Red Hat    | CentOS                         | 5.4+, 6, 7, 7.1-7.8, 8-8.4                                         |
        | Red Hat    | Fedora                         | 22-33                                                              |
        | SUSE       | Linux Enterprise Server(SLES) | 11, 12, 15                                                         |
        | SUSE       | OpenSUSE                       | 12, 13, 15.0-15.2                                                  |
        | SUSE       | Leap                           | 42.1                                                               |
        | Oracle     | Enterprise Linux               | 5.11, 6, 7-7.9, 8-8.4                                              |
        | Debian     | Debian                         | 7.x-10.x                                                           |
        | Ubuntu     | Ubuntu                         | 12.04 LTS, 14.04 LTS, 15.x, 16.04 LTS, 18.04 LTS, 19.10, 20.04 LTS |

1. 비정상 컴퓨터 목록에서 취약성 평가 솔루션을 받을 컴퓨터를 선택하고 **재구성** 을 선택합니다.

    >[!IMPORTANT]
    > 구성에 따라 이 목록이 다르게 나타날 수 있습니다. 
    >
    > - 타사 취약성 검사기가 구성되지 않은 경우 배포할 기회가 제공되지 않습니다.
    > - 선택한 머신이 서버용 Microsoft Defender에서 보호되지 않는 경우 Defender for Cloud 통합 취약성 스캐너 옵션을 사용할 수 없습니다.

    :::image type="content" source="./media/deploy-vulnerability-assessment-vm/recommendation-remediation-options-builtin.png" alt-text="**가상 머신에서 취약성 평가 솔루션을 사용하도록 설정해야 함** 권장 사항 페이지에 응답할 때 선택하려는 수정 흐름 유형에 대한 옵션":::

1. 권장 옵션인 **통합 취약성 스캐너 배포** 및 **계속을** 선택합니다.

1. 추가 확인을 요청하는 메시지가 표시됩니다. **수정** 을 선택합니다.

    몇 분 안에 검사기 확장이 선택한 모든 컴퓨터에 설치됩니다.
    
    확장이 성공적으로 배포되는 즉시 검사가 자동으로 시작됩니다. 그런 다음, 검사가 12시간마다 실행됩니다. 이 간격은 구성할 수 없습니다.

    >[!IMPORTANT]
    > 하나 이상의 컴퓨터에서 배포에 실패하는 경우 허용 목록에 다음 IP를 추가하여 대상 컴퓨터가 Qualys의 클라우드 서비스와 통신할 수 있는지 확인합니다(443 포트 사용 - HTTPS의 경우 기본값).
    >
    >   - `https://qagpublic.qg3.apps.qualys.com` - Qualys 미국 데이터 센터
    >
    >   - `https://qagpublic.qg2.apps.qualys.eu` - Qualys 유럽 데이터 센터
    >
    > 컴퓨터가 유럽 Azure 지역에 있는 경우 해당 아티팩트는 Qualys 유럽 데이터 센터에서 처리됩니다. 다른 곳에 있는 가상 머신에 대한 아티팩트는 미국 데이터 센터로 전송됩니다.


## <a name="automate-at-scale-deployments"></a>대규모 배포 자동화

> [!NOTE]
> 이 섹션에서 설명하는 모든 도구는 [Defender for Cloud의 GitHub 커뮤니티 리포지토리](https://github.com/Azure/Azure-Security-Center/blob/master/README.md)에서 사용할 수 있습니다. Defender for Cloud 배포 전체에서 사용할 스크립트, 자동화 및 기타 유용한 리소스를 찾을 수 있습니다.
>
> 이 도구 중 일부는 대규모 배포를 사용하도록 설정한 후에 연결된 새 머신에만 적용됩니다. 그 외의 도구는 기존 머신에도 배포됩니다. 여러 가지 방법을 결합하여 사용할 수 있습니다.

다음과 같이 몇 가지 방법으로 통합 스캐너의 대규모 배포를 자동화할 수 있습니다.

- **Azure Resource Manager** – 이 방법은 Azure Portal의 **권장 사항 논리 보기** 에서 사용할 수 있습니다. 조정 스크립트에는 자동화에 사용할 수 있는 관련 ARM 템플릿이 포함됩니다. :::image type="content" source="./media/deploy-vulnerability-assessment-vm/deploy-at-scale-remediation-logic.png" alt-text="조정 스크립트에는 자동화에 사용할 수 있는 관련 ARM 템플릿이 포함됩니다." lightbox="./media/deploy-vulnerability-assessment-vm/deploy-at-scale-remediation-logic.png":::
- **DeployIfNotExists 정책** – 새로 만든 모든 머신이 스캐너를 수신하게 하는 [사용자 지정 정책](https://github.com/Azure/Azure-Security-Center/tree/master/Remediation%20scripts/Enable%20the%20built-in%20vulnerability%20assessment%20solution%20on%20virtual%20machines%20(powered%20by%20Qualys)/Azure%20Policy)입니다. **Azure에 배포** 를 선택하고 관련 매개 변수를 설정합니다. 리소스 그룹, 구독 또는 관리 그룹 수준에서 이 정책을 할당할 수 있습니다.
- **PowerShell 스크립트** – ```Update qualys-remediate-unhealthy-vms.ps1``` 스크립트를 사용하여 비정상 상태인 모든 가상 머신에 대해 확장을 배포합니다. 새 리소스에 설치하려면 [Azure Automation](../automation/automation-intro.md)으로 스크립트를 자동화합니다. 이 스크립트는 권장 사항을 통해 검색된 모든 비정상 머신을 찾고 Azure Resource Manager 호출을 실행합니다.
- **Azure Logic Apps** – [샘플 앱](https://github.com/Azure/Azure-Security-Center/tree/master/Workflow%20automation/Install-VulnAssesmentAgent)을 기반으로 논리 앱을 빌드합니다. Defender for Cloud의 [워크플로 자동화](workflow-automation.md) 도구를 사용하여 리소스에 대한 가상 머신 권장 사항에서 취약성 평가 솔루션을 사용하도록 설정해야 할 때마다 스캐너를 배포하도록 논리 **앱을** 트리거합니다.
- **REST API** – Defender for Cloud REST API 사용하여 통합 취약성 평가 솔루션을 배포하려면 다음 URL에 대한 PUT 요청을 만들고 관련 리소스 ID를 추가합니다. ```https://management.azure.com/<resourceId>/providers/Microsoft.Security/serverVulnerabilityAssessments/default?api-Version=2015-06-01-preview```



## <a name="trigger-an-on-demand-scan"></a>주문형 검사 트리거

로컬 또는 원격으로 실행된 스크립트나 GPO(그룹 정책 개체)를 사용하여 머신 자체에서 주문형 검사를 트리거할 수 있습니다. 또는 패치 배포 작업의 마지막 부분에서 소프트웨어 배포 도구에 통합할 수 있습니다. 

다음 명령을 실행하여 주문형 검사를 트리거합니다.

- **Windows 머신**: ```REG ADD HKLM\SOFTWARE\Qualys\QualysAgent\ScanOnDemand\Vulnerability /v "ScanOnDemand" /t REG_DWORD /d "1" /f```
- **Linux 머신**: ```sudo /usr/local/qualys/cloud-agent/bin/cloudagentctl.sh action=demand type=vm```

## <a name="faq---integrated-vulnerability-scanner-powered-by-qualys"></a>FAQ - 통합 취약성 검사기(Qualys 제공)

### <a name="are-there-any-additional-charges-for-the-qualys-license"></a>Qualys 라이선스에 대한 추가 요금이 있나요?
아니요. 기본 제공 스캐너는 서버 사용자를 위한 모든 Microsoft Defender에 무료로 제공됩니다. 권장 사항은 라이선싱 및 구성 정보를 통해 검사기를 배포합니다. 추가 라이선스는 필요하지 않습니다. 

### <a name="what-prerequisites-and-permissions-are-required-to-install-the-qualys-extension"></a>Qualys 확장을 설치하는 데 필요한 필수 구성 요소 및 권한은 무엇입니까?
확장을 배포하려는 모든 머신에 대한 쓰기 권한이 필요합니다.

다른 확장과 마찬가지로 클라우드용 Microsoft Defender 취약성 평가 확장(Qualys 기반)은 Azure Virtual Machine 에이전트를 기반으로 실행됩니다. 따라서 Windows에서는 로컬 호스트로 실행되고 Linux에서는 루트로 실행됩니다.

설치하는 동안 Defender for Cloud는 컴퓨터가 다음 두 Qualys 데이터 센터(HTTPS의 기본값인 포트 443을 통해)와 통신할 수 있는지 확인합니다.

- `https://qagpublic.qg3.apps.qualys.com` - Qualys 미국 데이터 센터
- `https://qagpublic.qg2.apps.qualys.eu` - Qualys 유럽 데이터 센터

확장이 현재 모든 프록시 구성 세부 정보를 수락하지 않습니다.

### <a name="can-i-remove-the-defender-for-cloud-qualys-extension"></a>Defender for Cloud Qualys 확장을 제거할 수 있나요? 
머신에서 확장을 제거하려면 수동으로 또는 프로그래밍 방식 도구를 사용하여 작업을 수행할 수 있습니다. 

다음 세부 정보가 필요합니다.

* Linux에서 확장은 "LinuxAgent.AzureSecurityCenter"이고 게시자 이름은 "Qualys"입니다.
* Windows에서 확장은 "WindowsAgent.AzureSecurityCenter"이고 공급자 이름은 "Qualys"입니다.

### <a name="how-does-the-extension-get-updated"></a>확장은 어떻게 업데이트되나요?
클라우드용 Microsoft Defender 자체 및 다른 모든 Azure 확장과 마찬가지로 Qualys 스캐너의 사소한 업데이트가 백그라운드에서 자동으로 발생할 수 있습니다. 모든 에이전트 및 확장은 자동으로 배포되기 전에 광범위하게 테스트됩니다.

### <a name="why-does-my-machine-show-as-not-applicable-in-the-recommendation"></a>머신이 권장 사항에 "해당 없음"으로 표시되는 이유는 무엇인가요?
권장 사항 세부 정보 페이지는 머신을 **정상**, **비정상**, **해당 없음** 으로 그룹화합니다.

**해당되지 않는** 리소스 그룹에 머신이 있는 경우 Defender for Cloud는 해당 머신에 취약성 스캐너 확장을 배포할 수 없습니다.

머신이 이 탭에 있는 이유는 다음과 같습니다.

- Defender for Cloud로 보호되지 않음 - 위에서 설명한 대로 Microsoft Defender for Cloud에 포함된 취약성 스캐너는 [서버용 Microsoft Defender로](defender-for-servers-introduction.md)보호되는 컴퓨터에서만 사용할 수 있습니다.

- AKS 클러스터이거나, 가상 머신 확장 집합에 속하는 이미지입니다. 이 확장은 PaaS 리소스인 VM을 지원하지 않습니다.

- 지원되는 운영 체제에서 실행되고 있지 않습니다.

    | **공급업체** | **OS**                         | **지원되는 버전**                                             |
    |------------|--------------------------------|--------------------------------------------------------------------|
    | Microsoft  | Windows                        | 모두                                                                |
    | Red Hat    | Enterprise Linux               | 5.4+, 6, 7-7.9, 8-8.3                                              |
    | Red Hat    | CentOS                         | 5.4+, 6, 7, 7.1-7.8, 8-8.4                                         |
    | Red Hat    | Fedora                         | 22-33                                                              |
    | SUSE       | Linux Enterprise Server(SLES) | 11, 12, 15                                                         |
    | SUSE       | OpenSUSE                       | 12, 13, 15.0-15.2                                                  |
    | SUSE       | Leap                           | 42.1                                                               |
    | Oracle     | Enterprise Linux               | 5.11, 6, 7-7.9, 8-8.4                                              |
    | Debian     | Debian                         | 7.x-10.x                                                           |
    | Ubuntu     | Ubuntu                         | 12.04 LTS, 14.04 LTS, 15.x, 16.04 LTS, 18.04 LTS, 19.10, 20.04 LTS |
    |            |                                |                                                                    |

### <a name="what-is-scanned-by-the-built-in-vulnerability-scanner"></a>기본 제공 취약성 검사기는 무엇을 검사하나요?
검사기는 컴퓨터에서 실행되어 컴퓨터 자체의 취약성을 찾습니다. 컴퓨터에서 네트워크를 검색할 수는 없습니다.

### <a name="does-the-scanner-integrate-with-my-existing-qualys-console"></a>검사기가 내 기존 Qualys 콘솔과 통합되나요?
클라우드 확장의 Defender는 기존 Qualys 스캐너와는 별개의 도구입니다. 라이선스 제한은 클라우드의 Microsoft Defender 내 에서만 사용할 수 있다는 의미입니다.

### <a name="how-quickly-will-the-scanner-identify-newly-disclosed-critical-vulnerabilities"></a>검사기가 새로 공개된 중요한 취약성을 얼마나 빨리 식별하나요?
Qualys는 중요한 취약성 공개 후 48시간 이내에 해당 정보를 처리에 통합하고 영향을 받는 컴퓨터를 식별할 수 있습니다.



## <a name="next-steps"></a>다음 단계

> [!div class="nextstepaction"]
> [취약성 평가 솔루션에서 발견된 내용 수정](remediate-vulnerability-findings-vm.md)

또한 Defender for Cloud는 다음에 대 한 취약성 분석을 제공 합니다.

- SQL 데이터베이스 - [취약성 평가 대시보드에서 취약성 평가 보고서 탐색](defender-for-sql-on-machines-vulnerability-assessment.md#explore-vulnerability-assessment-reports)을 참조하세요.
- 이미지 Azure Container Registry- [컨테이너 레지스트리 용 Microsoft Defender를 사용 하 여 취약성에 대 한 이미지 검색을](defender-for-container-registries-usage.md) 참조 하세요.
