---
title: 실수로 인한 삭제 방지 - Azure 파일 공유
description: Azure 파일 공유에 대한 일시 삭제와 데이터 복구를 위해 이러한 삭제 방법을 사용하고 실수로 인한 삭제를 방지하는 방법을 알아봅니다.
author: roygara
ms.service: storage
ms.topic: conceptual
ms.date: 03/29/2021
ms.author: rogarana
ms.subservice: files
services: storage
ms.openlocfilehash: a7841fcafff49dab43d944cfa6fd84e9b7119080
ms.sourcegitcommit: 2eac9bd319fb8b3a1080518c73ee337123286fa2
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/31/2021
ms.locfileid: "123259999"
---
# <a name="prevent-accidental-deletion-of-azure-file-shares"></a>실수로 인한 Azure 파일 공유 삭제 방지
이제 Azure Files에서는 파일 공유에 대해 일시 삭제 기능을 제공합니다. 일시 삭제를 사용하면 애플리케이션 또는 다른 스토리지 계정 사용자가 실수로 삭제한 파일 공유를 복구할 수 있습니다.

## <a name="applies-to"></a>적용 대상
| 파일 공유 유형 | SMB | NFS |
|-|:-:|:-:|
| 표준 파일 공유(GPv2), LRS/ZRS | ![예](../media/icons/yes-icon.png) | ![아니요](../media/icons/no-icon.png) |
| 표준 파일 공유(GPv2), GRS/GZRS | ![예](../media/icons/yes-icon.png) | ![아니요](../media/icons/no-icon.png) |
| 프리미엄 파일 공유(FileStorage), LRS/ZRS | ![예](../media/icons/yes-icon.png) | ![아니요](../media/icons/no-icon.png) |

## <a name="how-soft-delete-works"></a>일시 삭제 작동 방식
Azure 파일 공유에 일시 삭제를 사용으로 설정한 경우 파일 공유를 삭제하면 영구적으로 지우는 대신 일시 삭제 상태로 전환합니다. 일시 삭제된 데이터를 영구적으로 삭제하기 전에 복구할 수 있는 시간을 설정하고, 이 보존 기간 동안 언제든지 공유 삭제를 취소할 수 있습니다. 삭제가 취소되면 공유 및 스냅샷을 포함한 모든 콘텐츠가 삭제 이전 상태로 복원됩니다. 일시 삭제는 파일 공유 수준에서만 작동합니다. 삭제된 개별 파일은 계속 ​​영구적으로 지웁니다.

새 파일 공유 또는 기존 파일 공유에 대해 일시 삭제를 사용하도록 설정할 수 있습니다. 일시 삭제도 이전 버전과 호환되므로 일시 삭제의 보호 기능을 활용하기 위해 애플리케이션을 변경할 필요가 없습니다. 

만료 시간 전에 일시 삭제 상태에서 파일 공유를 영구적으로 삭제하려면 공유의 삭제를 취소하고 일시 삭제를 사용하지 않도록 설정한 다음, 공유를 다시 삭제해야 합니다. 일시 삭제가 해제된 동안에는 해당 스토리지 계정의 다른 파일 공유를 실수로 삭제하기 쉬우므로 일시 삭제를 다시 사용하도록 설정해야 합니다.

일시 삭제된 프리미엄 파일 공유의 경우 파일 공유 할당량(파일 공유의 프로비저닝된 크기)은 공유가 완전히 삭제된 경우 일시 삭제된 공유 만료 날짜가 될 때까지 총 스토리지 계정 할당량 계산에 사용됩니다.

## <a name="configuration-settings"></a>구성 설정

### <a name="enabling-or-disabling-soft-delete"></a>일시 삭제 사용 또는 사용 안 함

스토리지 계정 수준에서 파일 공유에 대한 일시 삭제를 사용하도록 설정하면 일시 삭제 설정이 스토리지 계정 내의 모든 파일 공유에 적용됩니다. 일시 삭제는 기본적으로 새 스토리지 계정에 사용으로 설정되며, 언제든지 사용하거나 사용하지 않게 설정할 수 있습니다. 해당 스토리지 계정의 Azure 파일 공유에 [Azure 파일 공유 백업](../../backup/azure-file-share-backup-overview.md)이 구성되어 있지 않으면 기존 스토리지 계정에 일시 삭제를 사용하도록 자동으로 설정되지 않습니다. Azure 파일 공유 백업이 구성되면 해당 공유의 스토리지 계정에서 Azure 파일 공유에 소프트 삭제를 사용하도록 자동으로 설정됩니다.

파일 공유에 대해 일시 삭제를 사용하도록 설정하고, 일부 파일 공유를 삭제한 다음, 일시 삭제를 사용하지 않도록 설정한 경우, 해당 기간 내에 공유를 저장하면 해당 파일 공유에 액세스하고 복구할 수 있습니다. 일시 삭제를 사용하도록 설정하면 보존 기간도 구성해야 합니다.

### <a name="retention-period"></a>보존 기간

보존 기간은 일시 삭제된 파일 공유가 저장되고 복구에 사용할 수 있는 기간입니다. 명시적으로 삭제된 파일 공유의 경우 데이터가 삭제되면 보존 기간 시계가 시작됩니다. 현재 1-365일의 보존 기간을 지정할 수 있습니다. 언제든지 일시 삭제 보존 기간을 변경할 수 있습니다. 업데이트된 보존 기간은 보존 기간이 업데이트된 후 삭제된 공유에만 적용됩니다. 보존 기간 업데이트가 만료되기 전에 삭제된 공유는 해당 데이터를 삭제할 때 구성된 보존 기간에 따라 만료됩니다.

## <a name="pricing-and-billing"></a>가격 책정 및 대금 청구

표준 및 프리미엄 파일 공유는 모두 프로비저닝된 용량이 아닌, 일시 삭제될 때 사용된 용량에 대해 요금이 청구됩니다. 또한 프리미엄 파일 공유는 일시 삭제 상태에 있는 동안 스냅샷 요금으로 청구됩니다. 표준 파일 공유는 일시 삭제 상태에 있는 동안 일반 요금으로 청구됩니다. 구성된 보존 기간 후 영구적으로 삭제되는 데이터에 대한 비용은 청구되지 않습니다.

일반적인 Azure Files 가격에 대한 자세한 내용은 [Azure Files 가격 페이지](https://azure.microsoft.com/pricing/details/storage/files/)를 참조하세요.

일시 삭제를 처음 사용하도록 설정할 때 기능이 요금에 영향을 주는 방법을 더 잘 이해할 수 있도록 작은 보존 기간을 사용하는 것이 좋습니다.

## <a name="next-steps"></a>다음 단계

일시 삭제를 사용하도록 설정하고 사용하는 방법을 알아보려면 [일시 삭제 사용](storage-files-enable-soft-delete.md)을 계속 진행합니다.
