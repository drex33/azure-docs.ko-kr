### YamlMime:FAQ
metadata:
  title: 온-프레미스 Azure AD 암호 보호 FAQ
  description: 온-프레미스 Active Directory Domain Services 환경에서 Azure AD 암호 보호에 대한 질문과 대답을 검토합니다.
  services: active-directory
  ms.service: active-directory
  ms.subservice: authentication
  ms.topic: how-to
  ms.date: 11/21/2019
  ms.author: justinha
  author: justinha
  manager: daveba
  ms.reviewer: jsimmons
  ms.collection: M365-identity-device-management
  ms.openlocfilehash: 45bfc269c5a584d49101f676de87d9a624e2a793
  ms.sourcegitcommit: c072eefdba1fc1f582005cdd549218863d1e149e
  ms.translationtype: HT
  ms.contentlocale: ko-KR
  ms.lasthandoff: 06/10/2021
  ms.locfileid: "111951864"
title: 온-프레미스 Azure AD 암호 보호에 대한 질문과 대답
summary: 이 섹션에서는 Azure AD 암호 보호에 대한 많은 질문과 대답을 제공합니다.
sections:
- name: 무시됨
  questions:
  - question: >
      일반적인 질문
    answer: >
      ### <a name="what-guidance-should-users-be-given-on-how-to-select-a-secure-password"></a>사용자에게 보안 암호 선택 방법에 대해 어떤 지침을 제공해야 하나요?


      이 항목에 대한 Microsoft의 현재 지침은 다음 링크에서 찾을 수 있습니다.


      [Microsoft 암호 지침](https://www.microsoft.com/research/publication/password-guidance)


      ### <a name="is-on-premises-azure-ad-password-protection-supported-in-non-public-clouds"></a>온-프레미스 Azure AD 암호 보호는 비퍼블릭 클라우드에서 지원되나요?


      온-프레미스 Azure AD 암호 보호는 퍼블릭 클라우드 및 Arlington 클라우드에서 지원됩니다. 다른 클라우드의 가용성에 대한 날짜는 발표되지 않았습니다.


      Azure AD 포털을 사용하면 지원되지 않는 클라우드에서도 온-프레미스 관련 "Windows Server Active Directory 암호 보호" 구성을 수정할 수 있습니다. 이러한 변경은 유지되지만, 그렇지 않은 경우 적용되지 않습니다. 온-프레미스 프록시 에이전트 또는 포리스트의 등록은 지원되지 않는 클라우드에서 지원되지 않으므로 이러한 등록 시도는 항상 실패합니다.


      ### <a name="how-can-i-apply-azure-ad-password-protection-benefits-to-a-subset-of-my-on-premises-users"></a>Azure AD 암호 보호 혜택을 내 온-프레미스 사용자의 하위 집합에 적용하려면 어떻게 해야 할까요?


      지원 안 됨 Azure AD 암호 보호가 배포되고 사용하도록 설정되면 모든 사용자가 차별 없이 동등한 보안 혜택을 받습니다.


      ### <a name="what-is-the-difference-between-a-password-change-and-a-password-set-or-reset"></a>암호 변경과 암호 설정(또는 재설정)의 차이점은 무엇인가요?


      암호 변경은 사용자가 이전 암호를 알고 있음을 증명한 후에 새 암호를 선택하는 경우입니다. 예를 들어 사용자가 Windows에 로그인한 다음, 새 암호를 선택하라는 메시지가 표시되면 암호 변경이 발생합니다.


      암호 설정(때로는 암호 재설정이라고도 함)은 관리자가 Active Directory 사용자 및 컴퓨터와 같은 관리 도구를 사용하여 계정의 암호를 새 암호로 바꾸는 경우입니다. 이 작업에는 높은 수준의 권한(일반적으로 도메인 관리자)이 필요하며, 이 작업을 수행하는 사용자는 일반적으로 이전 암호를 알지 못합니다. 지원 센터 시나리오에서는 암호를 잊어버린 사용자를 지원할 때처럼 암호 설정을 수행하는 경우가 많습니다. 암호를 사용하여 새 사용자 계정을 처음 만들 때도 암호 설정 이벤트가 표시됩니다.


      암호 유효성 검사 정책은 암호 변경 또는 설정을 수행하는지 여부에 관계없이 동일하게 작동합니다. Azure AD 암호 보호 DC 에이전트 서비스는 다양한 이벤트를 기록하여 암호 변경 또는 설정 작업이 수행되었는지 여부를 알려줍니다.  [Azure AD 암호 보호 모니터링 및 로깅](./howto-password-ban-bad-on-premises-monitor.md)을 참조하세요.


      ### <a name="does-azure-ad-password-protection-validate-existing-passwords-after-being-installed"></a>Azure AD 암호 보호가 설치되면 기존 암호의 유효성을 검사하나요?


      아니요 - Azure AD 암호 보호는 암호 변경 또는 설정 작업 중에 일반 텍스트 암호에 대해서만 암호 정책을 적용할 수 있습니다. Active Directory에서 암호를 수락하면 해당 암호의 인증 프로토콜 관련 해시만 유지됩니다. 일반 텍스트 암호는 유지되지 않으므로 Azure AD 암호 보호에서 기존 암호의 유효성을 검사할 수 없습니다.


      Azure AD 암호 보호가 처음 배포된 후 시간이 지남에 따라 기존 암호가 정상적으로 만료되므로 결국에는 모든 사용자와 계정에서 Azure AD 암호 보호를 통해 유효성이 검사된 암호를 사용하게 됩니다. 원하는 경우 사용자 계정 암호를 수동으로 한 번만 만료하여 이 프로세스를 가속화할 수 있습니다.


      "암호 사용 기간 제한 없음"으로 구성된 계정은 수동 만료가 수행되는 경우를 제외하고는 암호를 강제로 변경하지 않습니다.


      ### <a name="why-are-duplicated-password-rejection-events-logged-when-attempting-to-set-a-weak-password-using-the-active-directory-users-and-computers-management-snap-in"></a>Active Directory 사용자 및 컴퓨터 관리 스냅인을 사용하여 약한 암호를 설정하려고 하면 중복 암호 거부 이벤트가 기록되는 이유는 무엇인가요?


      Active Directory 사용자 및 컴퓨터 관리 스냅인은 먼저 Kerberos 프로토콜을 사용하여 새 암호를 설정하려고 시도합니다. 실패 시 스냅인은 레거시(SAM RPC) 프로토콜을 사용하여 두 번째 암호 설정을 시도합니다(사용되는 특정 프로토콜은 중요하지 않음). Azure AD 암호 보호에서 새 암호가 약한 것으로 간주되면 이 스냅인 동작으로 인해 두 개의 암호 재설정 거부 이벤트 집합이 기록됩니다.


      ### <a name="why-are-azure-ad-password-protection-password-validation-events-being-logged-with-an-empty-user-name"></a>Azure AD 암호 보호 암호 유효성 검사 이벤트가 빈 사용자 이름으로 기록되는 이유는 무엇인가요?


      Active Directory는 도메인의 현재 암호 복잡성 요구 사항을 통과하는지 확인하기 위해 [NetValidatePasswordPolicy](/windows/win32/api/lmaccess/nf-lmaccess-netvalidatepasswordpolicy) API를 사용하는 것과 같이 암호를 테스트하는 기능을 지원합니다. 이러한 방식으로 암호의 유효성이 검사되면 Azure AD 암호 보호와 같은 암호 필터 DLL 기반 제품을 통한 유효성 검사도 테스트에 포함되지만 지정된 암호 필터 DLL에 전달된 사용자 이름은 비어 있습니다. 이 시나리오에서 Azure AD 암호 보호는 여전히 현재 유효한 암호 정책을 사용하여 암호의 유효성을 검사하고 결과를 캡처할 수 있도록 이벤트 로그 메시지를 발급하지만, 이벤트 로그 메시지에는 빈 사용자 이름 필드가 있습니다.


      ### <a name="is-it-supported-to-install-azure-ad-password-protection-side-by-side-with-other-password-filter-based-products"></a>Azure AD 암호 보호는 다른 암호 필터 기반 제품과 함께 설치할 수 있나요?


      예. 등록된 여러 암호 필터 DLL에 대한 지원은 Windows의 핵심 기능이며 Azure AD 암호 보호와 관련이 없습니다. 암호가 수락되기 전에 모든 등록된 암호 필터 dll에 동의해야 합니다.


      ### <a name="how-can-i-deploy-and-configure-azure-ad-password-protection-in-my-active-directory-environment-without-using-azure"></a>Azure를 사용하지 않고 Active Directory 환경 내에서 Azure AD 암호 보호를 배포 및 구성하려면 어떻게 해야 하나요?


      지원 안 됨 Azure AD 암호 보호는 온-프레미스 Active Directory 환경으로 지원이 확장되는 Azure 기능입니다.


      ### <a name="how-can-i-modify-the-contents-of-the-policy-at-the-active-directory-level"></a>Active Directory 수준에서 정책의 콘텐츠를 수정하려면 어떻게 해야 하나요?


      지원 안 됨 정책은 Azure AD 포털을 통해서만 관리할 수 있습니다. 이전 질문도 참조하세요.


      ### <a name="why-is-dfsr-required-for-sysvol-replication"></a>sysvol 복제에 DFSR이 필요한가요?


      FRS(DFSR에 대한 선행 기술)는 대부분의 알려진 문제를 포함하며, 최신 버전의 Windows Server Active Directory에서 완전히 지원되지 않습니다. Azure AD 암호 보호의 제로 테스트는 FRS 구성 도메인에서 수행됩니다.


      자세한 내용은 다음 문서를 참조하세요.


      [DFSR로 sysvol 복제를 마이그레이션하는 사례](/archive/blogs/askds/the-case-for-migrating-sysvol-to-dfsr)


      [FRS의 경우 종료가 가깝습니다.](https://blogs.technet.microsoft.com/filecab/2014/06/25/the-end-is-nigh-for-frs)


      도메인에서 아직 DFSR을 사용하지 않는 경우 먼저 DFSR을 사용하도록 마이그레이션한 후에 Azure AD 암호 보호를 설치해야 합니다. 자세한 내용은 다음 링크를 참조하세요.


      [SYSVOL 복제 마이그레이션 가이드: FRS에서 DFS 복제로](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd640019(v=ws.10))


      > [!WARNING]

      > 현재 Azure AD 암호 보호 DC 에이전트 소프트웨어는 FRS를 여전히 sysvol 복제에 사용하는 도메인의 도메인 컨트롤러에 설치되지만, 이 환경에서는 제대로 작동하지 않습니다. 부정적인 추가 부작용으로, 복제에 실패한 개별 파일과 성공한 것처럼 보이지만 모든 파일을 자동으로 복제하지 못하는 sysvol 복원 절차가 있습니다. DFSR의 고유한 이점을 활용하고 Azure AD 암호 보호 배포의 차단도 해제하기 위해 최대한 빨리 DFSR을 사용하도록 도메인을 마이그레이션해야 합니다. 이후 버전의 소프트웨어는 FRS를 여전히 사용하는 도메인에서 실행하는 경우 자동으로 사용하지 않도록 설정됩니다.


      ### <a name="how-much-disk-space-does-the-feature-require-on-the-domain-sysvol-share"></a>이 기능을 사용하려면 도메인 sysvol 공유에 얼마나 많은 공간이 필요한가요?


      정확한 공간 사용량은 Microsoft 전역 금지 목록의 금지된 토큰의 수 및 길이, 테넌트당 사용자 지정 목록, 암호화 오버헤드 등과 같은 요소에 따라 다릅니다. 이러한 목록의 내용은 향후에 증가할 수 있습니다. 이점에 유의하면 이 기능을 위해 도메인 sysvol 공유에 최소 5메가바이트의 공간이 필요한 것으로 예측할 수 있습니다.


      ### <a name="why-is-a-reboot-required-to-install-or-upgrade-the-dc-agent-software"></a>DC 에이전트 소프트웨어를 설치하거나 업그레이드하는 데 다시 부팅이 필요한 이유는 무엇인가요?


      이 요구 사항은 핵심 Windows 동작으로 인해 발생할 수 있습니다.


      ### <a name="is-there-any-way-to-configure-a-dc-agent-to-use-a-specific-proxy-server"></a>특정 프록시 서버를 사용하도록 DC 에이전트를 구성하는 방법이 있나요?


      아니요. 프록시 서버는 상태 비저장 서버이므로 어떤 프록시 서버를 사용하는지는 중요하지 않습니다.


      ### <a name="is-it-okay-to-deploy-the-azure-ad-password-protection-proxy-service-side-by-side-with-other-services-such-as-azure-ad-connect"></a>Azure AD 암호 보호 프록시 서비스를 Azure AD Connect 등의 다른 서비스와 함께 배포해도 되나요?


      예. Azure AD 암호 보호 프록시 서비스와 Azure AD Connect는 서로 직접적으로 충돌하지 않습니다.


      아쉽게도 Azure AD 암호 보호 프록시 소프트웨어를 통해 설치된 Microsoft Azure AD Connect 에이전트 업데이트 서비스 및 [Azure Active Directory 애플리케이션 프록시](../app-proxy/application-proxy.md) 소프트웨어를 통해 설치된 서비스의 버전 간에 비호환성이 있습니다. 이 비호환성으로 인해 에이전트 업데이트 서비스에서 소프트웨어 업데이트를 위해 Azure에 연결하지 못할 수 있습니다. Azure AD 암호 보호 프록시와 Azure Active Directory 애플리케이션 프록시를 동일한 컴퓨터에 설치하지 않는 것이 좋습니다.


      ### <a name="in-what-order-should-the-dc-agents-and-proxies-be-installed-and-registered"></a>DC 에이전트와 프록시는 어떤 순서로 설치하고 등록해야 하나요?


      프록시 에이전트 설치, DC 에이전트 설치, 포리스트 등록 및 프록시 등록의 순서가 지원됩니다.


      ### <a name="should-i-be-concerned-about-the-performance-hit-on-my-domain-controllers-from-deploying-this-feature"></a>이 기능을 배포할 때 도메인 컨트롤러의 성능 저하가 우려될 수 있나요?


      Azure AD 암호 보호 DC 에이전트 서비스는 기존의 정상적인 Active Directory 배포에서 도메인 컨트롤러 성능에 크게 영향을 주지 않아야 합니다.


      대부분의 Active Directory 배포에서 암호 변경 작업은 지정된 도메인 컨트롤러의 전체 워크로드에서 작은 비율을 차지합니다. 예를 들어, 10,000개의 사용자 계정이 있고 MaxPasswordAge 정책이 30일로 설정된 Active Directory 도메인이 있다고 가정합니다. 평균적으로 이 도메인에서는 매일 10000/30=~333번의 암호 변경 작업이 진행되며, 이 수치는 단일 도메인 컨트롤러라고 해도 많지 않은 작업 수입니다. 이러한 단일 DC에 대한 ~333번의 암호 변경이 1시간 동안 수행되는 최악의 시나리오를 고려해보세요. 예를 들어 이 시나리오는 많은 직원이 모두 월요일 아침에 근무하러 오게 될 때 발생할 수 있습니다. 이러한 경우에도, ~333/60분 = 분당 6번 암호 변경이 확인되며, 역시 이 수치는 큰 부하가 아닙니다.


      그러나 현재 도메인 컨트롤러가 이미 성능 제한 수준에서 실행되고 있는 경우(예: CPU, 디스크 공간, 디스크 I/O 등에 따라 혼합됨) 이 기능을 배포하기 전에 추가 도메인 컨트롤러를 추가하거나 사용 가능한 디스크 공간을 확장하는 것이 좋습니다. 위의 sysvol 디스크 공간 사용량에 대한 질문도 참조하세요.


      ### <a name="i-want-to-test-azure-ad-password-protection-on-just-a-few-dcs-in-my-domain-is-it-possible-to-force-user-password-changes-to-use-those-specific-dcs"></a>도메인의 일부 DC에서만 Azure AD 암호 보호를 테스트하려고 합니다. 강제로 사용자 암호 변경에 해당 특정 DC를 사용하도록 할 수 있나요?


      아니요. Windows 클라이언트 OS는 사용자가 암호를 변경할 때 사용되는 도메인 컨트롤러를 제어합니다. 도메인 컨트롤러는 Active Directory 사이트 및 서브넷 할당, 환경 특정 네트워크 구성 등과 같은 요소에 따라 선택됩니다. Azure AD 암호 보호는 이러한 요소를 제어하지 않으며, 사용자의 암호를 변경하기 위해 선택한 도메인 컨트롤러에 영향을 줄 수 없습니다.


      부분적으로 이러한 목표에 도달하는 한 가지 방법은 지정된 Active Directory 사이트의 모든 도메인 컨트롤러에서 Azure AD 암호 보호를 배포하는 것입니다. 이 방법은 해당 사이트에 할당된 Windows 클라이언트와 해당 클라이언트에 로그인하고 암호를 변경하는 사용자를 적절히 검사합니다.


      ### <a name="if-i-install-the-azure-ad-password-protection-dc-agent-service-on-just-the-primary-domain-controller-pdc-will-all-other-domain-controllers-in-the-domain-also-be-protected"></a>PDC(주 도메인 컨트롤러)에만 Azure AD 암호 보호 DC 에이전트 서비스를 설치해도 도메인의 다른 모든 도메인 컨트롤러가 보호되나요?


      아니요. 지정된 비 PDC 도메인 컨트롤러에서 사용자 암호가 변경되면 일반 텍스트 암호가 PDC로 절대 전송되지 않습니다(이 생각은 일반적인 오해임). 지정된 DC에서 새 암호가 수락되면 해당 DC는 해당 암호를 사용하여 암호의 다양한 인증-프로토콜 관련 해시를 만든 후 해당 해시를 디렉터리에 유지합니다. 일반 텍스트 암호는 유지되지 않습니다. 그런 후에 업데이트된 해시가 PDC로 복제됩니다. 경우에 따라 네트워크 토폴로지 및 Active Directory 사이트 디자인과 같은 다양한 요인에 따라 PDC에서 직접 변경될 수 있습니다. (이전 질문을 참조하세요.)


      요약하자면, PDC에서 Azure AD 암호 보호 DC 에이전트 서비스를 배포하려면 도메인에서 100%의 기능 보안 검사에 도달해야 합니다. PDC에만 기능을 배포하면 도메인의 다른 DC는 Azure AD 암호 보호 보안 이점을 얻을 수 없습니다.


      ### <a name="why-is-custom-smart-lockout-not-working-even-after-the-agents-are-installed-in-my-on-premises-active-directory-environment"></a>에이전트를 내 온-프레미스 Active Directory 환경에 설치한 후에도 사용자 지정 스마트 잠금이 작동하지 않는 이유는 무엇인가요?


      사용자 지정 스마트 잠금은 Azure AD에서만 지원됩니다. Azure AD 포털에서 사용자 지정 스마트 잠금 설정을 변경하면 에이전트가 설치된 경우에도 온-프레미스 Active Directory 환경에 영향을 주지 않습니다.


      ### <a name="is-a-system-center-operations-manager-management-pack-available-for-azure-ad-password-protection"></a>Azure AD 암호 보호에 System Center Operations Manager 관리 팩을 사용할 수 있나요?


      아니요.


      ### <a name="why-is-azure-ad-still-rejecting-weak-passwords-even-though-ive-configured-the-policy-to-be-in-audit-mode"></a>정책을 감사 모드로 구성한 경우에도 Azure AD에서 여전히 약한 암호를 거부하는 이유는 무엇인가요?


      감사 모드는 온-프레미스 Active Directory 환경에서만 지원됩니다. Azure AD는 암호를 평가할 때 암시적으로 항상 "적용" 모드에 있습니다.


      ### <a name="my-users-see-the-traditional-windows-error-message-when-a-password-is-rejected-by-azure-ad-password-protection-is-it-possible-to-customize-this-error-message-so-that-users-know-what-really-happened"></a>Azure AD 암호 보호에서 암호를 거부하면 사용자에게 기존 Windows 오류 메시지가 표시됩니다. 사용자가 실제로 무슨 상황이 발생했는지 알 수 있도록 이 오류 메시지를 사용자 지정할 수 있나요?


      아니요. 도메인 컨트롤러에서 암호를 거부하는 경우 사용자에게 표시되는 오류 메시지는 도메인 컨트롤러가 아니라 클라이언트 컴퓨터에서 제어합니다. 이 동작은 기본 Active Directory 암호 정책 또는 암호 필터 기반 솔루션(예: Azure AD 암호 보호)에서 암호를 거부하는지 여부에 따라 수행됩니다.
  - question: >
      암호 테스트 절차
    answer: "소프트웨어의 올바른 작동을 확인하고 [암호 평가 알고리즘](concept-password-ban-bad.md#how-are-passwords-evaluated)을 더 잘 이해하기 위해 다양한 암호에 대한 몇 가지 기본 테스트를 수행할 수 있습니다. 이 섹션에서는 반복 가능한 결과를 생성하도록 설계된 이러한 테스트 방법에 대해 간략하게 설명합니다.\n\n이러한 단계를 수행해야 하는 이유는 무엇일까요? 온-프레미스 Active Directory 환경에서 제어되고 반복 가능한 암호 테스트를 수행하기 어렵게 하는 몇 가지 요인이 있습니다.\n\n* 암호 정책은 Azure에서 구성되고 유지되며, 정책의 복사본은 폴링 메커니즘을 사용하여 온-프레미스 DC 에이전트에서 정기적으로 동기화됩니다. 이 폴링 주기에 고유한 대기 시간으로 인해 혼동이 발생할 수 있습니다. 예를 들어 Azure에서 정책을 구성하지만 DC 에이전트와 동기화하는 것을 잊은 경우 테스트에서 예상 결과를 생성하지 않을 수 있습니다. 폴링 간격은 현재 시간당 한 번으로 하드 코딩되지만, 정책 변경 사이에 한 시간을 기다리는 것은 대화형 테스트 시나리오에 적합하지 않습니다.\n* 새 암호 정책이 도메인 컨트롤러에 동기화되면 다른 도메인 컨트롤러에 복제하는 동안 더 많은 대기 시간이 발생합니다. 이러한 지연으로 인해 아직 최신 버전의 정책을 받지 않은 도메인 컨트롤러에 대해 암호 변경을 테스트하는 경우 예기치 않은 결과가 발생할 수 있습니다.\n* 사용자 인터페이스를 통해 암호 변경을 테스트하면 결과를 신뢰하기 어렵습니다. 예를 들어, 특히 대부분의 암호 사용자 인터페이스(예: Windows Ctrl-Alt-Delete -> 암호 변경 UI)에서 사용자 입력을 숨기므로 잘못된 암호를 사용자 인터페이스에 잘못 입력하기 쉽습니다.\n* 도메인 조인 클라이언트에서 암호 변경을 테스트할 때 사용되는 도메인 컨트롤러를 엄격하게 제어할 수는 없습니다. Windows 클라이언트 OS는 Active Directory 사이트 및 서브넷 할당, 환경 특정 네트워크 구성 등과 같은 요소에 따라 도메인 컨트롤러를 선택합니다.\n\n이러한 문제를 방지하기 위해 아래의 단계는 도메인 컨트롤러에 로그인하는 동안 암호 재설정에 대한 명령줄 테스트를 기반으로 합니다.\n\n> [!WARNING]\n> 이러한 절차는 DC 에이전트 서비스가 중지된 동안 들어오는 모든 암호 변경 및 재설정이 유효성 검사 없이 수락되므로 테스트 환경에서만 사용해야 합니다. 또한 도메인 컨트롤러에 로그인하는 데 내재된 위험이 증가하지 않도록 방지하기 위한 것이기도 합니다.\n\n다음 단계에서는 DC 에이전트를 하나 이상의 도메인 컨트롤러에 설치하고, 하나 이상의 프록시를 설치하고, 프록시와 포리스트를 모두 등록했다고 가정합니다.\n\n1. DC 에이전트 소프트웨어가 설치되고 다시 부팅된 도메인 관리자 자격 증명(또는 테스트 사용자 계정을 만들고 암호를 다시 설정할 수 있는 충분한 권한이 있는 다른 자격 증명)을 사용하여 도메인 컨트롤러에 로그온합니다.\n1. 이벤트 뷰어를 열고, [DC 에이전트 관리자 이벤트 로그](howto-password-ban-bad-on-premises-monitor.md#dc-agent-admin-event-log)로 이동합니다.\n1. 관리자 권한으로 명령 프롬프트 창을 엽니다.\n1. 암호 테스트를 수행하기 위한 테스트 계정을 만듭니다.\n\n   사용자 계정을 만드는 여러 가지 방법이 있지만, 반복적인 테스트 주기 동안 쉽게 수행할 수 있는 명령줄 옵션이 제공됩니다.\n\n   ```text\n   net.exe user <testuseraccountname> /add <password>\n   ```\n\n   아래의 설명을 위해 다음과 같이 \"ContosoUser\"라는 테스트 계정을 만들었다고 가정합니다.\n\n   ```text\n   net.exe user ContosoUser /add <password>\n   ```\n\n1. 웹 브라우저를 열고(도메인 컨트롤러 대신 별도의 디바이스를 사용해야 할 수도 있음), [Azure Portal](https://portal.azure.com)에 로그인한 다음, Azure Active Directory > 보안 > 인증 방법 > 암호 보호로 차례로 이동합니다.\n1. 수행하려는 테스트에 필요한 경우 Azure AD 암호 보호 정책을 수정합니다.  예를 들어 [강제 적용 모드] 또는 [감사 모드]를 구성하거나 사용자 지정 금지 암호 목록에서 금지 용어의 목록을 수정하도록 결정할 수 있습니다.\n1. DC 에이전트 서비스를 중지했다가 다시 시작하여 새 정책을 동기화합니다.\n\n   이 단계는 다양한 방법으로 수행할 수 있습니다. 한 가지 방법은 마우스 오른쪽 단추로 Azure AD 암호 보호 DC 에이전트 서비스를 클릭하고 \"다시 시작\"을 선택하여 [서비스 관리] 관리 콘솔을 사용하는 것입니다. 다른 방법은 명령 프롬프트 창에서 다음과 같이 수행할 수 있습니다.\n\n   ```text\n   net stop AzureADPasswordProtectionDCAgent && net start AzureADPasswordProtectionDCAgent\n   ```\n    \n1. 이벤트 뷰어를 확인하여 새 정책이 다운로드되었는지 확인합니다.\n\n   DC 에이전트 서비스를 중지하고 시작할 때마다 연속적으로 발생하는 두 개의 30006 이벤트가 표시됩니다. 첫 번째 30006 이벤트는 sysvol 공유의 디스크에 캐시된 정책을 반영합니다. 두 번째 30006 이벤트(있는 경우)에는 업데이트된 테넌트 정책 날짜가 있어야 하며, 이 경우 Azure에서 다운로드한 정책을 반영합니다. 테넌트 정책 날짜 값은 현재 Azure에서 정책을 다운로드한 대략적인 타임스탬프를 표시하도록 코딩되어 있습니다.\n   \n   두 번째 30006 이벤트가 표시되지 않으면 계속하기 전에 문제를 해결해야 합니다.\n   \n   30006 이벤트는 다음 예제와 비슷합니다.\n \n   ```text\n   The service is now enforcing the following Azure password policy.\n\n   Enabled: 1\n   AuditOnly: 0\n   Global policy date: ‎2018‎-‎05‎-‎15T00:00:00.000000000Z\n   Tenant policy date: ‎2018‎-‎06‎-‎10T20:15:24.432457600Z\n   Enforce tenant policy: 1\n   ```\n\n   예를 들어 강제 적용 모드와 감사 모드 간에 변경하면 AuditOnly 플래그가 수정됩니다(AuditOnly=0인 위의 정책은 강제 적용 모드임). 사용자 지정 금지 암호 목록에 대한 변경 내용은 위의 30006 이벤트에 직접 반영되지 않으며, 보안상의 이유로 다른 곳에 기록되지 않습니다. 이러한 변경 후 Azure에서 정책을 성공적으로 다운로드하면 수정된 사용자 지정 금지 암호 목록도 포함됩니다.\n\n1. 테스트 사용자 계정에서 새 암호를 다시 설정하여 테스트를 실행합니다.\n\n   이 단계는 명령 프롬프트 창에서 다음과 같이 수행할 수 있습니다.\n\n   ```text\n   net.exe user ContosoUser <password>\n   ```\n\n   명령이 실행된 후 이벤트 뷰어를 살펴보면 명령의 결과에 대한 자세한 정보를 얻을 수 있습니다. 암호 유효성 검사 결과 이벤트는 [DC 에이전트 관리자 이벤트 로그](howto-password-ban-bad-on-premises-monitor.md#dc-agent-admin-event-log) 항목에 설명되어 있습니다. 이러한 이벤트를 사용하여 net.exe 명령의 대화형 출력 외에도 결과의 유효성을 검사합니다.\n\n   예를 들어 Microsoft 전체 목록에서 금지 암호를 설정하려고 합니다(목록은 [문서화되지 않았지만](concept-password-ban-bad.md#global-banned-password-list), 여기서 알려진 금지 용어에 대해 테스트할 수 있음). 다음 예제에서는 정책을 강제 적용 모드로 구성하고 0개의 용어를 사용자 지정 금지 암호 목록에 추가했다고 가정합니다.\n\n   ```text\n   net.exe user ContosoUser PassWord\n   The password does not meet the password policy requirements. Check the minimum password length, password complexity and password history requirements.\n\n   More help is available by typing NET HELPMSG 2245.\n   ```\n\n   설명서에 따라 테스트가 암호 재설정 작업이었으므로 ContosoUser 사용자에 대한 10017 및 30005 이벤트가 표시됩니다.\n\n   10017 이벤트는 다음 예제와 같습니다.\n\n   ```text\n   The reset password for the specified user was rejected because it did not comply with the current Azure password policy. Please see the correlated event log message for more details.\n \n   UserName: ContosoUser\n   FullName: \n   ```\n\n   30005 이벤트는 다음 예제와 같습니다.\n\n   ```text\n   The reset password for the specified user was rejected because it matched at least one of the tokens present in the Microsoft global banned password list of the current Azure password policy.\n \n   UserName: ContosoUser\n   FullName: \n   ```\n\n   재미있었나요? 다른 예제를 사용해 보겠습니다! 이번에는 정책이 감사 모드에 있는 동안 사용자 지정 금지 목록에서 금지된 암호를 설정하려고 합니다. 다음 예제에서는 정책을 감사 모드로 구성하고, \"lachrymose\"라는 용어를 사용자 지정 금지 암호 목록에 추가하고, 위에서 설명한 대로 DC 에이전트 서비스를 순환하여 결과 새 정책을 도메인 컨트롤러에 동기화했다고 가정합니다.\n\n   좋습니다. 이제 금지 암호의 변형을 설정합니다.\n\n   ```text\n   net.exe user ContosoUser LaChRymoSE!1\n   The command completed successfully.\n   ```\n\n   이번에는 정책이 감사 모드에 있으므로 성공했습니다. ContosoUser 사용자에 대한 10025 및 30007 이벤트가 표시됩니다.\n\n   10025 이벤트는 다음 예제와 같습니다.\n   \n   ```text\n   The reset password for the specified user would normally have been rejected because it did not comply with the current Azure password policy. The current Azure password policy is configured for audit-only mode so the password was accepted. Please see the correlated event log message for more details.\n \n   UserName: ContosoUser\n   FullName: \n   ```\n\n   30007 이벤트는 다음 예제와 같습니다.\n\n   ```text\n   The reset password for the specified user would normally have been rejected because it matches at least one of the tokens present in the per-tenant banned password list of the current Azure password policy. The current Azure password policy is configured for audit-only mode so the password was accepted.\n \n   UserName: ContosoUser\n   FullName: \n   ```\n\n1. 계속 진행하여 선택한 다양한 암호를 테스트하고, 이전 단계에서 설명한 절차를 사용하여 이벤트 뷰어에서 결과를 확인합니다. Azure Portal에서 정책을 변경해야 하는 경우 앞에서 설명한 대로 새 정책을 DC 에이전트에 동기화해야 합니다.\n\nAzure AD 암호 보호의 암호 유효성 검사 동작에 대한 제어된 테스트를 수행할 수 있는 절차에 대해 설명했습니다. 도메인 컨트롤러에서 직접 명령줄을 통해 사용자 암호를 다시 설정하는 것은 이러한 테스트를 수행하는 이상한 방법으로 보일 수 있지만, 앞에서 설명한 대로 반복 가능한 결과를 생성하도록 설계되었습니다. 다양한 암호를 테스트할 때 예기치 않은 결과를 설명하는 데 도움이 될 수 있으므로 [암호 평가 알고리즘](concept-password-ban-bad.md#how-are-passwords-evaluated)을 염두에 두어야 합니다.\n\n> [!WARNING]\n> 모든 테스트가 완료되면 테스트를 위해 만든 모든 사용자 계정을 삭제해야 합니다!\n"
  - question: >
      추가 콘텐츠
    answer: >
      다음 링크는 핵심 Azure AD 암호 보호 설명서에는 포함되지 않지만 기능에 대한 유용한 추가 정보를 제공할 수 있습니다.


      [Azure AD 암호 보호가 이제 일반 공급됩니다!](https://techcommunity.microsoft.com/t5/Azure-Active-Directory-Identity/Azure-AD-Password-Protection-is-now-generally-available/ba-p/377487)


      [이메일 피싱 방지 가이드 – 15부: Microsoft Azure AD 암호 보호 서비스 구현(온-프레미스에도!)](http://kmartins.com/2018/10/14/email-phishing-protection-guide-part-15-implement-the-microsoft-azure-ad-password-protection-service-for-on-premises-too/)


      [이제 Azure AD 암호 보호 및 스마트 잠금이 공개 미리 보기로 제공됨](https://techcommunity.microsoft.com/t5/Azure-Active-Directory-Identity/Azure-AD-Password-Protection-and-Smart-Lockout-are-now-in-Public/ba-p/245423#M529)
  - question: >
      Microsoft 프리미어\통합 지원 교육 사용 가능
    answer: >
      Azure AD 암호 보호에 대해 자세히 알아보고 작업 환경에 배포하려는 경우 프리미어 또는 통합 지원 계약이 있는 고객을 위한 Microsoft 자동 관리 서비스의 활용할 수 있습니다. 이 서비스는 Azure Active Directory: 암호 보호라고 합니다. 자세한 내용은 고객 성공 계정 관리자에게 문의하세요.
additionalContent: "## <a name=\"next-steps\"></a>다음 단계\n여기서 답변되지 않은 온-프레미스 Azure AD 암호 보호 질문이 있으면 아래의 피드백 항목을 제출해 주세요. 감사합니다!\n        \n[Azure AD 암호 보호 배포](howto-password-ban-bad-on-premises-deploy.md)"
