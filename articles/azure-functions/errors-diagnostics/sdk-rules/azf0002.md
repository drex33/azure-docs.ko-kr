---
title: 'AZF0002: 비효율적인 HttpClient 사용'
titleSuffix: Azure Functions
description: '코드 분석 규칙 AZF0002: 비효율적인 HttpClient 사용에 대해 알아봅니다.'
author: kashimiz
ms.author: kashimiz
ms.topic: troubleshooting
ms.date: 09/29/2021
ms.openlocfilehash: c2d137ed4a16e3dda3227c66c2e9989b88690ee3
ms.sourcegitcommit: 702df701fff4ec6cc39134aa607d023c766adec3
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/03/2021
ms.locfileid: "131483101"
---
# <a name="azf0002-inefficient-httpclient-usage"></a>AZF0002: 비효율적인 HttpClient 사용

이 규칙은 [HttpClient가](/dotnet/api/system.net.http.httpclient?view=netcore-3.1&preserve-view=true) `[FunctionName]` 데코레이트된 메서드 내에서 인스턴스화될 때 트리거됩니다.

| | 값 |
|-|-|
| **규칙 ID** |AZF0002|
| **범주** |[안정성]|
| **심각도** |경고|

## <a name="rule-description"></a>규칙 설명

[`HttpClient`](/dotnet/api/system.net.http.httpclient?view=netcore-3.1&preserve-view=true)를 사용하여 HTTP 요청을 만들면 소켓 소모에 대한 취약성을 비롯한 몇 가지 문제가 있습니다. 함수 앱에서 함수 `HttpClient` 메서드의 본문에서 생성자를 호출하면 모든 함수 호출이 있는 새 인스턴스가 만들어져 이러한 문제가 강화됩니다. [소비 호스팅 계획에서](../../consumption-plan.md)실행되는 앱의 경우 비효율적인 `HttpClient` 사용량은 계획의 [아웃바운드 연결 제한 을](/azure/azure-resource-manager/management/azure-subscription-service-limits.md#azure-functions-limits)소진할 수 있습니다.

[권장되는 모범 사례는](/dotnet/architecture/microservices/implement-resilient-applications/use-httpclientfactory-to-implement-resilient-http-requests.md) `IHttpClientFactory` 애플리케이션의 특성에 따라 종속성 주입 _또는_ 단일 정적 인스턴스와 함께 [ ]를 사용하는 `HttpClient` 것입니다.

## <a name="how-to-fix-violations"></a>위반 문제를 해결하는 방법

+ 이 `HttpClient` [예제와](../../manage-connections.md?tabs=csharp#http-requests)같이 함수 외부에 정의된 정적 인스턴스로 인스턴스화를 이동합니다.

+ `HttpClient` [종속성 주입을](../../functions-dotnet-dependency-injection.md)통해 [IHttpClientFactory를](/dotnet/api/system.net.http.ihttpclientfactory?view=dotnet-plat-ext-5.0&preserve-view=true) 사용하여 함수에 를 제공합니다. 이 위반을 해결하는 데 권장되는 방법입니다.

## <a name="when-to-suppress-the-rule"></a>규칙을 표시하지 않을 경우

이 규칙은 숨겨서는 안됩니다.

## <a name="next-steps"></a>다음 단계

Azure Functions 연결 관리 모범 사례에 대한 자세한 내용은 Azure Functions [연결 관리를](../../manage-connections.md)참조하세요.

동작 문제 및 관리에 대한 자세한 내용은 `HttpClient` [IHttpClientFactory를 사용하여 복원력 있는 HTTP 요청 구현을 참조하세요.](/dotnet/architecture/microservices/implement-resilient-applications/use-httpclientfactory-to-implement-resilient-http-requests.md)