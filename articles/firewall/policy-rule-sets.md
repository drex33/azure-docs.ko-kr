---
title: Azure 방화벽 정책 규칙 집합
description: Azure 방화벽 정책에는 규칙 컬렉션 그룹, 규칙 컬렉션 및 규칙의 계층이 있습니다.
services: firewall
author: vhorne
ms.service: firewall
ms.topic: article
ms.date: 11/9/2021
ms.author: victorh
ms.openlocfilehash: 5dcb1c84c91e295d7588acccd33ee157937f9fb8
ms.sourcegitcommit: 838413a8fc8cd53581973472b7832d87c58e3d5f
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/10/2021
ms.locfileid: "132139947"
---
# <a name="azure-firewall-policy-rule-sets"></a>Azure 방화벽 정책 규칙 집합

방화벽 정책은 Azure 방화벽에 대 한 보안 및 운영 설정을 포함 하는 최상위 수준 리소스입니다. 방화벽 정책을 사용 하 여 Azure 방화벽에서 트래픽을 필터링 하는 데 사용 하는 규칙 집합을 관리할 수 있습니다. 방화벽 정책은 규칙 컬렉션 그룹, 규칙 컬렉션 및 규칙의 구성 요소를 사용 하 여 계층 구조를 기반으로 하는 규칙 집합을 구성 하 고 우선 순위를 설정 하 고 처리 합니다.

:::image type="content" source="media/policy-rule-sets/policy-rule-sets.png" alt-text="Azure Policy 규칙 집합 계층 구조":::

## <a name="rule-collection-groups"></a>규칙 컬렉션 그룹

규칙 컬렉션 그룹은 규칙 컬렉션을 그룹화 하는 데 사용 됩니다. Azure 방화벽에서 처리할 첫 번째 단위 이며 값에 따라 우선 순위를 따릅니다. 기본 규칙 컬렉션 그룹은 세 가지 이며 우선 순위 값은 설계에 따라 미리 설정 됩니다. 이러한 작업은 다음 순서로 처리 됩니다.


|규칙 컬렉션 그룹 이름  |우선 순위  |
|---------|---------|
|기본 DNAT (대상 네트워크 주소 변환) 규칙 컬렉션 그룹      |100|
|기본 네트워크 규칙 컬렉션 그룹      |200|
|기본 응용 프로그램 규칙 컬렉션 그룹      |300|

기본 규칙 컬렉션 그룹을 삭제 하거나 우선 순위 값을 수정할 수 없는 경우에도 다른 방식으로 처리 순서를 조작할 수 있습니다. 기본 디자인과 다른 우선 순위 순서를 정의 해야 하는 경우 원하는 우선 순위 값으로 사용자 지정 규칙 컬렉션 그룹을 만들 수 있습니다. 이 시나리오에서는 기본 규칙 컬렉션 그룹을 전혀 사용 하지 않으며 사용자가 만든 항목만 사용 하 여 처리 논리를 사용자 지정 합니다.  

규칙 컬렉션 그룹은 하나 또는 여러 규칙 컬렉션을 포함 하며,이 컬렉션은 DNAT, 네트워크 또는 응용 프로그램 형식일 수 있습니다. 예를 들어 규칙 컬렉션 그룹의 동일한 작업 또는 VNet에 속하는 규칙을 그룹화 할 수 있습니다. 

규칙 컬렉션 그룹의 최대 크기는 2mb입니다. 2mb 이상이 필요한 경우 규칙을 여러 규칙 컬렉션 그룹으로 분할할 수 있습니다. 방화벽 정책에는 50 규칙 컬렉션 그룹이 포함 될 수 있습니다.


## <a name="rule-collections"></a>규칙 컬렉션

규칙 컬렉션은 규칙 컬렉션 그룹에 속하며 하나 이상의 규칙을 포함 합니다. 방화벽에서 처리 하는 두 번째 단위 이며 값에 따라 우선 순위 순서를 따릅니다. 규칙 컬렉션에는 정의 된 작업 (허용 또는 거부) 및 우선 순위 값이 있어야 합니다. 정의 된 작업은 규칙 컬렉션 내의 모든 규칙에 적용 됩니다. 우선 순위 값은 규칙 컬렉션이 처리 되는 순서를 결정 합니다.
  
다음과 같은 세 가지 유형의 규칙 컬렉션이 있습니다.

- DNAT
- 네트워크
- 애플리케이션

규칙 컬렉션 형식은 부모 규칙 컬렉션 그룹 범주와 일치 해야 합니다. 예를 들어 DNAT 규칙 컬렉션은 DNAT 규칙 컬렉션 그룹의 일부일 수 있습니다.

## <a name="rules"></a>규칙

규칙은 규칙 컬렉션에 속하며 네트워크에서 허용 되거나 거부 되는 트래픽을 지정 합니다. 방화벽에서 처리할 세 번째 단위 이며 값에 따라 우선 순위 순서를 따르지 않습니다. 규칙에 대 한 처리 논리는 하향식 접근 방식을 따릅니다. 방화벽을 통과 하는 모든 트래픽은 허용 또는 거부 일치에 대해 정의 된 규칙에 의해 평가 됩니다. 트래픽을 허용 하는 규칙이 없는 경우 기본적으로 트래픽이 거부 됩니다.

응용 프로그램 규칙의 경우 기본 제공 [인프라 규칙 컬렉션](infrastructure-fqdns.md) 에서 트래픽이 처리 된 후 기본적으로 거부 됩니다.

세 가지 유형의 규칙이 있습니다.

- DNAT
- 네트워크
- 애플리케이션

### <a name="dnat-rules"></a>DNAT 규칙

DNAT 규칙은 방화벽 공용 IP 주소를 통해 인바운드 트래픽을 허용 하거나 거부 합니다. 개인 IP 주소에 대 한 공용 IP 주소를 변환 하려면 DNAT 규칙을 사용할 수 있습니다. Azure 방화벽 공용 IP 주소를 사용 하 여 인터넷에서 인바운드 트래픽을 수신 대기 하 고 트래픽을 필터링 하 고이 트래픽을 Azure의 내부 리소스로 변환할 수 있습니다.

### <a name="network-rules"></a>네트워크 규칙

네트워크 규칙은 네트워크 계층 (L3) 및 전송 계층 (L4)을 기반으로 인바운드, 아웃 바운드 및 동-서 트래픽을 허용 하거나 거부 합니다.  
IP 주소, 포트 및 프로토콜을 기준으로 트래픽을 필터링 하려는 경우 네트워크 규칙을 사용할 수 있습니다.


### <a name="application-rules"></a>애플리케이션 규칙

응용 프로그램 규칙은 응용 프로그램 계층 (L7)을 기반으로 하는 인바운드, 아웃 바운드 및 동-서 트래픽을 허용 하거나 거부 합니다. Fqdn (정규화 된 도메인 이름) 및 HTTP/HTTPS 프로토콜을 기준으로 트래픽을 필터링 하려는 경우 응용 프로그램 규칙을 사용할 수 있습니다. 


## <a name="next-steps"></a>다음 단계

- Azure 방화벽 규칙 처리: [Azure 방화벽 규칙 구성](rule-processing.md)에 대해 자세히 알아보세요.
