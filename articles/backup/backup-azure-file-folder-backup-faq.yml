### YamlMime:FAQ
metadata:
  title: MARS(Microsoft Azure Recovery Services) 에이전트 – FAQ
  description: Azure Backup을 사용하여 파일 및 폴더 백업에 대한 일반적인 질문을 해결합니다.
  ms.topic: article
  ms.service: backup
  ms.date: 04/05/2021
  ms.openlocfilehash: ff157a3d8e744dffd314525a053b8c3ca1ab8999
  ms.sourcegitcommit: 05dd6452632e00645ec0716a5943c7ac6c9bec7c
  ms.translationtype: HT
  ms.contentlocale: ko-KR
  ms.lasthandoff: 08/17/2021
  ms.locfileid: "122252500"
title: 질문과 대답 - MARS(Microsoft Azure Recovery Services) 에이전트
summary: >
  이 문서에서는 [Azure Backup](backup-overview.md) 서비스에서 MARS(Microsoft Azure Recovery Services) 에이전트를 사용하여 데이터를 백업하는 것과 관련된 일반적인 질문에 대한 답변입니다.
sections:
- name: 백업 구성
  questions:
  - question: >
      MARS 에이전트의 최신 버전은 어디에서 다운로드할 수 있나요?
    answer: >
      Windows Server 머신, System Center DPM 및 Microsoft Azure Backup 서버를 백업할 때 사용되는 최신 MARS 에이전트를 [다운로드](https://aka.ms/azurebackup_agent)할 수 있습니다.
  - question: >
      자격 증명 모음 자격 증명 파일은 어디에서 다운로드할 수 있나요?
    answer: >
      Azure Portal에서 자격 증명 모음의 **속성** 으로 이동합니다. **백업 자격 증명** 에서 **이미 최신 Recovery Services 에이전트를 사용하고 있음** 확인란을 선택합니다. **다운로드** 를 선택합니다.


      ![자격 증명 다운로드](./media/backup-azure-file-folder-backup-faq/download-credentials.png)
  - question: >
      자격 증명 모음 자격 증명은 얼마 동안 유효하나요?
    answer: >
      자격 증명 모음 자격 증명은 10일이 지나면 만료됩니다. 자격 증명 파일이 만료되면 Azure Portal에서 파일을 다시 다운로드합니다.
  - question: >
      암호에 허용되는 문자는 무엇인가요?
    answer: >
      암호는 ASCII 문자 집합의 문자를 사용해야 하며 [ASCII 값은 127보다 작거나 같아야](/office/vba/language/reference/user-interface-help/character-set-0127) 합니다.
  - question: >
      어떤 드라이브에서 파일과 폴더를 백업할 수 있나요?
    answer: >
      다음 유형의 드라이브 및 볼륨은 백업할 수 없습니다.


      * 이동식 미디어: 모든 백업 항목 원본은 고정된 것으로 보고해야 합니다.

      * 읽기 전용 볼륨: VSS(볼륨 섀도 복사본 서비스)가 작동하려면 볼륨에 데이터 쓰기가 가능해야 합니다.

      * 오프라인 볼륨: VSS가 작동하려면 볼륨이 온라인 상태여야 합니다.

      * 네트워크 공유: 온라인 백업을 사용하여 백업할 서버의 로컬 볼륨이어야 합니다.

      * BitLocker로 보호된 볼륨: 볼륨의 잠금을 해제해야 백업이 실행될 수 있습니다.

      * 파일 시스템 식별: NTFS가 유일하게 지원되는 파일 시스템입니다.
  - question: >
      지원되는 파일 및 폴더 유형은 무엇인가요?
    answer: >
      백업에 지원되는 파일 및 폴더 유형에 대해 [자세히 알아보세요](backup-support-matrix-mars-agent.md#supported-file-types-for-backup).
  - question: "MARS 에이전트를 사용하여 Azure VM의 파일 및 폴더를 백업할 수 있나요?  \n"
    answer: >
      예. Azure Backup은 Azure VM 에이전트에 대한 VM 확장을 사용하여 Azure VM에 대한 VM 수준 백업을 제공합니다. VM의 게스트 Windows 운영 체제에 있는 파일과 폴더를 백업하려는 경우 MARS 에이전트를 설치하여 백업할 수 있습니다.
  - question: >
      MARS 에이전트를 사용하여 Azure VM의 임시 스토리지에 있는 파일 및 폴더를 백업할 수 있나요?
    answer: >
      예. MARS 에이전트를 설치하고 게스트 Windows 운영 체제의 파일과 폴더를 임시 스토리지에 백업합니다.


      * 임시 스토리지 데이터가 초기화된 경우 백업 작업이 실패합니다.

      * 임시 스토리지 데이터가 삭제된 경우 비휘발성 스토리지에만 복원할 수 있습니다.
  - question: >
      다른 지역에 서버를 등록하려면 어떻게 해야 하나요?
    answer: >
      백업 데이터는 서버가 등록된 자격 증명 모음의 데이터 센터로 전송됩니다. 데이터 센터를 변경하는 가장 쉬운 방법은 에이전트를 제거하고 다시 설치한 후 필요한 지역의 새 자격 증명 모음에 머신을 등록하는 것입니다.
  - question: >
      MARS 에이전트가 Windows Server 2012 중복 제거를 지원하나요?
    answer: >
      예. MARS 에이전트는 백업 작업을 준비할 때 중복 제거된 데이터를 일반 데이터로 변환합니다. 그런 다음, 백업에 대한 데이터를 최적화하고 데이터를 암호화한 후 자격 증명 모음으로 암호화된 데이터를 보냅니다.
  - question: >
      MARS 에이전트를 설치하고 구성하려면 관리자 권한이 필요한가요?
    answer: >
      예, MARS 에이전트를 설치하고 MARS 콘솔을 사용하여 백업을 구성하려면 사용자가 보호된 서버에서 로컬 관리자여야 합니다.
  - question: >
      자격 증명 모음 구독을 다른 Azure AD 디렉터리로 전송하면 MARS 에이전트 백업에 어떤 영향이 있나요?
    answer: "Azure AD 디렉터리의 변경 내용은 MARS 에이전트 백업에 영향을 주지 않습니다. \n"
- name: 백업 관리
  questions:
  - question: >
      백업용으로 구성된 Windows 머신의 FQDN 이름을 바꾸거나 변경하면 어떻게 되나요?
    answer: >
      도메인에 머신 추가, 다른 도메인으로 머신 이동 또는 도메인에서 머신 분리 등의 작업을 수행하여 Windows 머신의 이름을 바꾸거나 FQDN을 변경하면 현재 구성된 모든 백업이 중지됩니다.


      * 복구 서비스 자격 증명 모음에 새 머신 이름을 등록해야 합니다.

      * 자격 증명 모음에 새 이름을 등록하면 첫 번째 작업은 *전체* 백업입니다.

      * 이전 서버 이름으로 자격 증명 모음에 백업된 데이터를 복원해야 하는 경우 옵션을 사용하여 데이터 복구 마법사의 대체 위치로 복원합니다. [자세한 정보](backup-azure-restore-windows-server.md#use-instant-restore-to-restore-data-to-an-alternate-machine).
  - question: >
      백업의 최대 파일 경로 길이는 얼마인가요?
    answer: "MARS 에이전트는 NTFS를 사용하며 [Windows API](/windows/win32/FileIO/naming-a-file#fully-qualified-vs-relative-paths)에 의해 제한되는 파일 경로 길이 사양을 사용합니다. 보호할 파일이 허용된 값보다 길면 상위 폴더 또는 디스크 드라이브를 백업합니다.  \n"
  - question: >
      파일 경로에 허용되는 문자는 무엇인가요?
    answer: >
      MARS 에이전트는 NTFS를 사용하며 파일 이름/경로에 [지원되는 문자](/windows/win32/FileIO/naming-a-file#naming-conventions)를 허용합니다.
  - question: "\"Azure Backup이 이 서버에 대해 구성되지 않았습니다.\"라는 경고가 나타납니다.\n"
    answer: >
      이 경고는 백업 정책을 구성한 경우에도 로컬 서버에 저장된 백업 일정 설정이 백업 자격 증명 모음에 저장된 설정과 동일하지 않을 때 나타날 수 있습니다.


      * 서버 또는 설정이 알려진 양호한 상태로 복구되면 백업 일정이 동기화되지 않을 수 있습니다.

      * 이 경고가 표시되면 백업 정책을 다시 [구성](backup-azure-manage-windows-server.md)한 다음, 주문형 백업을 실행하여 로컬 서버를 Azure와 다시 동기화합니다.
  - question: >
      Azure Portal의 백업 작업에서 몇 가지 작업이 진행 중 상태로 오랫동안 멈춰 있습니다. 이를 어떻게 해결할 수 있나요?
    answer: >
      네트워크 연결 문제, 머신 종료 또는 프로세스 종료 등의 이유로 인해 작업을 완료할 수 없는 경우 이 문제가 발생할 수 있습니다. 여기에서는 사용자 작업이 필요하지 않습니다. 이러한 작업은 30일 후에 자동으로 **실패** 로 표시됩니다. MARS 에이전트를 사용하여 주문형 백업 작업을 실행하는 방법에 대해 [자세히 알아보세요](backup-windows-with-mars-agent.md#run-an-on-demand-backup).
- name: 백업 캐시 폴더 관리
  questions:
  - question: >
      캐시 폴더의 최소 크기 요구 사항은 무엇인가요?
    answer: >
      캐시 폴더의 크기는 백업할 데이터의 양을 결정합니다.


      * 캐시 폴더 볼륨에는 전체 백업 데이터 크기의 최소 5-10%에 해당하는 여유 공간이 있어야 합니다.

      * 볼륨의 여유 공간이 5% 미만인 경우 볼륨 크기를 늘리거나 [이 단계](#how-do-i-change-the-cache-location-for-the-mars-agent-)에 따라 충분한 공간이 있는 볼륨으로 캐시 폴더를 이동합니다.

      * Windows 시스템 상태를 백업하는 경우 캐시 폴더가 포함된 볼륨에 30-35GB의 여유 공간이 추가로 필요합니다.
  - question: >
      스크래치 폴더가 유효하고 액세스 가능한지 어떻게 확인하나요?
    answer: >
      1. 기본적으로 스크래치 폴더는 `\Program Files\Microsoft Azure Recovery Services Agent\Scratch`에 있습니다.

      2. 스크래치 폴더 위치의 경로가 아래 표시된 레지스트리 키 항목의 값과 일치하는지 확인하세요.

          | 레지스트리 경로 | 레지스트리 키 | 값 |
          | --- | --- | --- |
          | `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\Config` |ScratchLocation |*새 캐시 폴더 위치* |
          | `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\Config\CloudBackupProvider` |ScratchLocation |*새 캐시 폴더 위치* |
  - question: >
      MARS 에이전트의 캐시 위치는 어떻게 변경하나요?
    answer: >
      1. 관리자 권한 명령 프롬프트에서 이 명령을 실행하여 백업 엔진을 중지합니다.

          ```Net stop obengine```
      2. 시스템 상태 백업을 구성한 경우 디스크 관리를 열고 이름이 `"CBSSBVol_<ID>"` 형식인 디스크를 분리합니다.

      3. 기본적으로 스크래치 폴더는 `\Program Files\Microsoft Azure Recovery Services Agent\Scratch`에 있습니다.

      4. 전체 `\Scratch` 폴더를 공간이 충분한 다른 드라이브에 복사합니다. 콘텐츠가 이동되지 않고 복사되었는지 확인합니다.

      5. 새로 이동한 스크래치 폴더의 경로를 사용하여 다음 레지스트리 항목을 업데이트합니다.

          | 레지스트리 경로 | 레지스트리 키 | 값 |
          | --- | --- | --- |
          | `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\Config` |ScratchLocation |*새 스크래치 폴더 위치* |
          | `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\Config\CloudBackupProvider` |ScratchLocation |*새 스크래치 폴더 위치* |

      6. 관리자 권한 명령 프롬프트에서 백업 엔진을 재시작합니다.

          ```command
          Net stop obengine

          Net start obengine
          ```

      7. 주문형 백업을 실행합니다. 새 위치를 사용하여 백업이 성공적으로 완료되면 원래 캐시 폴더를 제거할 수 있습니다.


      >[!NOTE]

      >오프라인 시드 솔루션을 사용하는 경우 초기 복제 프로세스 중에 캐시 위치를 변경하지 마세요.
  - question: >
      캐시 폴더를 어디에 배치해야 하나요?
    answer: >
      다음 위치는 캐시 폴더에 대해 권장되지 않습니다.


      * 네트워크 공유/이동식 미디어: 캐시 폴더는 온라인 백업을 사용하여 백업해야 하는 서버에 대해 로컬이어야 합니다. 네트워크 위치 또는 USB 드라이브 같은 이동식 미디어는 지원되지 않습니다.

      * 오프라인 볼륨: 캐시 폴더는 Azure Backup 에이전트를 사용하는 예상된 백업에 대해 온라인 상태여야 합니다.
  - question: >
      지원되지 않는 캐시 폴더의 특성이 있나요?
    answer: >
      다음과 같은 특성 또는 해당 조합은 캐시 폴더에 지원되지 않습니다.


      * 암호화됨

      * 중복 제거

      * Compressed

      * 스파스

      * 재분석 지점


      캐시 폴더와 메타데이터 VHD에는 모두 Azure Backup 에이전트에 필요한 특성이 없습니다.
  - question: >
      백업에 사용되는 대역폭의 양을 조정하는 방법이 있나요?
    answer: >
      예, MARS 에이전트의 **속성 변경** 옵션을 사용하여 대역폭과 타이밍을 조정할 수 있습니다. [자세한 정보](backup-windows-with-mars-agent.md#enable-network-throttling).
- name: 복원
  questions:
  - question: >
      관리
    answer: ''
  - question: >
      암호를 잊어버린 경우 복구할 수 있나요?
    answer: "Azure Backup 에이전트에는 복원 중에 백업된 데이터를 해독하기 위한 암호(등록 중에 사용자가 제공)가 필요합니다. 분실된 암호를 처리하기 위한 옵션을 이해하려면 아래 시나리오를 검토하세요.\n\n| 원본 머신 <br> *(백업이 수행된 원본 머신)* | 암호 | 사용 가능한 옵션 |\n| --- | --- | --- |\n| 사용 가능 |실패 |원래 머신(백업이 수행된 머신)을 사용할 수 있고 동일한 Recovery Services 자격 증명 모음에 여전히 등록되어 있는 경우, 다음 [단계](./backup-azure-manage-mars.md#re-generate-passphrase)에 따라 암호를 다시 생성할 수 있습니다.  |\n| 실패 |실패 |데이터를 복구할 수 없거나 데이터를 사용할 수 없음 |\n\n다음 조건을 확인합니다.\n\n* 동일한 원본 머신에서 에이전트를 제거하고 다시 등록할 때\n  * *같은 암호* 를 사용하면 백업된 데이터를 복원할 수 있습니다.\n  * *다른 암호* 를 사용하면 백업된 데이터를 복원할 수 없습니다.\n* *다른 머신* 에 에이전트를 설치할 때\n  * *같은 암호*(원본 머신에서 사용)를 사용하면 백업된 데이터를 복원할 수 있습니다.\n  * *다른 암호* 를 사용하면 백업된 데이터를 복원할 수 없습니다.          \n* 원래 머신이 손상되었지만(MARS 콘솔을 통해 암호를 다시 생성할 수 없음) MARS 에이전트에서 사용하는 원래 스크래치 폴더를 복원하거나 액세스할 수 있는 경우(암호를 잊어버린 경우) 복원할 수 있습니다. 자세한 내용은 고객 지원팀에 문의하세요.\n"
  - question: >
      내 원래 머신(백업이 수행된 머신)을 분실한 경우 어떻게 복구하나요?
    answer: >
      원래 머신과 동일한 암호(등록 중에 사용자가 제공)가 있는 경우 백업된 데이터를 대체 머신에 복원할 수 있습니다. 복원 옵션을 이해하려면 아래 시나리오를 검토하세요.


      | 원본 머신 | 암호 | 사용 가능한 옵션 |

      | --- | --- | --- |

      | 실패 |사용 가능 |원래 머신 등록 중에 제공한 것과 동일한 암호를 사용하여 다른 머신에 MARS 에이전트를 설치하고 등록할 수 있습니다. 복원을 수행하려면 **복구 옵션** > **다른 위치** 를 선택합니다. 자세한 내용은 [이 문서](./backup-azure-restore-windows-server.md#use-instant-restore-to-restore-data-to-an-alternate-machine)를 참조하세요.

      | 실패 |실패 |데이터를 복구할 수 없거나 데이터를 사용할 수 없음 |
  - question: >
      내 백업 작업이 실패했거나 오랫동안 실행되지 않았습니다. 보존 기간이 지났습니다. 그래도 복원할 수 있나요?
    answer: >
      안전 조치로 Azure Backup은 보존 기간이 지난 경우에도 가장 최근 복구 지점을 보존합니다. 백업이 다시 시작되고 새 복구 지점을 사용할 수 있게 되면 지정된 보존 기간에 따라 이전 복구 지점이 제거됩니다.
  - question: >
      진행 중인 복원 작업을 취소하면 어떻게 되나요?
    answer: >
      진행 중인 복원 작업이 취소되면 복원 프로세스가 중지됩니다. 취소하기 전에 복원된 모든 파일은 롤백 없이 구성된 대상(원래 또는 대체 위치)에 그대로 유지됩니다.
  - question: >
      MARS 에이전트는 파일, 폴더 및 볼륨에 설정된 ACL을 백업 및 복원하나요?
    answer: >
      * MARS 에이전트는 파일, 폴더 및 볼륨에 설정된 ACL을 백업하고 복원합니다.

      * 볼륨 복원 복구 옵션의 경우 MARS 에이전트는 복구 중인 파일 또는 폴더에 ACL 권한 복원을 건너뛰는 옵션을 제공합니다.

      * 개별 파일 및 폴더 복구 옵션의 경우 MARS 에이전트는 ACL 권한으로 복원합니다(ACL 복원을 건너뛸 수 있는 옵션은 없음).
additionalContent: "\n## <a name=\"next-steps\"></a>다음 단계\nWindows 머신 백업 방법에 대해 [알아보세요](tutorial-backup-windows-server-to-azure.md)."
