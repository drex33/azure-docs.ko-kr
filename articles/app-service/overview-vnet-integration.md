---
title: Azure 가상 네트워크에 앱 통합
description: Azure App Service의 앱을 Azure virtual network와 통합 합니다.
author: madsd
ms.topic: conceptual
ms.date: 10/20/2021
ms.author: madsd
ms.openlocfilehash: 2fab79439dd28a889d117bdce5bc4916f3d5b2f8
ms.sourcegitcommit: 591ffa464618b8bb3c6caec49a0aa9c91aa5e882
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 11/06/2021
ms.locfileid: "131892934"
---
# <a name="integrate-your-app-with-an-azure-virtual-network"></a>Azure 가상 네트워크에 앱 통합

이 문서에서는 Azure App Service VNet 통합 기능 및 [App Service](./overview.md)앱으로 설정 하는 방법을 설명 합니다. Azure vnet ( [가상 네트워크](../virtual-network/virtual-networks-overview.md) )를 사용 하 여 인터넷 라우팅할 수 없는 네트워크에 많은 Azure 리소스를 저장할 수 있습니다. App Service VNet 통합 기능을 사용 하면 앱에서 가상 네트워크를 통해 또는의 리소스에 액세스할 수 있습니다. 가상 네트워크 통합을 사용 하면 앱을 개인적으로 액세스할 수 없습니다.

App Service는 두 가지 변형이 있습니다.

[!INCLUDE [app-service-web-vnet-types](../../includes/app-service-web-vnet-types.md)]

[가상 네트워크 통합을 사용 하도록 설정 하는 방법을](./configure-vnet-integration-enable.md)알아봅니다.

## <a name="regional-virtual-network-integration"></a>지역 가상 네트워크 통합

지역 가상 네트워크 통합은 동일한 지역의 가상 네트워크에 연결할 수 있도록 지원 하며 게이트웨이가 필요 하지 않습니다. 지역 가상 네트워크 통합을 사용 하면 앱이 다음에 액세스할 수 있습니다.

* 통합 하는 가상 네트워크의 리소스
* 가상 네트워크의 리소스는 글로벌 피어 링 연결을 포함 하 여 앱이 통합 된 가상 네트워크에 피어 링.
* Azure ExpressRoute 연결의 리소스
* 서비스 끝점-보안 서비스.
* 개인 끝점 사용 서비스.

지역 가상 네트워크 통합을 사용 하는 경우 다음과 같은 Azure 네트워킹 기능을 사용할 수 있습니다.

* **NSG(네트워크 보안 그룹)** : 통합 서브넷에 배치된 NSG를 사용하여 아웃바운드 트래픽을 차단할 수 있습니다. 인바운드 규칙은 응용 프로그램에 대 한 인바운드 액세스를 제공 하기 위해 가상 네트워크 통합을 사용할 수 없으므로 적용 되지 않습니다.
* **경로 테이블(UDR)** : 통합 서브넷에 경로 테이블을 배치하여 원하는 위치에 아웃바운드 트래픽을 보낼 수 있습니다.

### <a name="how-regional-virtual-network-integration-works"></a>지역 가상 네트워크 통합의 작동 방식

App Service의 앱은 작업자 역할에서 호스팅 됩니다. 지역 가상 네트워크 통합은 위임 된 서브넷의 주소를 사용 하 여 작업자 역할에 가상 인터페이스를 탑재 하는 방식으로 작동 합니다. 보낸 사람 주소는 가상 네트워크에 있으므로 가상 네트워크의 VM과 같은 가상 네트워크를 통해 또는의 모든 항목에 액세스할 수 있습니다. 네트워킹 구현은 가상 네트워크에서 VM을 실행 하는 것과는 다릅니다. 이러한 이유로 일부 네트워킹 기능은 현재 이 기능을 사용할 수 없습니다.

:::image type="content" source="./media/overview-vnet-integration/vnetint-how-regional-works.png" alt-text="지역 가상 네트워크 통합이 작동 하는 방식을 보여 주는 다이어그램입니다.":::

지역 가상 네트워크 통합을 사용 하도록 설정 하면 앱에서 가상 네트워크를 통해 아웃 바운드 호출을 수행 합니다. 앱 속성 포털에 나열된 아웃바운드 주소는 앱에서 계속 사용하는 주소입니다. 그러나 통합 가상 네트워크 또는 피어 링 가상 네트워크의 가상 머신 또는 개인 끝점에 대 한 아웃 바운드 호출이 인 경우 아웃 바운드 주소는 통합 서브넷의 주소가 됩니다. 인스턴스에 할당 된 개인 IP는 WEBSITE_PRIVATE_IP 환경 변수를 통해 노출 됩니다.

모든 트래픽 라우팅을 사용 하도록 설정 하면 모든 아웃 바운드 트래픽이 가상 네트워크에 전송 됩니다. 모든 트래픽 라우팅이 사용 하도록 설정 되지 않은 경우 통합 서브넷에 구성 된 개인 트래픽 (RFC1918) 및 서비스 끝점만 가상 네트워크에 전송 되 고 인터넷에 대 한 아웃 바운드 트래픽은 평소와 동일한 채널을 거칩니다.

이 기능은 작업자당 가상 인터페이스 하나만 지원합니다. 작업자 당 하나의 가상 인터페이스는 App Service 계획 당 하나의 지역 가상 네트워크 통합을 의미 합니다. 동일한 App Service 계획의 모든 앱은 동일한 가상 네트워크 통합을 사용할 수 있습니다. 다른 가상 네트워크에 연결 하는 데 필요한 앱이 필요한 경우 다른 App Service 계획을 만들어야 합니다. 여기에 사용되는 가상 인터페이스는 고객이 직접 액세스할 수 있는 리소스가 아닙니다.

이 기술이 작동 하는 방식 때문에 가상 네트워크 통합에 사용 되는 트래픽은 Azure Network Watcher 또는 NSG 흐름 로그에 표시 되지 않습니다.

### <a name="subnet-requirements"></a>서브넷 요구 사항

가상 네트워크 통합은 전용 서브넷에 종속 됩니다. 서브넷을 만들 때 Azure 서브넷은 처음부터 5 개의 Ip를 손실 합니다. 각 플랜 인스턴스에 대해 통합 서브넷에서 하나의 주소가 사용됩니다. 앱을 네 개의 인스턴스로 크기를 조정 하는 경우 4 개의 주소가 사용 됩니다.

크기를 스케일 업 또는 스케일 다운하면, 짧은 시간 동안 필요한 주소 공간이 2배가 됩니다. 이 변경은 지정 된 서브넷 크기에 대해 사용 가능한 실제 지원 되는 인스턴스에 영향을 줍니다. 다음 표에서는 CIDR 블록만 사용할 수 있는 최대 주소와이가 가로 배율에 미치는 영향을 모두 보여 줍니다.

| CIDR 블록 크기 | 사용 가능한 최대 주소 | 최대 가로 배율 (인스턴스)<sup>*</sup> |
|-----------------|-------------------------|---------------------------------|
| /28             | 11                      | 5                               |
| /27             | 27                      | 13                              |
| /26             | 59                      | 29                              |

<sup>*</sup>어느 시점에서든 SKU 또는 크기를 스케일 업 또는 스케일 다운해야 한다고 가정합니다.

할당 후 서브넷 크기를 변경할 수 없으므로 앱이 도달할 수 있는 모든 규모를 수용할 수 있을 만큼 큰 서브넷을 사용 합니다. 서브넷 용량 관련 문제를 방지 하려면 `/26` 64 주소와 함께를 사용 합니다.

계획의 앱이 다른 계획의 앱에 이미 연결 되어 있는 가상 네트워크에 연결 하려는 경우 기존 가상 네트워크 통합에서 사용 되는 서브넷과 다른 서브넷을 선택 합니다.

### <a name="routes"></a>경로

지역 가상 네트워크 통합을 구성할 때 고려해 야 할 라우팅에는 두 가지 유형이 있습니다. 응용 프로그램 라우팅은 응용 프로그램에서 가상 네트워크로 라우팅되는 트래픽을 정의 합니다. 네트워크 라우팅은 가상 네트워크에서 트래픽을 라우팅하는 방법을 제어 하는 기능입니다.

#### <a name="application-routing"></a>애플리케이션 라우팅

응용 프로그램 라우팅을 구성할 때 모든 트래픽 또는 개인 트래픽 ( [RFC1918](https://datatracker.ietf.org/doc/html/rfc1918#section-3) 트래픽)만 가상 네트워크로 라우팅할 수 있습니다. 이 동작은 **경로 모두** 설정을 통해 구성 합니다. **모두 경로** 를 사용 하지 않도록 설정 된 경우 앱은 개인 트래픽만 가상 네트워크로 라우팅합니다. 모든 아웃 바운드 트래픽을 가상 네트워크로 라우팅하려면 **모두 경로** 를 사용 하도록 설정 해야 합니다.

> [!NOTE]
> * **모두 경로** 를 사용 하는 경우 모든 트래픽은 통합 서브넷에 적용 되는 nsgs 및 udrs의 영향을 받습니다. 모든 트래픽 라우팅을 사용하도록 설정하면 트래픽을 다른 곳으로 전달하는 경로를 제공하지 않는 한 아웃바운드 트래픽은 앱 속성에 나열된 주소에서 계속 전송됩니다.
> * Windows 컨테이너는 가상 네트워크 통합을 통해 라우팅 App Service Key Vault 참조 또는 사용자 지정 컨테이너 이미지 끌어오기를 지원 하지 않습니다.
> * 지역 가상 네트워크 통합은 포트 25를 사용할 수 없습니다.

[응용 프로그램 라우팅을 구성 하는 방법](./configure-vnet-integration-routing.md)에 대해 알아봅니다.

모든 트래픽의 라우팅을 사용 하도록 설정 하려면 **모든 구성 경로** 구성 설정을 사용 하는 것이 좋습니다. 구성 설정을 사용 하면 [기본 제공 정책을](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2Fproviders%2FMicrosoft.Authorization%2FpolicyDefinitions%2F33228571-70a4-4fa1-8ca1-26d0aba8d6ef)사용 하 여 동작을 감사할 수 있습니다. 기존 WEBSITE_VNET_ROUTE_ALL 앱 설정을 계속 사용할 수 있으며, 이러한 설정을 사용 하 여 모든 트래픽 라우팅을 사용 하도록 설정할 수 있습니다.

#### <a name="network-routing"></a>네트워크 라우팅

경로 테이블을 사용하여 앱의 아웃바운드 트래픽을 원하는 위치로 라우팅할 수 있습니다. 경로 테이블은 대상 트래픽에 영향을 줍니다. [응용 프로그램 라우팅](#application-routing)에서 **모두 경로** 를 사용 하지 않도록 설정 하면 RFC1918 (개인 트래픽)만 경로 테이블의 영향을 받습니다. 일반적인 대상에는 방화벽 디바이스나 게이트웨이가 포함될 수 있습니다. 통합 서브넷에 설정된 경로는 인바운드 앱 요청에 대한 응답에 영향을 주지 않습니다.

모든 아웃 바운드 트래픽을 온-프레미스로 라우팅하는 경우 경로 테이블을 사용 하 여 모든 아웃 바운드 트래픽을 Azure Express 경로 게이트웨이로 보낼 수 있습니다. 게이트웨이로 트래픽을 라우팅하는 경우 외부 네트워크의 경로를 설정 하 여 응답을 다시 보냅니다.

BGP(Border Gateway Protocol) 경로도 앱 트래픽에 영향을 줍니다. ExpressRoute 게이트웨이와 같은 항목의 BGP 경로가 있는 경우 앱 아웃바운드 트래픽이 영향을 받습니다. 사용자 정의 경로와 마찬가지로 BGP 경로는 라우팅 범위 설정에 따라 트래픽에 영향을 줍니다.

### <a name="network-security-groups"></a>네트워크 보안 그룹

지역 가상 네트워크 통합을 사용 하는 앱은 [네트워크 보안 그룹](../virtual-network/network-security-groups-overview.md) 을 사용 하 여 가상 네트워크 또는 인터넷의 리소스에 대 한 아웃 바운드 트래픽을 차단할 수 있습니다. 공용 주소에 대 한 트래픽을 차단 하려면 가상 네트워크에 대 한 [모든 경로](#application-routing) 를 사용 하도록 설정 합니다. **모든 경로** 를 사용 하도록 설정 하지 않은 경우 NSGS는 RFC1918 트래픽에만 적용 됩니다.

통합 서브넷에 적용된 NSG는 통합 서브넷에 적용된 경로 테이블과 무관하게 적용됩니다.

가상 네트워크 통합은 앱의 아웃 바운드 트래픽에만 영향을 주므로 NSG의 인바운드 규칙은 앱에 적용 되지 않습니다. 앱에 대한 인바운드 트래픽을 제어하려면 액세스 제한 기능을 사용합니다.

### <a name="service-endpoints"></a>서비스 엔드포인트

지역 가상 네트워크 통합을 사용 하면 서비스 끝점으로 보안이 유지 되는 Azure 서비스에 연결할 수 있습니다. 서비스 끝점 보안 서비스에 액세스 하려면 다음 단계를 수행 합니다.

1. 웹 앱과 지역 가상 네트워크 통합을 구성 하 여 통합을 위해 특정 서브넷에 연결 합니다.
1. 대상 서비스로 이동하여 통합 서브넷에 대해 서비스 엔드포인트를 구성합니다.

### <a name="private-endpoints"></a>프라이빗 엔드포인트

[전용 끝점](./networking/private-endpoint.md)에 대 한 호출을 수행 하려면 DNS 조회가 개인 끝점으로 확인 되는지 확인 합니다. 이러한 동작은 다음 방법 중 하나로 적용할 수 있습니다.

* Azure DNS 프라이빗 영역과 통합합니다. 가상 네트워크에 사용자 지정 DNS 서버가 없는 경우 영역을 가상 네트워크에 연결 하면 통합이 자동으로 수행 됩니다.
* 앱에서 사용하는 DNS 서버에서 프라이빗 엔드포인트를 관리합니다. 구성을 관리 하려면 개인 끝점 IP 주소를 알고 있어야 합니다. 그런 다음 A 레코드를 사용 하 여 해당 주소에 도달 하려는 끝점을 가리킵니다.
* Azure DNS 프라이빗 영역으로 전달하도록 자체 DNS 서버를 구성합니다.

### <a name="azure-dns-private-zones"></a>Azure DNS 프라이빗 영역

앱이 가상 네트워크와 통합 되 면 가상 네트워크가 구성 된 것과 동일한 DNS 서버를 사용 합니다. 지정 된 사용자 지정 DNS가 없는 경우 Azure 기본 DNS 및 가상 네트워크에 연결 된 모든 개인 영역을 사용 합니다.

### <a name="limitations"></a>제한 사항

지역 가상 네트워크 통합을 사용 하는 경우 다음과 같은 몇 가지 제한 사항이 있습니다.

* 이 기능은 Premium v2 및 Premium v3의 모든 App Service 배율 단위에서 사용할 수 있습니다. 표준에서도 사용할 수 있지만 최신 App Service 배율 단위에서만 사용할 수 있습니다. 이전 배율 단위를 사용 하는 경우 Premium v2 App Service 계획의 기능만 사용할 수 있습니다. 표준 App Service 계획에서이 기능을 사용할 수 있도록 하려면 Premium v3 App Service 계획에서 앱을 만듭니다. 이러한 플랜은 최신 배율 단위에서만 지원됩니다. 계획을 만든 후 원하는 경우 규모를 축소할 수 있습니다.
* 이 기능은 App Service Environment에 있는 격리 요금제 앱에서 사용할 수 없습니다.
* 클래식 가상 네트워크를 사용 하는 피어 링 연결에서 리소스에 연결할 수 없습니다.
* 이 기능을 사용 하려면 `/28` Azure Resource Manager 가상 네트워크에서 IPv4 블록 이상인 사용 하지 않는 서브넷이 필요 합니다.
* 앱과 가상 네트워크는 동일한 지역에 있어야 합니다.
* 통합 가상 네트워크에는 IPv6 주소 공간을 정의할 수 없습니다.
* 통합 서브넷은 App Service 요금제 하나에서만 사용할 수 있습니다.
* 통합 된 앱으로는 가상 네트워크를 삭제할 수 없습니다. 가상 네트워크를 삭제 하기 전에 통합을 제거 합니다.
* App Service 계획 당 지역 가상 네트워크 통합은 하나만 사용할 수 있습니다. 동일한 App Service 계획의 여러 앱에서 동일한 가상 네트워크를 사용할 수 있습니다.
* 지역 가상 네트워크 통합을 사용 하는 앱이 있는 경우 앱 또는 계획의 구독을 변경할 수 없습니다.

## <a name="gateway-required-virtual-network-integration"></a>게이트웨이-필요한 가상 네트워크 통합

게이트웨이-필수 가상 네트워크 통합은 다른 지역의 가상 네트워크 또는 클래식 가상 네트워크에 대 한 연결을 지원 합니다. 게이트웨이-필요한 가상 네트워크 통합:

* 앱이 한 번에 하나의 가상 네트워크에만 연결할 수 있도록 합니다.
* App Service 계획 내에서 최대 5 개의 가상 네트워크를 통합할 수 있습니다.
* App Service 계획에서 사용할 수 있는 총 개수에 영향을 주지 않고 App Service 계획의 여러 앱에서 동일한 가상 네트워크를 사용할 수 있습니다. 동일한 App Service 계획에서 동일한 가상 네트워크를 사용 하는 앱이 6 개 있는 경우 사용 되는 하나의 가상 네트워크로 계산 됩니다.
* 게이트웨이의 SLA는 전반적인 [sla](https://azure.microsoft.com/support/legal/sla/)에 영향을 줄 수 있습니다.
* 앱에서 가상 네트워크가 구성 된 DNS를 사용할 수 있도록 합니다.
* 앱에 연결 하려면 먼저 SSTP 지점 및 사이트 간 VPN을 사용 하 여 구성 된 가상 네트워크 경로 기반 게이트웨이가 필요 합니다.

게이트웨이-필수 가상 네트워크 통합을 사용할 수 없습니다.

* Express 경로를 사용 하 여 연결 된 가상 네트워크.
* Linux 앱에서.
* [Windows 컨테이너](./quickstart-custom-container.md)에서.
* 서비스 끝점 보안 리소스에 액세스 하는 데 사용 됩니다.
* ExpressRoute와 지점 및 사이트 간 또는 사이트 간 VPN을 모두 지원하는 동시 존재 게이트웨이.

### <a name="set-up-a-gateway-in-your-azure-virtual-network"></a>Azure 가상 네트워크에서 게이트웨이 설정

게이트웨이를 만들려면,

1. [VPN gateway 및 서브넷을 만듭니다](../vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal.md#creategw). 경로 기반 VPN 종류를 선택합니다.

1. [지점 및 사이트 간 주소를 설정합니다](../vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal.md#addresspool). 게이트웨이가 기본 SKU에 없으면 지점 및 사이트 간 구성에서 IKEV2를 사용하지 않도록 설정해야 하며 SSTP를 선택해야 합니다. 지점 및 사이트 간 주소 공간은 RFC 1918 주소 블록 10.0.0.0/8, 172.16.0.0/12 및 192.168.0.0/16에 있어야 합니다.

게이트웨이를 사용 하 여 게이트웨이를 만드는 데 필요한 가상 네트워크 통합을 사용 하는 경우 인증서를 업로드할 필요가 없습니다. 게이트웨이를 만드는 데 30분이 걸릴 수 있습니다. 게이트웨이가 만들어질 때까지 앱을 가상 네트워크와 통합할 수 없습니다.

### <a name="how-gateway-required-virtual-network-integration-works"></a>게이트웨이-필요한 가상 네트워크 통합 작동 방식

게이트웨이-필수 가상 네트워크 통합은 지점 및 사이트 간 VPN 기술을 기반으로 합니다. 지점 및 사이트 간 VPN은 앱을 호스트 하는 가상 머신의 네트워크 액세스를 제한합니다. 앱은 하이브리드 연결 또는 가상 네트워크 통합을 통해서만 인터넷으로 트래픽을 전송 하도록 제한 됩니다. 앱을 포털을 사용 하 여 구성 하 여 게이트웨이를 사용 하는 데 필요한 가상 네트워크 통합을 사용 하는 경우 사용자를 대신해 서 게이트웨이 및 응용 프로그램 쪽에서 인증서를 만들고 할당 하는 복잡 한 협상이 관리 됩니다. 따라서 앱을 호스트 하는 데 사용 되는 작업자는 선택한 가상 네트워크의 가상 네트워크 게이트웨이에 직접 연결할 수 있습니다.

:::image type="content" source="./media/overview-vnet-integration/vnetint-how-gateway-works.png" alt-text="게이트웨이가 필요한 가상 네트워크 통합이 작동 하는 방법을 보여 주는 다이어그램입니다.":::

### <a name="access-on-premises-resources"></a>온-프레미스 리소스에 액세스

앱은 사이트 간 연결이 있는 가상 네트워크와 통합 하 여 온-프레미스 리소스에 액세스할 수 있습니다. 게이트웨이 필요 가상 네트워크 통합을 사용 하는 경우 지점 및 사이트 간 주소 블록을 사용 하 여 온-프레미스 VPN gateway 경로를 업데이트 합니다. 사이트 간 VPN을 처음 설정하는 경우 이를 구성하는 데 사용되는 스크립트에서 경로를 올바르게 설정해야 합니다. 사이트 간 VPN을 만든 후에 지점 및 사이트 간 VPN을 추가하는 경우 해당 경로를 수동으로 업데이트해야 합니다. 이 작업을 수행하는 방법 관련 세부 정보는 게이트웨이마다 다르며 여기에 설명되어 있지 않습니다. 또한 사이트 간 VPN 연결로 구성된 BGP는 사용할 수 없습니다.

가상 네트워크를 통해 온-프레미스 리소스에 연결 하기 위해 지역 가상 네트워크 통합 기능에 대 한 추가 구성은 필요 하지 않습니다. Express 경로 또는 사이트 간 VPN을 사용 하 여 가상 네트워크를 온-프레미스 리소스에 연결 하기만 하면 됩니다.

> [!NOTE]
> 게이트웨이-필수 가상 네트워크 통합 기능은 Express 경로 게이트웨이가 있는 가상 네트워크와 앱을 통합 하지 않습니다. Express 경로 게이트웨이가 [공존 모드](../expressroute/expressroute-howto-coexist-resource-manager.md)에서 구성 된 경우에도 가상 네트워크 통합은 작동 하지 않습니다. Express 경로 연결을 통해 리소스에 액세스 해야 하는 경우 지역 가상 네트워크 통합 기능 또는 가상 네트워크에서 실행 되는 [App Service Environment](./environment/intro.md)을 사용 합니다.

### <a name="peering"></a>피어링

지역 가상 네트워크 통합에서 피어 링을 사용 하는 경우 추가 구성을 수행할 필요가 없습니다.

피어 링과 게이트웨이를 사용 하는 데 필요한 가상 네트워크를 사용 하는 경우 몇 가지 항목을 추가로 구성 해야 합니다. 앱에서 작동하도록 피어링을 구성하려면,

1. 앱이 연결 되는 가상 네트워크에 피어 링 연결을 추가 합니다. 피어링 연결을 추가할 때 **가상 네트워크 액세스 허용** 을 사용하도록 설정하고, **전달된 트래픽 허용** 및 **게이트 전송 허용** 을 선택하세요.
1. 연결 하려는 가상 네트워크에 피어 링 되는 가상 네트워크에 피어 링 연결을 추가 합니다. 대상 가상 네트워크에서 피어 링 연결을 추가 하는 경우 **가상 네트워크 액세스 허용** 을 사용 하도록 설정 하 고 **전달 된 트래픽 허용** 및 **원격 게이트웨이 허용** 을 선택 합니다.
1. 포털에서 **App Service**  >  **네트워킹**  >  **VNet 통합** 계획으로 이동 합니다. 앱이 연결 되는 가상 네트워크를 선택 합니다. 라우팅 섹션 아래에서 앱이 연결 된 가상 네트워크에 피어 링 가상 네트워크의 주소 범위를 추가 합니다.

## <a name="manage-virtual-network-integration"></a>가상 네트워크 통합 관리

가상 네트워크에 연결 하 고 연결을 끊는 것은 앱 수준입니다. 여러 앱에서 가상 네트워크 통합에 영향을 줄 수 있는 작업은 App Service 계획 수준에 있습니다. 앱 > **네트워킹**  >  **VNet 통합** 포털에서 가상 네트워크에 대 한 세부 정보를 가져올 수 있습니다. **App Service plan**  >  **네트워킹**  >  **VNet 통합** 포털의 App Service 계획 수준에서 유사한 정보를 볼 수 있습니다.

가상 네트워크 통합 인스턴스의 앱 보기에서 수행할 수 있는 유일한 작업은 현재 연결 되어 있는 가상 네트워크에서 앱을 분리 하는 것입니다. 가상 네트워크에서 앱의 연결을 끊으려면 **연결 끊기** 를 선택 합니다. 가상 네트워크에서 연결을 끊으면 앱이 다시 시작 됩니다. 연결을 끊는 것은 가상 네트워크를 변경 하지 않습니다. 서브넷 또는 게이트웨이가 제거되지 않습니다. 그런 다음 가상 네트워크를 삭제하려면 먼저 가상 네트워크에서 앱의 연결을 끊고 게이트웨이와 같은 리소스를 삭제합니다.

App Service 계획 가상 네트워크 통합 UI는 App Service 계획의 앱에서 사용하는 모든 가상 네트워크 통합을 보여 줍니다. 각 가상 네트워크에 대한 세부 정보를 보려면 관심 있는 가상 네트워크를 선택합니다. 게이트웨이 필수 가상 네트워크 통합을 위해 다음 두 가지 작업을 수행할 수 있습니다.

* **네트워크 동기화:** 네트워크 동기화 작업은 게이트웨이에 필요한 가상 네트워크 통합 기능에만 사용됩니다. 동기화 네트워크 작업을 수행하면 인증서 및 네트워크 정보가 동기화됩니다. 가상 네트워크의 DNS를 추가하거나 변경하는 경우 동기화 네트워크 작업을 수행합니다. 이 작업은 이 가상 네트워크를 사용하는 모든 앱을 다시 시작합니다. 다른 구독에 속한 앱 및 가상 네트워크를 사용하는 경우 이 작업이 작동하지 않습니다.
* **경로 추가:** 경로를 추가하면 아웃바운드 트래픽이 가상 네트워크에 연결됩니다.

인스턴스에 할당된 개인 IP는 환경 변수 WEBSITE_PRIVATE_IP 통해 노출됩니다. Kudu 콘솔 UI에는 웹앱에서 사용할 수 있는 환경 변수 목록도 표시됩니다. 이 IP는 통합된 서브넷의 주소 범위에서 할당됩니다. 지역 가상 네트워크 통합의 경우 WEBSITE_PRIVATE_IP 값은 위임된 서브넷의 주소 범위에서 가져온 IP입니다. 게이트웨이에 필요한 가상 네트워크 통합의 경우 값은 가상 네트워크 게이트웨이에 구성된 지점 및 사이트간 주소 풀의 주소 범위에서 IP입니다. 이 IP는 웹앱에서 Azure 가상 네트워크를 통해 리소스에 연결하는 데 사용됩니다.

> [!NOTE]
> WEBSITE_PRIVATE_IP 값은 변경 내용에 바인딩됩니다. 그러나 통합 서브넷의 주소 범위 또는 지점 및 사이트 간 주소 범위 내의 IP이므로 전체 주소 범위에서 액세스를 허용해야 합니다.
>

### <a name="gateway-required-virtual-network-integration-routing"></a>게이트웨이 필수 가상 네트워크 통합 라우팅

가상 네트워크에 정의된 경로는 앱에서 가상 네트워크로 트래픽을 안내하는 데 사용됩니다. 가상 네트워크에 더 많은 아웃바운드 트래픽을 보내려면 여기에 해당 주소 블록을 추가합니다. 이 기능은 게이트웨이 필수 가상 네트워크 통합에서만 작동합니다. 경로 테이블은 지역 가상 네트워크 통합과 같은 방식으로 게이트웨이 필수 가상 네트워크 통합을 사용하는 경우 앱 트래픽에 영향을 미치지 않습니다.

### <a name="gateway-required-virtual-network-integration-certificates"></a>게이트웨이 필수 가상 네트워크 통합 인증서

게이트웨이에 필요한 가상 네트워크 통합을 사용하도록 설정하면 연결 보안을 보장하기 위해 필요한 인증서 교환이 있습니다. 인증서와 함께 네트워크를 설명하는 DNS 구성, 경로 및 다른 비슷한 항목이 있습니다.

인증서 또는 네트워크 정보가 변경되면 **네트워크 동기화** 를 선택하세요. **네트워크 동기화를** 선택하면 앱과 가상 네트워크 간의 연결이 잠깐 중단됩니다. 앱이 다시 시작되지는 않지만 연결이 끊어지면 사이트가 제대로 작동하지 않을 수 있습니다.

## <a name="pricing-details"></a>가격 정보

지역 가상 네트워크 통합 기능은 App Service 계획 가격 책정 계층 요금 외에 추가 비용 없이 사용할 수 있습니다.

세 가지 요금은 게이트웨이에 필요한 가상 네트워크 통합 기능의 사용과 관련이 있습니다.

* **App Service 요금제 가격 책정 계층 요금제:** 앱은 표준, Premium, Premium v2 또는 Premium v3 App Service 플랜에 있어야 합니다. 가격 책정에 대한 자세한 내용은 [App Service 가격 책정](https://azure.microsoft.com/pricing/details/app-service/)을 참조하세요.
* **데이터 전송 비용:** 가상 네트워크가 동일한 데이터 센터에 있더라도 데이터 송신에 대한 요금이 부과됩니다. 이러한 요금은 [데이터 전송 가격 정보](https://azure.microsoft.com/pricing/details/data-transfers/)에 설명되어 있습니다.
* **VPN 게이트웨이 비용** 지점 및 사이트 간 VPN에 필요한 가상 네트워크 게이트웨이 관련 비용이 발생합니다. 자세한 내용은 [VPN 게이트웨이 가격 책정](https://azure.microsoft.com/pricing/details/vpn-gateway/)을 참조하세요.

## <a name="troubleshooting"></a>문제 해결

> [!NOTE]
> App Service Docker Compose 시나리오에서는 가상 네트워크 통합이 지원되지 않습니다.
> 프라이빗 엔드포인트가 있는 경우 액세스 제한은 무시됩니다.

[!INCLUDE [app-service-web-vnet-troubleshooting](../../includes/app-service-web-vnet-troubleshooting.md)]
